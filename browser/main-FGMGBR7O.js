var zk=Object.defineProperty,qk=Object.defineProperties;var Gk=Object.getOwnPropertyDescriptors;var GC=Object.getOwnPropertySymbols,Wk=Object.getPrototypeOf,Kk=Object.prototype.hasOwnProperty,Qk=Object.prototype.propertyIsEnumerable,Yk=Reflect.get;var WC=(n,e,t)=>e in n?zk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H=(n,e)=>{for(var t in e||={})Kk.call(e,t)&&WC(n,t,e[t]);if(GC)for(var t of GC(e))Qk.call(e,t)&&WC(n,t,e[t]);return n},oe=(n,e)=>qk(n,Gk(e));var Li=(n,e,t)=>Yk(Wk(n),t,e);var E=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function fg(n,e){return Object.is(n,e)}var gt=null,Ed=!1,pg=1,pn=Symbol("SIGNAL");function Ne(n){let e=gt;return gt=n,e}function KC(){return gt}var Kc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Cd(n){if(Ed)throw new Error("");if(gt===null)return;gt.consumerOnSignalRead(n);let e=gt.nextProducerIndex++;if(xd(gt),e<gt.producerNode.length&&gt.producerNode[e]!==n&&Wc(gt)){let t=gt.producerNode[e];Td(t,gt.producerIndexOfThis[e])}gt.producerNode[e]!==n&&(gt.producerNode[e]=n,gt.producerIndexOfThis[e]=Wc(gt)?ZC(n,gt,e):0),gt.producerLastReadVersion[e]=n.version}function Zk(){pg++}function mg(n){if(!(Wc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===pg)){if(!n.producerMustRecompute(n)&&!_g(n)){hg(n);return}n.producerRecomputeValue(n),hg(n)}}function QC(n){if(n.liveConsumerNode===void 0)return;let e=Ed;Ed=!0;try{for(let t of n.liveConsumerNode)t.dirty||Jk(t)}finally{Ed=e}}function YC(){return gt?.consumerAllowSignalWrites!==!1}function Jk(n){n.dirty=!0,QC(n),n.consumerMarkedDirty?.(n)}function hg(n){n.dirty=!1,n.lastCleanEpoch=pg}function Sd(n){return n&&(n.nextProducerIndex=0),Ne(n)}function gg(n,e){if(Ne(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Wc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Td(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function _g(n){xd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(mg(t),r!==t.version))return!0}return!1}function yg(n){if(xd(n),Wc(n))for(let e=0;e<n.producerNode.length;e++)Td(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ZC(n,e,t){if(JC(n),n.liveConsumerNode.length===0&&XC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=ZC(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Td(n,e){if(JC(n),n.liveConsumerNode.length===1&&XC(n))for(let r=0;r<n.producerNode.length;r++)Td(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];xd(i),i.producerIndexOfThis[r]=e}}function Wc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function xd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function JC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function XC(n){return n.producerNode!==void 0}function eS(n){let e=Object.create(Xk);e.computation=n;let t=()=>{if(mg(e),Cd(e),e.value===Id)throw e.error;return e.value};return t[pn]=e,t}var ug=Symbol("UNSET"),dg=Symbol("COMPUTING"),Id=Symbol("ERRORED"),Xk=oe(H({},Kc),{value:ug,dirty:!0,error:null,equal:fg,producerMustRecompute(n){return n.value===ug||n.value===dg},producerRecomputeValue(n){if(n.value===dg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=dg;let t=Sd(n),r;try{r=n.computation()}catch(i){r=Id,n.error=i}finally{gg(n,t)}if(e!==ug&&e!==Id&&r!==Id&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function eF(){throw new Error}var tS=eF;function nS(){tS()}function rS(n){tS=n}var tF=null;function iS(n){let e=Object.create(vg);e.value=n;let t=()=>(Cd(e),e.value);return t[pn]=e,t}function Dd(n,e){YC()||nS(),n.equal(n.value,e)||(n.value=e,nF(n))}function oS(n,e){YC()||nS(),Dd(n,e(n.value))}var vg=oe(H({},Kc),{equal:fg,value:void 0});function nF(n){n.version++,Zk(),QC(n),tF?.()}function pe(n){return typeof n=="function"}function Fs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ad=Fs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Po(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var st=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){e=o instanceof Ad?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{sS(o)}catch(s){e=e??[],s instanceof Ad?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ad(e)}}add(e){var t;if(e&&e!==this)if(this.closed)sS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Po(t,e)}remove(e){let{_finalizers:t}=this;t&&Po(t,e),e instanceof n&&e._removeParent(this)}};st.EMPTY=(()=>{let n=new st;return n.closed=!0,n})();var wg=st.EMPTY;function Pd(n){return n instanceof st||n&&"closed"in n&&pe(n.remove)&&pe(n.add)&&pe(n.unsubscribe)}function sS(n){pe(n)?n():n.unsubscribe()}var Kn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ls={setTimeout(n,e,...t){let{delegate:r}=Ls;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ls;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Md(n){Ls.setTimeout(()=>{let{onUnhandledError:e}=Kn;if(e)e(n);else throw n})}function Qc(){}var aS=bg("C",void 0,void 0);function cS(n){return bg("E",void 0,n)}function lS(n){return bg("N",n,void 0)}function bg(n,e,t){return{kind:n,value:e,error:t}}var Mo=null;function Vs(n){if(Kn.useDeprecatedSynchronousErrorHandling){let e=!Mo;if(e&&(Mo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Mo;if(Mo=null,t)throw r}}else n()}function uS(n){Kn.useDeprecatedSynchronousErrorHandling&&Mo&&(Mo.errorThrown=!0,Mo.error=n)}var Ro=class extends st{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Pd(e)&&e.add(this)):this.destination=oF}static create(e,t,r){return new Us(e,t,r)}next(e){this.isStopped?Ig(lS(e),this):this._next(e)}error(e){this.isStopped?Ig(cS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ig(aS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rF=Function.prototype.bind;function Eg(n,e){return rF.call(n,e)}var Cg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Rd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Rd(r)}else Rd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Rd(t)}}},Us=class extends Ro{constructor(e,t,r){super();let i;if(pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Kn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Eg(e.next,o),error:e.error&&Eg(e.error,o),complete:e.complete&&Eg(e.complete,o)}):i=e}this.destination=new Cg(i)}};function Rd(n){Kn.useDeprecatedSynchronousErrorHandling?uS(n):Md(n)}function iF(n){throw n}function Ig(n,e){let{onStoppedNotification:t}=Kn;t&&Ls.setTimeout(()=>t(n,e))}var oF={closed:!0,next:Qc,error:iF,complete:Qc};var Bs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mn(n){return n}function Sg(...n){return Tg(n)}function Tg(n){return n.length===0?mn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=aF(t)?t:new Us(t,r,i);return Vs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=dS(r),new r((i,o)=>{let s=new Us({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Bs](){return this}pipe(...t){return Tg(t)(this)}toPromise(t){return t=dS(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function dS(n){var e;return(e=n??Kn.Promise)!==null&&e!==void 0?e:Promise}function sF(n){return n&&pe(n.next)&&pe(n.error)&&pe(n.complete)}function aF(n){return n&&n instanceof Ro||sF(n)&&Pd(n)}function xg(n){return pe(n?.lift)}function Pe(n){return e=>{if(xg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Se(n,e,t,r,i){return new Dg(n,e,t,r,i)}var Dg=class extends Ro{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function js(){return Pe((n,e)=>{let t=null;n._refCount++;let r=Se(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var $s=class extends Ae{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,xg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new st;let t=this.getSubject();e.add(this.source.subscribe(Se(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=st.EMPTY)}return e}refCount(){return js()(this)}};var hS=Fs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _t=(()=>{class n extends Ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Od(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new hS}next(t){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?wg:(this.currentObservers=null,o.push(t),new st(()=>{this.currentObservers=null,Po(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ae;return t.source=this,t}}return n.create=(e,t)=>new Od(e,t),n})(),Od=class extends _t{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:wg}};var Rt=class extends _t{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ag={now(){return(Ag.delegate||Date).now()},delegate:void 0};var Nd=class extends st{constructor(e,t){super()}schedule(e,t=0){return this}};var Yc={setInterval(n,e,...t){let{delegate:r}=Yc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Yc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Hs=class extends Nd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Yc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Yc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Po(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var zs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};zs.now=Ag.now;var qs=class extends zs{constructor(e,t=zs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Pg=new qs(Hs);var kd=class extends Hs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Fd=class extends qs{};var Mg=new Fd(kd);var gn=new Ae(n=>n.complete());function fS(n){return n&&pe(n.schedule)}function pS(n){return n[n.length-1]}function Ld(n){return pe(pS(n))?n.pop():void 0}function Vi(n){return fS(pS(n))?n.pop():void 0}function Rg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function gS(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(g){s(g)}}function c(d){try{u(r.throw(d))}catch(g){s(g)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function mS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oo(n){return this instanceof Oo?(this.v=n,this):new Oo(n)}function _S(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(b){return function(C){return Promise.resolve(C).then(b,g)}}function a(b,C){r[b]&&(i[b]=function(O){return new Promise(function(R,U){o.push([b,O,R,U])>1||c(b,O)})},C&&(i[b]=C(i[b])))}function c(b,C){try{u(r[b](C))}catch(O){y(o[0][3],O)}}function u(b){b.value instanceof Oo?Promise.resolve(b.value.v).then(d,g):y(o[0][2],b)}function d(b){c("next",b)}function g(b){c("throw",b)}function y(b,C){b(C),o.shift(),o.length&&c(o[0][0],o[0][1])}}function yS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof mS=="function"?mS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Vd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ud(n){return pe(n?.then)}function Bd(n){return pe(n[Bs])}function jd(n){return Symbol.asyncIterator&&pe(n?.[Symbol.asyncIterator])}function $d(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hd=cF();function zd(n){return pe(n?.[Hd])}function qd(n){return _S(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Oo(t.read());if(i)return yield Oo(void 0);yield yield Oo(r)}}finally{t.releaseLock()}})}function Gd(n){return pe(n?.getReader)}function ht(n){if(n instanceof Ae)return n;if(n!=null){if(Bd(n))return lF(n);if(Vd(n))return uF(n);if(Ud(n))return dF(n);if(jd(n))return vS(n);if(zd(n))return hF(n);if(Gd(n))return fF(n)}throw $d(n)}function lF(n){return new Ae(e=>{let t=n[Bs]();if(pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function uF(n){return new Ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function dF(n){return new Ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Md)})}function hF(n){return new Ae(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function vS(n){return new Ae(e=>{pF(n,e).catch(t=>e.error(t))})}function fF(n){return vS(qd(n))}function pF(n,e){var t,r,i,o;return gS(this,void 0,void 0,function*(){try{for(t=yS(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function sn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ui(n,e=0){return Pe((t,r)=>{t.subscribe(Se(r,i=>sn(r,n,()=>r.next(i),e),()=>sn(r,n,()=>r.complete(),e),i=>sn(r,n,()=>r.error(i),e)))})}function Bi(n,e=0){return Pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function wS(n,e){return ht(n).pipe(Bi(e),Ui(e))}function bS(n,e){return ht(n).pipe(Bi(e),Ui(e))}function ES(n,e){return new Ae(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function IS(n,e){return new Ae(t=>{let r;return sn(t,e,()=>{r=n[Hd](),sn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}function Wd(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ae(t=>{sn(t,e,()=>{let r=n[Symbol.asyncIterator]();sn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function CS(n,e){return Wd(qd(n),e)}function SS(n,e){if(n!=null){if(Bd(n))return wS(n,e);if(Vd(n))return ES(n,e);if(Ud(n))return bS(n,e);if(jd(n))return Wd(n,e);if(zd(n))return IS(n,e);if(Gd(n))return CS(n,e)}throw $d(n)}function lt(n,e){return e?SS(n,e):ht(n)}function me(...n){let e=Vi(n);return lt(n,e)}function Gs(n,e){let t=pe(n)?n:()=>n,r=i=>i.error(t());return new Ae(e?i=>e.schedule(r,0,i):r)}function Og(n){return!!n&&(n instanceof Ae||pe(n.lift)&&pe(n.subscribe))}var Qr=Fs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ie(n,e){return Pe((t,r)=>{let i=0;t.subscribe(Se(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:mF}=Array;function gF(n,e){return mF(e)?n(...e):n(e)}function Kd(n){return Ie(e=>gF(n,e))}var{isArray:_F}=Array,{getPrototypeOf:yF,prototype:vF,keys:wF}=Object;function Qd(n){if(n.length===1){let e=n[0];if(_F(e))return{args:e,keys:null};if(bF(e)){let t=wF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function bF(n){return n&&typeof n=="object"&&yF(n)===vF}function Yd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Zd(...n){let e=Vi(n),t=Ld(n),{args:r,keys:i}=Qd(n);if(r.length===0)return lt([],e);let o=new Ae(EF(r,e,i?s=>Yd(i,s):mn));return t?o.pipe(Kd(t)):o}function EF(n,e,t=mn){return r=>{TS(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)TS(e,()=>{let u=lt(n[c],e),d=!1;u.subscribe(Se(r,g=>{o[c]=g,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function TS(n,e,t){n?sn(t,n,e):e()}function xS(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,g=!1,y=()=>{g&&!c.length&&!u&&e.complete()},b=O=>u<r?C(O):c.push(O),C=O=>{o&&e.next(O),u++;let R=!1;ht(t(O,d++)).subscribe(Se(e,U=>{i?.(U),o?b(U):e.next(U)},()=>{R=!0},void 0,()=>{if(R)try{for(u--;c.length&&u<r;){let U=c.shift();s?sn(e,s,()=>C(U)):C(U)}y()}catch(U){e.error(U)}}))};return n.subscribe(Se(e,b,()=>{g=!0,y()})),()=>{a?.()}}function yt(n,e,t=1/0){return pe(e)?yt((r,i)=>Ie((o,s)=>e(r,o,i,s))(ht(n(r,i))),t):(typeof e=="number"&&(t=e),Pe((r,i)=>xS(r,i,n,t)))}function Ng(n=1/0){return yt(mn,n)}function DS(){return Ng(1)}function Ws(...n){return DS()(lt(n,Vi(n)))}function Jd(n){return new Ae(e=>{ht(n()).subscribe(e)})}function kg(...n){let e=Ld(n),{args:t,keys:r}=Qd(n),i=new Ae(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let g=!1;ht(t[d]).subscribe(Se(o,y=>{g||(g=!0,u--),a[d]=y},()=>c--,void 0,()=>{(!c||!g)&&(u||o.next(r?Yd(r,a):a),o.complete())}))}});return e?i.pipe(Kd(e)):i}function Qn(n,e){return Pe((t,r)=>{let i=0;t.subscribe(Se(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ji(n){return Pe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Se(t,void 0,void 0,s=>{o=ht(n(s,ji(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function AS(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Se(s,d=>{let g=u++;c=a?n(c,d,g):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Ks(n,e){return pe(e)?yt(n,e,1):yt(n,1)}function $i(n){return Pe((e,t)=>{let r=!1;e.subscribe(Se(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Yr(n){return n<=0?()=>gn:Pe((e,t)=>{let r=0;e.subscribe(Se(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Fg(n){return Ie(()=>n)}function Xd(n=IF){return Pe((e,t)=>{let r=!1;e.subscribe(Se(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function IF(){return new Qr}function Zc(n){return Pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Zr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Qn((i,o)=>n(i,o,r)):mn,Yr(1),t?$i(e):Xd(()=>new Qr))}function Qs(n){return n<=0?()=>gn:Pe((e,t)=>{let r=[];e.subscribe(Se(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Lg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Qn((i,o)=>n(i,o,r)):mn,Qs(1),t?$i(e):Xd(()=>new Qr))}function Vg(n,e){return Pe(AS(n,e,arguments.length>=2,!0))}function Ug(...n){let e=Vi(n);return Pe((t,r)=>{(e?Ws(n,t,e):Ws(n,t)).subscribe(r)})}function Yn(n,e){return Pe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Se(r,c=>{i?.unsubscribe();let u=0,d=o++;ht(n(c,d)).subscribe(i=Se(r,g=>r.next(e?e(c,g,d,u++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Bg(n){return Pe((e,t)=>{ht(n).subscribe(Se(t,()=>t.complete(),Qc)),!t.closed&&e.subscribe(t)})}function vt(n,e,t){let r=pe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Se(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):mn}var gT="https://g.co/ng/security#xss",re=class extends Error{code;constructor(e,t){super(Q_(e,t)),this.code=e}};function Q_(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var _T=Symbol("InputSignalNode#UNSET"),CF=oe(H({},vg),{transformFn:void 0,applyValueToInputSignal(n,e){Dd(n,e)}});function yT(n,e){let t=Object.create(CF);t.value=n,t.transformFn=e?.transform;function r(){if(Cd(t),t.value===_T)throw new re(-950,!1);return t.value}return r[pn]=t,r}function dl(n){return{toString:n}.toString()}var eh="__parameters__";function SF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function vT(n,e,t){return dl(()=>{let r=SF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let g=c.hasOwnProperty(eh)?c[eh]:Object.defineProperty(c,eh,{value:[]})[eh];for(;g.length<=d;)g.push(null);return(g[d]=g[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function ze(n){for(let e in n)if(n[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function TF(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function nn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(nn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function PS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var xF=ze({__forward_ref__:ze});function er(n){return n.__forward_ref__=er,n.toString=function(){return nn(this())},n}function tn(n){return wT(n)?n():n}function wT(n){return typeof n=="function"&&n.hasOwnProperty(xF)&&n.__forward_ref__===er}function ce(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Xi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Oh(n){return MS(n,ET)||MS(n,IT)}function bT(n){return Oh(n)!==null}function MS(n,e){return n.hasOwnProperty(e)?n[e]:null}function DF(n){let e=n&&(n[ET]||n[IT]);return e||null}function RS(n){return n&&(n.hasOwnProperty(OS)||n.hasOwnProperty(AF))?n[OS]:null}var ET=ze({\u0275prov:ze}),OS=ze({\u0275inj:ze}),IT=ze({ngInjectableDef:ze}),AF=ze({ngInjectorDef:ze}),ne=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ce({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function CT(n){return n&&!!n.\u0275providers}var PF=ze({\u0275cmp:ze}),MF=ze({\u0275dir:ze}),RF=ze({\u0275pipe:ze}),OF=ze({\u0275mod:ze}),lh=ze({\u0275fac:ze}),tl=ze({__NG_ELEMENT_ID__:ze}),NS=ze({__NG_ENV_ID__:ze});function ta(n){return typeof n=="string"?n:n==null?"":String(n)}function NF(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ta(n)}function kF(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new re(-200,n)}function Y_(n,e){throw new re(-201,!1)}var ve=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ve||{}),Xg;function ST(){return Xg}function Pn(n){let e=Xg;return Xg=n,e}function TT(n,e,t){let r=Oh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ve.Optional)return null;if(e!==void 0)return e;Y_(n,"Injector")}var FF={},nl=FF,e_="__NG_DI_FLAG__",uh="ngTempTokenPath",LF="ngTokenPath",VF=/\n/gm,UF="\u0275",kS="__source",Xs;function BF(){return Xs}function Hi(n){let e=Xs;return Xs=n,e}function jF(n,e=ve.Default){if(Xs===void 0)throw new re(-203,!1);return Xs===null?TT(n,void 0,e):Xs.get(n,e&ve.Optional?null:void 0,e)}function Ce(n,e=ve.Default){return(ST()||jF)(tn(n),e)}function K(n,e=ve.Default){return Ce(n,Nh(e))}function Nh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function t_(n){let e=[];for(let t=0;t<n.length;t++){let r=tn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=ve.Default;for(let s=0;s<r.length;s++){let a=r[s],c=$F(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Ce(i,o))}else e.push(Ce(r))}return e}function xT(n,e){return n[e_]=e,n.prototype[e_]=e,n}function $F(n){return n[e_]}function HF(n,e,t,r){let i=n[uh];throw e[kS]&&i.unshift(e[kS]),n.message=zF(`
`+n.message,i,t,r),n[LF]=i,n[uh]=null,n}function zF(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==UF?n.slice(2):n;let i=nn(e);if(Array.isArray(e))i=e.map(nn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):nn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(VF,`
  `)}`}var Ye=xT(vT("Optional"),8);var DT=xT(vT("SkipSelf"),4);function na(n,e){let t=n.hasOwnProperty(lh);return t?n[lh]:null}function qF(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function GF(n){return n.flat(Number.POSITIVE_INFINITY)}function Z_(n,e){n.forEach(t=>Array.isArray(t)?Z_(t,e):e(t))}function AT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function dh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function WF(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function KF(n,e,t){let r=hl(n,e);return r>=0?n[r|1]=t:(r=~r,WF(n,r,e,t)),r}function jg(n,e){let t=hl(n,e);if(t>=0)return n[t|1]}function hl(n,e){return QF(n,e,1)}function QF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ra={},Mn=[],ia=new ne(""),PT=new ne("",-1),MT=new ne(""),hh=class{get(e,t=nl){if(t===nl){let r=new Error(`NullInjectorError: No provider for ${nn(e)}!`);throw r.name="NullInjectorError",r}return t}};function RT(n,e){let t=n[OF]||null;if(!t&&e===!0)throw new Error(`Type ${nn(n)} does not have '\u0275mod' property.`);return t}function ko(n){return n[PF]||null}function OT(n){return n[MF]||null}function NT(n){return n[RF]||null}function kT(n){let e=ko(n)||OT(n)||NT(n);return e!==null?e.standalone:!1}function an(n){return{\u0275providers:n}}function YF(...n){return{\u0275providers:FT(!0,n),\u0275fromNgModule:!0}}function FT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Z_(e,s=>{let a=s;n_(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&LT(i,o),t}function LT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];J_(i,o=>{e(o,r)})}}function n_(n,e,t,r){if(n=tn(n),!n)return!1;let i=null,o=RS(n),s=!o&&ko(n);if(!o&&!s){let c=n.ngModule;if(o=RS(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)n_(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Z_(o.imports,d=>{n_(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&LT(u,e)}if(!a){let u=na(i)||(()=>new i);e({provide:i,useFactory:u,deps:Mn},i),e({provide:MT,useValue:i,multi:!0},i),e({provide:ia,useValue:()=>Ce(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;J_(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function J_(n,e){for(let t of n)CT(t)&&(t=t.\u0275providers),Array.isArray(t)?J_(t,e):e(t)}var ZF=ze({provide:String,useValue:ze});function VT(n){return n!==null&&typeof n=="object"&&ZF in n}function JF(n){return!!(n&&n.useExisting)}function XF(n){return!!(n&&n.useFactory)}function oa(n){return typeof n=="function"}function e2(n){return!!n.useClass}var kh=new ne(""),rh={},t2={},$g;function X_(){return $g===void 0&&($g=new hh),$g}var Rn=class{},rl=class extends Rn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,i_(e,s=>this.processProvider(s)),this.records.set(PT,Ys(void 0,this)),i.has("environment")&&this.records.set(Rn,Ys(void 0,this));let o=this.records.get(kh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(MT,Mn,ve.Self))}destroy(){Xc(this),this._destroyed=!0;let e=Ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ne(e)}}onDestroy(e){return Xc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Xc(this);let t=Hi(this),r=Pn(void 0),i;try{return e()}finally{Hi(t),Pn(r)}}get(e,t=nl,r=ve.Default){if(Xc(this),e.hasOwnProperty(NS))return e[NS](this);r=Nh(r);let i,o=Hi(this),s=Pn(void 0);try{if(!(r&ve.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=s2(e)&&Oh(e);u&&this.injectableDefInScope(u)?c=Ys(r_(e),rh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ve.Self?X_():this.parent;return t=r&ve.Optional&&t===nl?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[uh]=a[uh]||[]).unshift(nn(e)),o)throw a;return HF(a,e,"R3InjectorError",this.source)}else throw a}finally{Pn(s),Hi(o)}}resolveInjectorInitializers(){let e=Ne(null),t=Hi(this),r=Pn(void 0),i;try{let o=this.get(ia,Mn,ve.Self);for(let s of o)s()}finally{Hi(t),Pn(r),Ne(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(nn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=tn(e);let t=oa(e)?e:tn(e&&e.provide),r=r2(e);if(!oa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ys(void 0,rh,!0),i.factory=()=>t_(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ne(null);try{return t.value===rh&&(t.value=t2,t.value=t.factory()),typeof t.value=="object"&&t.value&&o2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ne(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=tn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function r_(n){let e=Oh(n),t=e!==null?e.factory:na(n);if(t!==null)return t;if(n instanceof ne)throw new re(204,!1);if(n instanceof Function)return n2(n);throw new re(204,!1)}function n2(n){if(n.length>0)throw new re(204,!1);let t=DF(n);return t!==null?()=>t.factory(n):()=>new n}function r2(n){if(VT(n))return Ys(void 0,n.useValue);{let e=UT(n);return Ys(e,rh)}}function UT(n,e,t){let r;if(oa(n)){let i=tn(n);return na(i)||r_(i)}else if(VT(n))r=()=>tn(n.useValue);else if(XF(n))r=()=>n.useFactory(...t_(n.deps||[]));else if(JF(n))r=()=>Ce(tn(n.useExisting));else{let i=tn(n&&(n.useClass||n.provide));if(i2(n))r=()=>new i(...t_(n.deps));else return na(i)||r_(i)}return r}function Xc(n){if(n.destroyed)throw new re(205,!1)}function Ys(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function i2(n){return!!n.deps}function o2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function s2(n){return typeof n=="function"||typeof n=="object"&&n instanceof ne}function i_(n,e){for(let t of n)Array.isArray(t)?i_(t,e):t&&CT(t)?i_(t.\u0275providers,e):e(t)}function tr(n,e){n instanceof rl&&Xc(n);let t,r=Hi(n),i=Pn(void 0);try{return e()}finally{Hi(r),Pn(i)}}function a2(){return ST()!==void 0||BF()!=null}function c2(n){return typeof n=="function"}var ii=0,ye=1,le=2,$t=3,Jn=4,nr=5,fh=6,ph=7,Xn=8,sa=9,Jr=10,ut=11,il=12,FS=13,ha=14,_r=15,Fo=16,Zs=17,Xr=18,Fh=19,BT=20,zi=21,Hg=22,mh=23,_n=24,ei=25,jT=1;var Lo=7,gh=8,aa=9,yn=10,_h=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(_h||{});function qi(n){return Array.isArray(n)&&typeof n[jT]=="object"}function oi(n){return Array.isArray(n)&&n[jT]===!0}function ey(n){return(n.flags&4)!==0}function Lh(n){return n.componentOffset>-1}function Vh(n){return(n.flags&1)===1}function Gi(n){return!!n.template}function o_(n){return(n[le]&512)!==0}var s_=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function $T(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var eo=(()=>{let n=()=>HT;return n.ngInherit=!0,n})();function HT(n){return n.type.prototype.ngOnChanges&&(n.setInput=u2),l2}function l2(){let n=qT(this),e=n?.current;if(e){let t=n.previous;if(t===ra)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function u2(n,e,t,r,i){let o=this.declaredInputs[r],s=qT(n)||d2(n,{previous:ra,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new s_(u&&u.currentValue,t,c===ra),$T(n,e,i,t)}var zT="__ngSimpleChanges__";function qT(n){return n[zT]||null}function d2(n,e){return n[zT]=e}var LS=null;var mr=function(n,e,t){LS?.(n,e,t)},h2="svg",f2="math";function yr(n){for(;Array.isArray(n);)n=n[ii];return n}function GT(n,e){return yr(e[n])}function On(n,e){return yr(e[n.index])}function WT(n,e){return n.data[e]}function to(n,e){let t=e[n];return qi(t)?t:t[ii]}function p2(n){return(n[le]&4)===4}function ty(n){return(n[le]&128)===128}function m2(n){return oi(n[$t])}function ca(n,e){return e==null?null:n[e]}function KT(n){n[Zs]=0}function ny(n){n[le]&1024||(n[le]|=1024,ty(n)&&Bh(n))}function g2(n,e){for(;n>0;)e=e[ha],n--;return e}function Uh(n){return!!(n[le]&9216||n[_n]?.dirty)}function a_(n){n[Jr].changeDetectionScheduler?.notify(9),n[le]&64&&(n[le]|=1024),Uh(n)&&Bh(n)}function Bh(n){n[Jr].changeDetectionScheduler?.notify(0);let e=Vo(n);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!ty(e)));)e=Vo(e)}function QT(n,e){if((n[le]&256)===256)throw new re(911,!1);n[zi]===null&&(n[zi]=[]),n[zi].push(e)}function _2(n,e){if(n[zi]===null)return;let t=n[zi].indexOf(e);t!==-1&&n[zi].splice(t,1)}function Vo(n){let e=n[$t];return oi(e)?e[$t]:e}var we={lFrame:ix(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var c_=!1;function y2(){return we.lFrame.elementDepthCount}function v2(){we.lFrame.elementDepthCount++}function w2(){we.lFrame.elementDepthCount--}function YT(){return we.bindingsEnabled}function b2(){return we.skipHydrationRootTNode!==null}function E2(n){return we.skipHydrationRootTNode===n}function I2(){we.skipHydrationRootTNode=null}function Te(){return we.lFrame.lView}function It(){return we.lFrame.tView}function ue(n){return we.lFrame.contextLView=n,n[Xn]}function de(n){return we.lFrame.contextLView=null,n}function rn(){let n=ZT();for(;n!==null&&n.type===64;)n=n.parent;return n}function ZT(){return we.lFrame.currentTNode}function C2(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function zo(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function ry(){return we.lFrame.isParent}function JT(){we.lFrame.isParent=!1}function XT(){return c_}function VS(n){let e=c_;return c_=n,e}function fl(){let n=we.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function S2(){return we.lFrame.bindingIndex}function T2(n){return we.lFrame.bindingIndex=n}function jh(){return we.lFrame.bindingIndex++}function ex(n){let e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function x2(){return we.lFrame.inI18n}function D2(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,l_(e)}function A2(){return we.lFrame.currentDirectiveIndex}function l_(n){we.lFrame.currentDirectiveIndex=n}function P2(n){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function tx(){return we.lFrame.currentQueryIndex}function iy(n){we.lFrame.currentQueryIndex=n}function M2(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[nr]:null}function nx(n,e,t){if(t&ve.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ve.Host);)if(i=M2(o),i===null||(o=o[ha],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=we.lFrame=rx();return r.currentTNode=e,r.lView=n,!0}function oy(n){let e=rx(),t=n[ye];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function rx(){let n=we.lFrame,e=n===null?null:n.child;return e===null?ix(n):e}function ix(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ox(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var sx=ox;function sy(){let n=ox();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function R2(n){return(we.lFrame.contextLView=g2(n,we.lFrame.contextLView))[Xn]}function qo(){return we.lFrame.selectedIndex}function Uo(n){we.lFrame.selectedIndex=n}function $h(){let n=we.lFrame;return WT(n.tView,n.selectedIndex)}function O2(){return we.lFrame.currentNamespace}var ax=!0;function Hh(){return ax}function zh(n){ax=n}function N2(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=HT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function qh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function ih(n,e,t){cx(n,e,3,t)}function oh(n,e,t,r){(n[le]&3)===t&&cx(n,e,t,r)}function zg(n,e){let t=n[le];(t&3)===e&&(t&=16383,t+=1,n[le]=t)}function cx(n,e,t,r){let i=r!==void 0?n[Zs]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Zs]+=65536),(a<o||o==-1)&&(k2(n,t,e,c),n[Zs]=(n[Zs]&4294901760)+c+2),c++}function US(n,e){mr(4,n,e);let t=Ne(null);try{e.call(n)}finally{Ne(t),mr(5,n,e)}}function k2(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[le]>>14<n[Zs]>>16&&(n[le]&3)===e&&(n[le]+=16384,US(a,o)):US(a,o)}var ea=-1,Bo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function F2(n){return n instanceof Bo}function L2(n){return(n.flags&8)!==0}function V2(n){return(n.flags&16)!==0}function u_(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];B2(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function U2(n){return n===3||n===4||n===6}function B2(n){return n.charCodeAt(0)===64}function ol(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?BS(n,t,i,null,e[++r]):BS(n,t,i,null,null))}}return n}function BS(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var qg={},d_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Nh(r);let i=this.injector.get(e,qg,r);return i!==qg||t===qg?i:this.parentInjector.get(e,t,r)}};function lx(n){return n!==ea}function yh(n){return n&32767}function j2(n){return n>>16}function vh(n,e){let t=j2(n),r=e;for(;t>0;)r=r[ha],t--;return r}var h_=!0;function jS(n){let e=h_;return h_=n,e}var $2=256,ux=$2-1,dx=5,H2=0,gr={};function z2(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(tl)&&(r=t[tl]),r==null&&(r=t[tl]=H2++);let i=r&ux,o=1<<i;e.data[n+(i>>dx)]|=o}function wh(n,e){let t=hx(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,Gg(r.data,n),Gg(e,null),Gg(r.blueprint,null));let i=ay(n,e),o=n.injectorIndex;if(lx(i)){let s=yh(i),a=vh(i,e),c=a[ye].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Gg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function hx(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ay(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=_x(i),r===null)return ea;if(t++,i=i[ha],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ea}function f_(n,e,t){z2(n,e,t)}function fx(n,e,t){if(t&ve.Optional||n!==void 0)return n;Y_(e,"NodeInjector")}function px(n,e,t,r){if(t&ve.Optional&&r===void 0&&(r=null),!(t&(ve.Self|ve.Host))){let i=n[sa],o=Pn(void 0);try{return i?i.get(e,r,t&ve.Optional):TT(e,r,t&ve.Optional)}finally{Pn(o)}}return fx(r,e,t)}function mx(n,e,t,r=ve.Default,i){if(n!==null){if(e[le]&2048&&!(r&ve.Self)){let s=K2(n,e,t,r,gr);if(s!==gr)return s}let o=gx(n,e,t,r,gr);if(o!==gr)return o}return px(e,t,r,i)}function gx(n,e,t,r,i){let o=G2(t);if(typeof o=="function"){if(!nx(e,n,r))return r&ve.Host?fx(i,t,r):px(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ve.Optional))Y_(t);else return s}finally{sx()}}else if(typeof o=="number"){let s=null,a=hx(n,e),c=ea,u=r&ve.Host?e[_r][nr]:null;for((a===-1||r&ve.SkipSelf)&&(c=a===-1?ay(n,e):e[a+8],c===ea||!HS(r,!1)?a=-1:(s=e[ye],a=yh(c),e=vh(c,e)));a!==-1;){let d=e[ye];if($S(o,a,d.data)){let g=q2(a,e,t,s,r,u);if(g!==gr)return g}c=e[a+8],c!==ea&&HS(r,e[ye].data[a+8]===u)&&$S(o,a,e)?(s=d,a=yh(c),e=vh(c,e)):a=-1}}return i}function q2(n,e,t,r,i,o){let s=e[ye],a=s.data[n+8],c=r==null?Lh(a)&&h_:r!=s&&(a.type&3)!==0,u=i&ve.Host&&o===a,d=sh(a,s,t,c,u);return d!==null?jo(e,s,d,a):gr}function sh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,g=r?a:a+d,y=i?a+d:u;for(let b=g;b<y;b++){let C=s[b];if(b<c&&t===C||b>=c&&C.type===t)return b}if(i){let b=s[c];if(b&&Gi(b)&&b.type===t)return c}return null}function jo(n,e,t,r){let i=n[t],o=e.data;if(F2(i)){let s=i;s.resolving&&kF(NF(o[t]));let a=jS(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Pn(s.injectImpl):null,d=nx(n,r,ve.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&N2(t,o[t],e)}finally{u!==null&&Pn(u),jS(a),s.resolving=!1,sx()}}return i}function G2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(tl)?n[tl]:void 0;return typeof e=="number"?e>=0?e&ux:W2:e}function $S(n,e,t){let r=1<<n;return!!(t[e+(n>>dx)]&r)}function HS(n,e){return!(n&ve.Self)&&!(n&ve.Host&&e)}var No=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mx(this._tNode,this._lView,e,Nh(r),t)}};function W2(){return new No(rn(),Te())}function si(n){return dl(()=>{let e=n.prototype.constructor,t=e[lh]||p_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[lh]||p_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function p_(n){return wT(n)?()=>{let e=p_(tn(n));return e&&e()}:na(n)}function K2(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[le]&2048&&!(s[le]&512);){let a=gx(o,s,t,r|ve.Self,gr);if(a!==gr)return a;let c=o.parent;if(!c){let u=s[BT];if(u){let d=u.get(t,gr,r);if(d!==gr)return d}c=_x(s),s=s[ha]}o=c}return i}function _x(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[nr]:null}function zS(n,e=null,t=null,r){let i=yx(n,e,t,r);return i.resolveInjectorInitializers(),i}function yx(n,e=null,t=null,r,i=new Set){let o=[t||Mn,YF(n)];return r=r||(typeof n=="object"?void 0:nn(n)),new rl(o,e||X_(),r||null,i)}var bt=class n{static THROW_IF_NOT_FOUND=nl;static NULL=new hh;static create(e,t){if(Array.isArray(e))return zS({name:""},t,e,"");{let r=e.name??"";return zS({name:r},e.parent,e.providers,r)}}static \u0275prov=ce({token:n,providedIn:"any",factory:()=>Ce(PT)});static __NG_ELEMENT_ID__=-1};var Q2=new ne("");Q2.__NG_ELEMENT_ID__=n=>{let e=rn();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(n&ve.Optional)return null;throw new re(204,!1)};var vx=!1,wx=(()=>{class n{static __NG_ELEMENT_ID__=Y2;static __NG_ENV_ID__=t=>t}return n})(),m_=class extends wx{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return QT(this._lView,e),()=>_2(this._lView,e)}};function Y2(){return new m_(Te())}var sl=class{},Gh=new ne("",{providedIn:"root",factory:()=>!1});var bx=new ne(""),Ex=new ne(""),fa=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Rt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})();var g_=class extends _t{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,a2()&&(this.destroyRef=K(wx,{optional:!0})??void 0,this.pendingTasks=K(fa,{optional:!0})??void 0)}emit(e){let t=Ne(null);try{super.next(e)}finally{Ne(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof st&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},wt=g_;function bh(...n){}function Ix(n){let e,t;function r(){n=bh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function qS(n){return queueMicrotask(()=>n()),()=>{n=bh}}var cy="isAngularZone",Eh=cy+"_ID",Z2=0,Ve=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new wt(!1);onMicrotaskEmpty=new wt(!1);onStable=new wt(!1);onError=new wt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=vx}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,eL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(cy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new re(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,J2,bh,bh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},J2={};function ly(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function X2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Ix(()=>{n.callbackScheduled=!1,__(n),n.isCheckStableRunning=!0,ly(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),__(n)}function eL(n){let e=()=>{X2(n)},t=Z2++;n._inner=n._inner.fork({name:"angular",properties:{[cy]:!0,[Eh]:t,[Eh+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(tL(c))return r.invokeTask(o,s,a,c);try{return GS(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),WS(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return GS(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!nL(c)&&e(),WS(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,__(n),ly(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function __(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function GS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function WS(n){n._nesting--,ly(n)}var y_=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new wt;onMicrotaskEmpty=new wt;onStable=new wt;onError=new wt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function tL(n){return Cx(n,"__ignore_ng_zone__")}function nL(n){return Cx(n,"__scheduler_tick__")}function Cx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Wi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},rL=new ne("",{providedIn:"root",factory:()=>{let n=K(Ve),e=K(Wi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function KS(n,e){return yT(n,e)}function iL(n){return yT(_T,n)}var Sx=(KS.required=iL,KS);function oL(){return pa(rn(),Te())}function pa(n,e){return new vn(On(n,e))}var vn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=oL}return n})();function sL(n){return n instanceof vn?n.nativeElement:n}function aL(){return this._results[Symbol.iterator]()}var v_=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new _t}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=GF(e);(this._changesDetected=!qF(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=aL};function Tx(n){return(n.flags&128)===128}var xx=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(xx||{}),Dx=new Map,cL=0;function lL(){return cL++}function uL(n){Dx.set(n[Fh],n)}function w_(n){Dx.delete(n[Fh])}var QS="__ngContext__";function Ki(n,e){qi(e)?(n[QS]=e[Fh],uL(e)):n[QS]=e}function Ax(n){return Mx(n[il])}function Px(n){return Mx(n[Jn])}function Mx(n){for(;n!==null&&!oi(n);)n=n[Jn];return n}var b_;function Rx(n){b_=n}function dL(){if(b_!==void 0)return b_;if(typeof document<"u")return document;throw new re(210,!1)}var uy=new ne("",{providedIn:"root",factory:()=>hL}),hL="ng",dy=new ne(""),no=new ne("",{providedIn:"platform",factory:()=>"unknown"});var hy=new ne("",{providedIn:"root",factory:()=>dL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fL="h",pL="b";var Ox=!1,mL=new ne("",{providedIn:"root",factory:()=>Ox});var Nx=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Nx||{}),kx=new ne(""),YS=new Set;function pl(n){YS.has(n)||(YS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var gL=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})();var _L=()=>null;function fy(n,e,t=!1){return _L(n,e,t)}var vr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(vr||{});var Ih=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gT})`}};function Wh(n){return n instanceof Ih?n.changingThisBreaksApplicationSecurity:n}function Fx(n,e){let t=yL(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gT})`)}return t===e}function yL(n){return n instanceof Ih&&n.getTypeName()||null}var vL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Lx(n){return n=String(n),n.match(vL)?n:"unsafe:"+n}var py=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(py||{});function et(n){let e=wL();return e?e.sanitize(py.URL,n)||"":Fx(n,"URL")?Wh(n):Lx(ta(n))}function wL(){let n=Te();return n&&n[Jr].sanitizer}var bL=/^>|^->|<!--|-->|--!>|<!-$/g,EL=/(<|>)/g,IL="\u200B$1\u200B";function CL(n){return n.replace(bL,e=>e.replace(EL,IL))}function Vx(n){return n instanceof Function?n():n}var Qi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Qi||{}),ti=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ti||{}),SL;function my(n,e){return SL(n,e)}function Js(n,e,t,r,i){if(r!=null){let o,s=!1;oi(r)?o=r:qi(r)&&(s=!0,r=r[ii]);let a=yr(r);n===0&&t!==null?i==null?Hx(e,t,a):Ch(e,t,a,i||null,!0):n===1&&t!==null?Ch(e,t,a,i||null,!0):n===2?jL(e,a,s):n===3&&e.destroyNode(a),o!=null&&HL(e,n,o,t,i)}}function TL(n,e){return n.createText(e)}function xL(n,e,t){n.setValue(e,t)}function DL(n,e){return n.createComment(CL(e))}function Ux(n,e,t){return n.createElement(e,t)}function AL(n,e){Bx(n,e),e[ii]=null,e[nr]=null}function PL(n,e,t,r,i,o){r[ii]=i,r[nr]=e,Qh(n,r,t,1,i,o)}function Bx(n,e){e[Jr].changeDetectionScheduler?.notify(10),Qh(n,e,e[ut],2,null,null)}function ML(n){let e=n[il];if(!e)return Wg(n[ye],n);for(;e;){let t=null;if(qi(e))t=e[il];else{let r=e[yn];r&&(t=r)}if(!t){for(;e&&!e[Jn]&&e!==n;)qi(e)&&Wg(e[ye],e),e=e[$t];e===null&&(e=n),qi(e)&&Wg(e[ye],e),t=e&&e[Jn]}e=t}}function RL(n,e,t,r){let i=yn+r,o=t.length;r>0&&(t[i-1][Jn]=e),r<o-yn?(e[Jn]=t[i],AT(t,yn+r,e)):(t.push(e),e[Jn]=null),e[$t]=t;let s=e[Fo];s!==null&&t!==s&&jx(s,e);let a=e[Xr];a!==null&&a.insertView(n),a_(e),e[le]|=128}function jx(n,e){let t=n[aa],r=e[$t];if(qi(r))n[le]|=_h.HasTransplantedViews;else{let i=r[$t][_r];e[_r]!==i&&(n[le]|=_h.HasTransplantedViews)}t===null?n[aa]=[e]:t.push(e)}function gy(n,e){let t=n[aa],r=t.indexOf(e);t.splice(r,1)}function E_(n,e){if(n.length<=yn)return;let t=yn+e,r=n[t];if(r){let i=r[Fo];i!==null&&i!==n&&gy(i,r),e>0&&(n[t-1][Jn]=r[Jn]);let o=dh(n,yn+e);AL(r[ye],r);let s=o[Xr];s!==null&&s.detachView(o[ye]),r[$t]=null,r[Jn]=null,r[le]&=-129}return r}function $x(n,e){if(!(e[le]&256)){let t=e[ut];t.destroyNode&&Qh(n,e,t,3,null,null),ML(e)}}function Wg(n,e){if(e[le]&256)return;let t=Ne(null);try{e[le]&=-129,e[le]|=256,e[_n]&&yg(e[_n]),NL(n,e),OL(n,e),e[ye].type===1&&e[ut].destroy();let r=e[Fo];if(r!==null&&oi(e[$t])){r!==e[$t]&&gy(r,e);let i=e[Xr];i!==null&&i.detachView(n)}w_(e)}finally{Ne(t)}}function OL(n,e){let t=n.cleanup,r=e[ph];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ph]=null);let i=e[zi];if(i!==null){e[zi]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[mh];if(o!==null){e[mh]=null;for(let s of o)s.destroy()}}function NL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Bo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];mr(4,a,c);try{c.call(a)}finally{mr(5,a,c)}}else{mr(4,i,o);try{o.call(i)}finally{mr(5,i,o)}}}}}function kL(n,e,t){return FL(n,e.parent,t)}function FL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ii];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===vr.None||o===vr.Emulated)return null}return On(r,t)}}function Ch(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Hx(n,e,t){n.appendChild(e,t)}function ZS(n,e,t,r,i){r!==null?Ch(n,e,t,r,i):Hx(n,e,t)}function zx(n,e){return n.parentNode(e)}function LL(n,e){return n.nextSibling(e)}function VL(n,e,t){return BL(n,e,t)}function UL(n,e,t){return n.type&40?On(n,t):null}var BL=UL,JS;function Kh(n,e,t,r){let i=kL(n,r,e),o=e[ut],s=r.parent||e[nr],a=VL(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)ZS(o,i,t[c],a,!1);else ZS(o,i,t,a,!1);JS!==void 0&&JS(o,r,e,t,i)}function el(n,e){if(e!==null){let t=e.type;if(t&3)return On(e,n);if(t&4)return I_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return el(n,r);{let i=n[e.index];return oi(i)?I_(-1,i):yr(i)}}else{if(t&128)return el(n,e.next);if(t&32)return my(e,n)()||yr(n[e.index]);{let r=qx(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Vo(n[_r]);return el(i,r)}else return el(n,e.next)}}}return null}function qx(n,e){if(e!==null){let r=n[_r][nr],i=e.projection;return r.projection[i]}return null}function I_(n,e){let t=yn+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return el(r,i)}return e[Lo]}function jL(n,e,t){n.removeChild(null,e,t)}function _y(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Ki(yr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)_y(n,e,t.child,r,i,o,!1),Js(e,n,i,a,o);else if(c&32){let u=my(t,r),d;for(;d=u();)Js(e,n,i,d,o);Js(e,n,i,a,o)}else c&16?$L(n,e,r,t,i,o):Js(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Qh(n,e,t,r,i,o){_y(t,r,n.firstChild,e,i,o,!1)}function $L(n,e,t,r,i,o){let s=t[_r],c=s[nr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Js(e,n,i,d,o)}else{let u=c,d=s[$t];Tx(r)&&(u.flags|=128),_y(n,e,u,d,i,o,!0)}}function HL(n,e,t,r,i){let o=t[Lo],s=yr(t);o!==s&&Js(e,n,r,o,i);for(let a=yn;a<t.length;a++){let c=t[a];Qh(c[ye],c,n,e,r,o)}}function zL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ti.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ti.Important),n.setStyle(t,r,i,o))}}function qL(n,e,t){n.setAttribute(e,"style",t)}function Gx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Wx(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&u_(n,e,r),i!==null&&Gx(n,e,i),o!==null&&qL(n,e,o)}function GL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Kx="ng-template";function WL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&GL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(yy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function yy(n){return n.type===4&&n.value!==Kx}function KL(n,e,t){let r=n.type===4&&!t?Kx:n.value;return e===r}function QL(n,e,t){let r=4,i=n.attrs,o=i!==null?JL(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Zn(r)&&!Zn(c))return!1;if(s&&Zn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!KL(n,c,t)||c===""&&e.length===1){if(Zn(r))return!1;s=!0}}else if(r&8){if(i===null||!WL(n,i,c,t)){if(Zn(r))return!1;s=!0}}else{let u=e[++a],d=YL(c,i,yy(n),t);if(d===-1){if(Zn(r))return!1;s=!0;continue}if(u!==""){let g;if(d>o?g="":g=i[d+1].toLowerCase(),r&2&&u!==g){if(Zn(r))return!1;s=!0}}}}return Zn(r)||s}function Zn(n){return(n&1)===0}function YL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return XL(e,n)}function ZL(n,e,t=!1){for(let r=0;r<e.length;r++)if(QL(n,e[r],t))return!0;return!1}function JL(n){for(let e=0;e<n.length;e++){let t=n[e];if(U2(t))return e}return n.length}function XL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function XS(n,e){return n?":not("+e.trim()+")":e}function eV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zn(s)&&(e+=XS(o,i),i=""),r=s,o=o||!Zn(r);t++}return i!==""&&(e+=XS(o,i)),e}function tV(n){return n.map(eV).join(",")}function nV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Zn(i))break;i=o}r++}return{attrs:e,classes:t}}var rr={};function v(n=1){Qx(It(),Te(),qo()+n,!1)}function Qx(n,e,t,r){if(!r)if((e[le]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ih(e,o,t)}else{let o=n.preOrderHooks;o!==null&&oh(e,o,0,t)}Uo(t)}function z(n,e=ve.Default){let t=Te();if(t===null)return Ce(n,e);let r=rn();return mx(r,t,tn(n),e)}function Yx(n,e,t,r,i,o){let s=Ne(null);try{let a=null;i&Qi.SignalBased&&(a=e[r][pn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Qi.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):$T(e,a,r,o)}finally{Ne(s)}}function rV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Uo(~i);else{let o=i,s=t[++r],a=t[++r];D2(s,o);let c=e[o];a(2,c)}}}finally{Uo(-1)}}function Yh(n,e,t,r,i,o,s,a,c,u,d){let g=e.blueprint.slice();return g[ii]=i,g[le]=r|4|128|8|64|1024,(u!==null||n&&n[le]&2048)&&(g[le]|=2048),KT(g),g[$t]=g[ha]=n,g[Xn]=t,g[Jr]=s||n&&n[Jr],g[ut]=a||n&&n[ut],g[sa]=c||n&&n[sa]||null,g[nr]=o,g[Fh]=lL(),g[fh]=d,g[BT]=u,g[_r]=e.type==2?n[_r]:g,g}function ml(n,e,t,r,i){let o=n.data[e];if(o===null)o=iV(n,e,t,r,i),x2()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=C2();o.injectorIndex=s===null?-1:s.injectorIndex}return zo(o,!0),o}function iV(n,e,t,r,i){let o=ZT(),s=ry(),a=s?o:o&&o.parent,c=n.data[e]=uV(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Zx(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Jx(n,e,t,r,i){let o=qo(),s=r&2;try{Uo(-1),s&&e.length>ei&&Qx(n,e,ei,!1),mr(s?2:0,i),t(r,i)}finally{Uo(o),mr(s?3:1,i)}}function vy(n,e,t){if(ey(e)){let r=Ne(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ne(r)}}}function wy(n,e,t){YT()&&(gV(n,e,t,On(t,e)),(t.flags&64)===64&&tD(n,e,t))}function by(n,e,t=On){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Xx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ey(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ey(n,e,t,r,i,o,s,a,c,u,d){let g=ei+r,y=g+i,b=oV(g,y),C=typeof u=="function"?u():u;return b[ye]={type:n,blueprint:b,template:t,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:C,incompleteFirstPass:!1,ssrId:d}}function oV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:rr);return t}function sV(n,e,t,r){let o=r.get(mL,Ox)||t===vr.ShadowDom,s=n.selectRootElement(e,o);return aV(s),s}function aV(n){cV(n)}var cV=()=>null;function lV(n,e,t,r){let i=oD(e);i.push(t),n.firstCreatePass&&sD(n).push(r,i.length-1)}function uV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return b2()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function eT(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Qi.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?tT(r,t,u,a,c):tT(r,t,u,a)}return r}function tT(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function dV(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,u=null;for(let d=r;d<i;d++){let g=o[d],y=t?t.get(g):null,b=y?y.inputs:null,C=y?y.outputs:null;c=eT(0,g.inputs,d,c,b),u=eT(1,g.outputs,d,u,C);let O=c!==null&&s!==null&&!yy(e)?xV(c,d,s):null;a.push(O)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function hV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Iy(n,e,t,r,i,o,s,a){let c=On(e,t),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(Sy(n,t,d,r,i),Lh(e)&&fV(t,e.index)):e.type&3?(r=hV(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function fV(n,e){let t=to(e,n);t[le]&16||(t[le]|=64)}function Cy(n,e,t,r){if(YT()){let i=r===null?null:{"":-1},o=yV(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&eD(n,e,t,s,i,a),i&&vV(t,r,i)}t.mergedAttrs=ol(t.mergedAttrs,t.attrs)}function eD(n,e,t,r,i,o){for(let u=0;u<r.length;u++)f_(wh(t,e),n,r[u].type);bV(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=Zx(n,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];t.mergedAttrs=ol(t.mergedAttrs,d.hostAttrs),EV(n,t,e,c,d),wV(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let g=d.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}dV(n,t,o)}function pV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;mV(s)!=a&&s.push(a),s.push(t,r,o)}}function mV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function gV(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Lh(t)&&IV(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||wh(t,e),Ki(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],u=jo(e,n,a,t);if(Ki(u,e),s!==null&&TV(e,a-i,u,c,t,s),Gi(c)){let d=to(t.index,e);d[Xn]=jo(e,n,a,t)}}}function tD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=A2();try{Uo(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];l_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&_V(c,u)}}finally{Uo(-1),l_(s)}}function _V(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function yV(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(ZL(e,s.selectors,!1))if(r||(r=[]),Gi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;C_(n,e,c)}else r.unshift(s),C_(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function C_(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function vV(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}}function wV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Gi(e)&&(t[""]=n)}}function bV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function EV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=na(i.type,!0)),s=new Bo(o,Gi(i),z);n.blueprint[r]=s,t[r]=s,pV(n,e,r,Zx(n,t,i.hostVars,rr),i)}function nD(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function IV(n,e,t){let r=On(e,n),i=Xx(t),o=n[Jr].rendererFactory,s=Zh(n,Yh(n,i,null,nD(t),r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=s}function CV(n,e,t,r,i,o){let s=On(n,e);SV(e[ut],s,o,n.value,t,r,i)}function SV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?ta(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function TV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],d=s[a++],g=s[a++];Yx(r,t,c,u,d,g)}}function xV(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function rD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function iD(n,e){let t=n.contentQueries;if(t!==null){let r=Ne(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];iy(o),a.contentQueries(2,e[s],s)}}}finally{Ne(r)}}}function Zh(n,e){return n[il]?n[FS][Jn]=e:n[il]=e,n[FS]=e,e}function S_(n,e,t){iy(0);let r=Ne(null);try{e(n,t)}finally{Ne(r)}}function oD(n){return n[ph]??=[]}function sD(n){return n.cleanup??=[]}function aD(n,e){let t=n[sa],r=t?t.get(Wi,null):null;r&&r.handleError(e)}function Sy(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],u=e[s],d=n.data[s];Yx(d,u,r,a,c,i)}}function cD(n,e,t){let r=GT(e,n);xL(n[ut],r,t)}function DV(n,e){let t=to(e,n),r=t[ye];AV(r,t);let i=t[ii];i!==null&&t[fh]===null&&(t[fh]=fy(i,t[sa])),Ty(r,t,t[Xn])}function AV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ty(n,e,t){oy(e);try{let r=n.viewQuery;r!==null&&S_(1,r,t);let i=n.template;i!==null&&Jx(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Xr]?.finishViewCreation(n),n.staticContentQueries&&iD(n,e),n.staticViewQueries&&S_(2,n.viewQuery,t);let o=n.components;o!==null&&PV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[le]&=-5,sy()}}function PV(n,e){for(let t=0;t<e.length;t++)DV(n,e[t])}function MV(n,e,t,r){let i=Ne(null);try{let o=e.tView,a=n[le]&4096?4096:16,c=Yh(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Fo]=u;let d=n[Xr];return d!==null&&(c[Xr]=d.createEmbeddedView(o)),Ty(o,c,t),c}finally{Ne(i)}}function nT(n,e){return!e||e.firstChild===null||Tx(n)}function RV(n,e,t,r=!0){let i=e[ye];if(RL(i,e,n,t),r){let s=I_(t,n),a=e[ut],c=zx(a,n[Lo]);c!==null&&PL(i,n[nr],a,e,c,s)}let o=e[fh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Sh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(yr(o)),oi(o)&&OV(o,r);let s=t.type;if(s&8)Sh(n,e,t.child,r);else if(s&32){let a=my(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=qx(e,t);if(Array.isArray(a))r.push(...a);else{let c=Vo(e[_r]);Sh(c[ye],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function OV(n,e){for(let t=yn;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&Sh(r[ye],r,i,e)}n[Lo]!==n[ii]&&e.push(n[Lo])}var lD=[];function NV(n){return n[_n]??kV(n)}function kV(n){let e=lD.pop()??Object.create(LV);return e.lView=n,e}function FV(n){n.lView[_n]!==n&&(n.lView=null,lD.push(n))}var LV=oe(H({},Kc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Bh(n.lView)},consumerOnSignalRead(){this.lView[_n]=this}});function VV(n){let e=n[_n]??Object.create(UV);return e.lView=n,e}var UV=oe(H({},Kc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Vo(n.lView);for(;e&&!uD(e[ye]);)e=Vo(e);e&&ny(e)},consumerOnSignalRead(){this.lView[_n]=this}});function uD(n){return n.type!==2}function dD(n){if(n[mh]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[mh])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[le]&8192)}}var BV=100;function hD(n,e=!0,t=0){let i=n[Jr].rendererFactory,o=!1;o||i.begin?.();try{jV(n,t)}catch(s){throw e&&aD(n,s),s}finally{o||i.end?.()}}function jV(n,e){let t=XT();try{VS(!0),T_(n,e);let r=0;for(;Uh(n);){if(r===BV)throw new re(103,!1);r++,T_(n,1)}}finally{VS(t)}}function $V(n,e,t,r){let i=e[le];if((i&256)===256)return;let o=!1,s=!1;oy(e);let a=!0,c=null,u=null;o||(uD(n)?(u=NV(e),c=Sd(u)):KC()===null?(a=!1,u=VV(e),c=Sd(u)):e[_n]&&(yg(e[_n]),e[_n]=null));try{KT(e),T2(n.bindingStartIndex),t!==null&&Jx(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let b=n.preOrderCheckHooks;b!==null&&ih(e,b,null)}else{let b=n.preOrderHooks;b!==null&&oh(e,b,0,null),zg(e,0)}if(s||HV(e),dD(e),fD(e,0),n.contentQueries!==null&&iD(n,e),!o)if(d){let b=n.contentCheckHooks;b!==null&&ih(e,b)}else{let b=n.contentHooks;b!==null&&oh(e,b,1),zg(e,1)}rV(n,e);let g=n.components;g!==null&&mD(e,g,0);let y=n.viewQuery;if(y!==null&&S_(2,y,r),!o)if(d){let b=n.viewCheckHooks;b!==null&&ih(e,b)}else{let b=n.viewHooks;b!==null&&oh(e,b,2),zg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Hg]){for(let b of e[Hg])b();e[Hg]=null}o||(e[le]&=-73)}catch(d){throw o||Bh(e),d}finally{u!==null&&(gg(u,c),a&&FV(u)),sy()}}function fD(n,e){for(let t=Ax(n);t!==null;t=Px(t))for(let r=yn;r<t.length;r++){let i=t[r];pD(i,e)}}function HV(n){for(let e=Ax(n);e!==null;e=Px(e)){if(!(e[le]&_h.HasTransplantedViews))continue;let t=e[aa];for(let r=0;r<t.length;r++){let i=t[r];ny(i)}}}function zV(n,e,t){let r=to(e,n);pD(r,t)}function pD(n,e){ty(n)&&T_(n,e)}function T_(n,e){let r=n[ye],i=n[le],o=n[_n],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&_g(o)),s||=!1,o&&(o.dirty=!1),n[le]&=-9217,s)$V(r,n,r.template,n[Xn]);else if(i&8192){dD(n),fD(n,1);let a=r.components;a!==null&&mD(n,a,1)}}function mD(n,e,t){for(let r=0;r<e.length;r++)zV(n,e[r],t)}function xy(n,e){let t=XT()?64:1088;for(n[Jr].changeDetectionScheduler?.notify(e);n;){n[le]|=t;let r=Vo(n);if(o_(n)&&!r)return n;n=r}return null}var $o=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[ye];return Sh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Xn]}get dirty(){return!!(this._lView[le]&9280)||!!this._lView[_n]?.dirty}set context(e){this._lView[Xn]=e}get destroyed(){return(this._lView[le]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[$t];if(oi(e)){let t=e[gh],r=t?t.indexOf(this):-1;r>-1&&(E_(e,r),dh(t,r))}this._attachedToViewContainer=!1}$x(this._lView[ye],this._lView)}onDestroy(e){QT(this._lView,e)}markForCheck(){xy(this._cdRefInjectingView||this._lView,4)}markForRefresh(){ny(this._cdRefInjectingView||this._lView)}detach(){this._lView[le]&=-129}reattach(){a_(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,hD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=o_(this._lView),t=this._lView[Fo];t!==null&&!e&&gy(t,this._lView),Bx(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let t=o_(this._lView),r=this._lView[Fo];r!==null&&!t&&jx(r,this._lView),a_(this._lView)}},Yi=(()=>{class n{static __NG_ELEMENT_ID__=WV}return n})(),qV=Yi,GV=class extends qV{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=MV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new $o(i)}};function WV(){return Dy(rn(),Te())}function Dy(n,e){return n.type&4?new GV(e,n,pa(n,e)):null}var LX=new RegExp(`^(\\d+)*(${pL}|${fL})*(.*)`);var KV=()=>null;function rT(n,e){return KV(n,e)}var x_=class{},Th=class{},D_=class{resolveComponentFactory(e){throw Error(`No component factory found for ${nn(e)}.`)}},la=class{static NULL=new D_},ua=class{},ai=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>QV()}return n})();function QV(){let n=Te(),e=rn(),t=to(e.index,n);return(qi(t)?t:n)[ut]}var YV=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>null})}return n})();function xh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=PS(i,a);else if(o==2){let c=a,u=e[++s];r=PS(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Dh=class extends la{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ko(e);return new al(t,this.ngModule)}};function iT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Qi.None;e?t.push({propName:s,templateName:r,isSignal:(a&Qi.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function ZV(n){let e=n.toLowerCase();return e==="svg"?h2:e==="math"?f2:null}var al=class extends Th{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,r=iT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return iT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=tV(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ne(null);try{i=i||this.ngModule;let s=i instanceof Rn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new d_(e,s):e,c=a.get(ua,null);if(c===null)throw new re(407,!1);let u=a.get(YV,null),d=a.get(sl,null),g={rendererFactory:c,sanitizer:u,changeDetectionScheduler:d},y=c.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",C=r?sV(y,r,this.componentDef.encapsulation,a):Ux(y,b,ZV(b)),O=512;this.componentDef.signals?O|=4096:this.componentDef.onPush||(O|=16);let R=null;C!==null&&(R=fy(C,a,!0));let U=Ey(0,null,null,1,0,null,null,null,null,null,null),j=Yh(null,U,null,O,null,null,g,y,a,null,R);oy(j);let V,X,_e=null;try{let te=this.componentDef,x,I=null;te.findHostDirectiveDefs?(x=[],I=new Map,te.findHostDirectiveDefs(te,x,I),x.push(te)):x=[te];let S=JV(j,C);_e=XV(S,C,te,x,j,g,y),X=WT(U,ei),C&&nU(y,te,C,r),t!==void 0&&rU(X,this.ngContentSelectors,t),V=tU(_e,te,x,I,j,[iU]),Ty(U,j,null)}catch(te){throw _e!==null&&w_(_e),w_(j),te}finally{sy()}return new A_(this.componentType,V,pa(X,j),j,X)}finally{Ne(o)}}},A_=class extends x_{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new $o(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Sy(o[ye],o,i,e,t),this.previousInputValues.set(e,t);let s=to(this._tNode.index,o);xy(s,1)}}get injector(){return new No(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function JV(n,e){let t=n[ye],r=ei;return n[r]=e,ml(t,r,2,"#host",null)}function XV(n,e,t,r,i,o,s){let a=i[ye];eU(r,n,e,s);let c=null;e!==null&&(c=fy(e,i[sa]));let u=o.rendererFactory.createRenderer(e,t),d=Yh(i,Xx(t),null,nD(t),i[n.index],n,o,u,null,null,c);return a.firstCreatePass&&C_(a,n,r.length-1),Zh(i,d),i[n.index]=d}function eU(n,e,t,r){for(let i of n)e.mergedAttrs=ol(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(xh(e,e.mergedAttrs,!0),t!==null&&Wx(r,t,e))}function tU(n,e,t,r,i,o){let s=rn(),a=i[ye],c=On(s,i);eD(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let g=s.directiveStart+d,y=jo(i,a,g,s);Ki(y,i)}tD(a,i,s),c&&Ki(c,i);let u=jo(i,a,s.directiveStart+s.componentOffset,s);if(n[Xn]=i[Xn]=u,o!==null)for(let d of o)d(u,e);return vy(a,s,i),u}function nU(n,e,t,r){if(r)u_(n,t,["ng-version","19.0.5"]);else{let{attrs:i,classes:o}=nV(e.selectors[0]);i&&u_(n,t,i),o&&o.length>0&&Gx(n,t,o.join(" "))}}function rU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}function iU(){let n=rn();qh(Te()[ye],n)}var ci=(()=>{class n{static __NG_ELEMENT_ID__=oU}return n})();function oU(){let n=rn();return _D(n,Te())}var sU=ci,gD=class extends sU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return pa(this._hostTNode,this._hostLView)}get injector(){return new No(this._hostTNode,this._hostLView)}get parentInjector(){let e=ay(this._hostTNode,this._hostLView);if(lx(e)){let t=vh(e,this._hostLView),r=yh(e),i=t[ye].data[r+8];return new No(i,t)}else return new No(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=oT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-yn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=rT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,nT(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!c2(e),a;if(s)a=t;else{let C=t||{};a=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}let c=s?e:new al(ko(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let O=(s?u:this.parentInjector).get(Rn,null);O&&(o=O)}let d=ko(c.componentType??{}),g=rT(this._lContainer,d?.id??null),y=g?.firstChild??null,b=c.create(u,i,y,o);return this.insertImpl(b.hostView,a,nT(this._hostTNode,g)),b}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(m2(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[$t],u=new gD(c,c[nr],c[$t]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return RV(s,i,o,r),e.attachToViewContainerRef(),AT(Kg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=oT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=E_(this._lContainer,t);r&&(dh(Kg(this._lContainer),t),$x(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=E_(this._lContainer,t);return r&&dh(Kg(this._lContainer),t)!=null?new $o(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function oT(n){return n[gh]}function Kg(n){return n[gh]||(n[gh]=[])}function _D(n,e){let t,r=e[n.index];return oi(r)?t=r:(t=rD(r,e,null,n),e[n.index]=t,Zh(e,t)),cU(t,e,n,r),new gD(t,n,e)}function aU(n,e){let t=n[ut],r=t.createComment(""),i=On(e,n),o=zx(t,i);return Ch(t,o,r,LL(t,i),!1),r}var cU=dU,lU=()=>!1;function uU(n,e,t){return lU(n,e,t)}function dU(n,e,t,r){if(n[Lo])return;let i;t.type&8?i=yr(r):i=aU(e,t),n[Lo]=i}var P_=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},M_=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Ay(e,t).matches!==null&&this.queries[t].setDirty()}},R_=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=vU(e):this.predicate=e}},O_=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},N_=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,hU(t,o)),this.matchTNodeWithReadOption(e,t,sh(t,e,o,!1,!1))}else r===Yi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,sh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===vn||i===ci||i===Yi&&t.type&4)this.addMatch(t.index,-2);else{let o=sh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function hU(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function fU(n,e){return n.type&11?pa(n,e):n.type&4?Dy(n,e):null}function pU(n,e,t,r){return t===-1?fU(e,n):t===-2?mU(n,e,r):jo(n,n[ye],t,e)}function mU(n,e,t){if(t===vn)return pa(e,n);if(t===Yi)return Dy(e,n);if(t===ci)return _D(e,n)}function yD(n,e,t,r){let i=e[Xr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(pU(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function k_(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=yD(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let g=yn;g<d.length;g++){let y=d[g];y[Fo]===y[$t]&&k_(y[ye],y,u,r)}if(d[aa]!==null){let g=d[aa];for(let y=0;y<g.length;y++){let b=g[y];k_(b[ye],b,u,r)}}}}}return r}function gU(n,e){return n[Xr].queries[e].queryList}function _U(n,e,t){let r=new v_((t&4)===4);return lV(n,e,r,r.destroy),(e[Xr]??=new M_).queries.push(new P_(r))-1}function yU(n,e,t){let r=It();return r.firstCreatePass&&(wU(r,new R_(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),_U(r,Te(),e)}function vU(n){return n.split(",").map(e=>e.trim())}function wU(n,e,t){n.queries===null&&(n.queries=new O_),n.queries.track(new N_(e,t))}function Ay(n,e){return n.queries.getByIndex(e)}function bU(n,e){let t=n[ye],r=Ay(t,e);return r.crossesNgTemplate?k_(t,n,e,[]):yD(t,n,r,e)}function EU(n){return typeof n=="function"&&n[pn]!==void 0}function gl(n,e){pl("NgSignals");let t=iS(n),r=t[pn];return e?.equal&&(r.equal=e.equal),t.set=i=>Dd(r,i),t.update=i=>oS(r,i),t.asReadonly=IU.bind(t),t}function IU(){let n=this[pn];if(n.readonlyFn===void 0){let e=()=>this();e[pn]=n,n.readonlyFn=e}return n.readonlyFn}function vD(n){return EU(n)&&typeof n.set=="function"}var Zi=class{},cl=class{};var F_=class extends Zi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Dh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=RT(e);this._bootstrapComponents=Vx(o.bootstrap),this._r3Injector=yx(e,t,[{provide:Zi,useValue:this},{provide:la,useValue:this.componentFactoryResolver},...r],nn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},L_=class extends cl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new F_(this.moduleType,e,[])}};var Ah=class extends Zi{injector;componentFactoryResolver=new Dh(this);instance=null;constructor(e){super();let t=new rl([...e.providers,{provide:Zi,useValue:this},{provide:la,useValue:this.componentFactoryResolver}],e.parent||X_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Py(n,e,t=null){return new Ah({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var CU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=FT(!1,t.type),i=r.length>0?Py([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ce({token:n,providedIn:"environment",factory:()=>new n(Ce(Rn))})}return n})();function at(n){return dl(()=>{let e=wD(n),t=oe(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===xx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(CU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||vr.Emulated,styles:n.styles||Mn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&pl("NgStandalone"),bD(t);let r=n.dependencies;return t.directiveDefs=aT(r,!1),t.pipeDefs=aT(r,!0),t.id=xU(t),t})}function SU(n){return ko(n)||OT(n)}function TU(n){return n!==null}function ro(n){return dl(()=>({type:n.type,bootstrap:n.bootstrap||Mn,declarations:n.declarations||Mn,imports:n.imports||Mn,exports:n.exports||Mn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function sT(n,e){if(n==null)return ra;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Qi.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Qi.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ze(n){return dl(()=>{let e=wD(n);return bD(e),e})}function wD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ra,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Mn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sT(n.inputs,e),outputs:sT(n.outputs),debugInfo:null}}function bD(n){n.features?.forEach(e=>e(n))}function aT(n,e){if(!n)return null;let t=e?NT:SU;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(TU)}function xU(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function DU(n){return Object.getPrototypeOf(n.prototype).constructor}function wn(n){let e=DU(n.type),t=!0,r=[n];for(;e;){let i;if(Gi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=th(n.inputs),s.inputTransforms=th(n.inputTransforms),s.declaredInputs=th(n.declaredInputs),s.outputs=th(n.outputs);let a=i.hostBindings;a&&OU(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&MU(n,c),u&&RU(n,u),AU(n,i),TF(n.outputs,i.outputs),Gi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===wn&&(t=!1)}}e=Object.getPrototypeOf(e)}PU(r)}function AU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function PU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ol(i.hostAttrs,t=ol(t,i.hostAttrs))}}function th(n){return n===ra?{}:n===Mn?[]:n}function MU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function RU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function OU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function ED(n){return kU(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function NU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function kU(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function _l(n,e,t){return n[e]=t}function FU(n,e){return n[e]}function ni(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function ll(n,e,t,r){let i=ni(n,e,t);return ni(n,e+1,r)||i}function LU(n,e,t,r,i){let o=ll(n,e,t,r);return ni(n,e+2,i)||o}function VU(n,e,t,r,i,o){let s=ll(n,e,t,r);return ll(n,e+2,i,o)||s}function UU(n){return(n.flags&32)===32}function BU(n,e,t,r,i,o,s,a,c){let u=e.consts,d=ml(e,n,4,s||null,a||null);Cy(e,t,d,ca(u,c)),qh(e,d);let g=d.tView=Ey(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),g.queries=e.queries.embeddedTView(d)),d}function jU(n,e,t,r,i,o,s,a,c,u){let d=t+ei,g=e.firstCreatePass?BU(d,e,n,r,i,o,s,a,c):e.data[d];zo(g,!1);let y=$U(e,n,g,t);Hh()&&Kh(e,n,y,g),Ki(y,n);let b=rD(y,n,y,g);return n[d]=b,Zh(n,b),uU(b,g,n),Vh(g)&&wy(e,n,g),c!=null&&by(n,g,u),g}function Y(n,e,t,r,i,o,s,a){let c=Te(),u=It(),d=ca(u.consts,o);return jU(c,u,n,e,t,r,i,d,s,a),Y}var $U=HU;function HU(n,e,t,r){return zh(!0),e[ut].createComment("")}var Jh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var ID=new ne("");function Go(n){return!!n&&typeof n.then=="function"}function CD(n){return!!n&&typeof n.subscribe=="function"}var SD=new ne("");var TD=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=K(SD,{optional:!0})??[];injector=K(bt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=tr(this.injector,i);if(Go(o))t.push(o);else if(CD(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zU=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new V_})}return n})(),V_=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},My=new ne("");function qU(){rS(()=>{throw new re(600,!1)})}function GU(n){return n.isBoundToModule}var WU=10;function KU(n,e,t){try{let r=t();return Go(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Ji=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=K(rL);afterRenderManager=K(gL);zonelessEnabled=K(Gh);rootEffectScheduler=K(zU);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new _t;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=K(fa).hasPendingTasks.pipe(Ie(t=>!t));constructor(){K(kx,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=K(Rn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Th;if(!this._injector.get(TD).done){let y=!i&&kT(t),b=!1;throw new re(405,b)}let s;i?s=t:s=this._injector.get(la).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=GU(s)?void 0:this._injector.get(Zi),c=r||s.selector,u=s.create(bt.NULL,[],c,a),d=u.location.nativeElement,g=u.injector.get(ID,null);return g?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),ah(this.components,u),g?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(Nx.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new re(101,!1);let t=Ne(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ne(t),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ua,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<WU;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)QU(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Uh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ah(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(My,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ah(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new re(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ah(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function QU(n,e,t,r){if(!t&&!Uh(n))return;hD(n,e,t&&!r?0:1)}function Xh(n,e,t,r){let i=Te(),o=jh();if(ni(i,o,e)){let s=It(),a=$h();CV(a,i,n,e,t,r)}return Xh}function xD(n,e,t,r){return ni(n,jh(),t)?e+ta(t)+r:rr}function YU(n,e,t,r,i,o){let s=S2(),a=ll(n,s,t,i);return ex(2),a?e+ta(t)+r+ta(i)+o:rr}function nh(n,e){return n<<17|e<<2}function Ho(n){return n>>17&32767}function ZU(n){return(n&2)==2}function JU(n,e){return n&131071|e<<17}function U_(n){return n|2}function da(n){return(n&131068)>>2}function Qg(n,e){return n&-131069|e<<2}function XU(n){return(n&1)===1}function B_(n){return n|1}function eB(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ho(s),c=da(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let g=t;d=g[1],(d===null||hl(g,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let y=Ho(n[a+1]);n[r+1]=nh(y,a),y!==0&&(n[y+1]=Qg(n[y+1],r)),n[a+1]=JU(n[a+1],r)}else n[r+1]=nh(a,0),a!==0&&(n[a+1]=Qg(n[a+1],r)),a=r;else n[r+1]=nh(c,0),a===0?a=r:n[c+1]=Qg(n[c+1],r),c=r;u&&(n[r+1]=U_(n[r+1])),cT(n,d,r,!0),cT(n,d,r,!1),tB(e,d,n,r,o),s=nh(a,c),o?e.classBindings=s:e.styleBindings=s}function tB(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&hl(o,e)>=0&&(t[r+1]=B_(t[r+1]))}function cT(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ho(i):da(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];nB(c,e)&&(a=!0,n[s+1]=r?B_(u):U_(u)),s=r?Ho(u):da(u)}a&&(n[t+1]=r?U_(i):B_(i))}function nB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?hl(n,e)>=0:!1}function k(n,e,t){let r=Te(),i=jh();if(ni(r,i,e)){let o=It(),s=$h();Iy(o,s,r,n,e,r[ut],t,!1)}return k}function lT(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Sy(n,t,o[s],s,r)}function ma(n,e,t){return DD(n,e,t,!1),ma}function cn(n,e){return DD(n,e,null,!0),cn}function DD(n,e,t,r){let i=Te(),o=It(),s=ex(2);if(o.firstUpdatePass&&iB(o,n,s,r),e!==rr&&ni(i,s,e)){let a=o.data[qo()];lB(o,a,i,i[ut],n,i[s+1]=uB(e,t),r,s)}}function rB(n,e){return e>=n.expandoStartIndex}function iB(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[qo()],s=rB(n,t);dB(o,r)&&e===null&&!s&&(e=!1),e=oB(i,o,e,r),eB(i,o,e,t,s,r)}}function oB(n,e,t,r){let i=P2(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Yg(null,n,e,t,r),t=ul(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Yg(i,n,e,t,r),o===null){let c=sB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Yg(null,n,e,c[1],r),c=ul(c,e.attrs,r),aB(n,e,r,c))}else o=cB(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function sB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(da(r)!==0)return n[Ho(r)]}function aB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ho(i)]=r}function cB(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ul(r,s,t)}return ul(r,e.attrs,t)}function Yg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ul(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ul(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),KF(n,s,t?!0:e[++o]))}return n===void 0?null:n}function lB(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=XU(u)?uT(c,e,t,i,da(u),s):void 0;if(!Ph(d)){Ph(o)||ZU(u)&&(o=uT(c,null,t,i,a,s));let g=GT(qo(),t);zL(r,s,g,i,o)}}function uT(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,g=d===null,y=t[i+1];y===rr&&(y=g?Mn:void 0);let b=g?jg(y,r):d===r?y:void 0;if(u&&!Ph(b)&&(b=jg(c,r)),Ph(b)&&(a=b,s))return a;let C=n[i+1];i=s?Ho(C):da(C)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=jg(c,r))}return a}function Ph(n){return n!==void 0}function uB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=nn(Wh(n)))),n}function dB(n,e){return(n.flags&(e?8:16))!==0}function hB(n,e,t,r,i,o){let s=e.consts,a=ca(s,i),c=ml(e,n,2,r,a);return Cy(e,t,c,ca(s,o)),c.attrs!==null&&xh(c,c.attrs,!1),c.mergedAttrs!==null&&xh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function p(n,e,t,r){let i=Te(),o=It(),s=ei+n,a=i[ut],c=o.firstCreatePass?hB(s,o,i,e,t,r):o.data[s],u=fB(o,i,c,a,e,n);i[s]=u;let d=Vh(c);return zo(c,!0),Wx(a,u,c),!UU(c)&&Hh()&&Kh(o,i,u,c),y2()===0&&Ki(u,i),v2(),d&&(wy(o,i,c),vy(o,c,i)),r!==null&&by(i,c),p}function h(){let n=rn();ry()?JT():(n=n.parent,zo(n,!1));let e=n;E2(e)&&I2(),w2();let t=It();return t.firstCreatePass&&(qh(t,n),ey(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&L2(e)&&lT(t,e,Te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&V2(e)&&lT(t,e,Te(),e.stylesWithoutHost,!1),h}function J(n,e,t,r){return p(n,e,t,r),h(),J}var fB=(n,e,t,r,i,o)=>(zh(!0),Ux(r,i,O2()));function pB(n,e,t,r,i){let o=e.consts,s=ca(o,r),a=ml(e,n,8,"ng-container",s);s!==null&&xh(a,s,!0);let c=ca(o,i);return Cy(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function ga(n,e,t){let r=Te(),i=It(),o=n+ei,s=i.firstCreatePass?pB(o,i,r,e,t):i.data[o];zo(s,!0);let a=mB(i,r,s,n);return r[o]=a,Hh()&&Kh(i,r,a,s),Ki(a,r),Vh(s)&&(wy(i,r,s),vy(i,s,r)),t!=null&&by(r,s),ga}function _a(){let n=rn(),e=It();return ry()?JT():(n=n.parent,zo(n,!1)),e.firstCreatePass&&(qh(e,n),ey(n)&&e.queries.elementEnd(n)),_a}var mB=(n,e,t,r)=>(zh(!0),DL(e[ut],""));function Ct(){return Te()}var Mh="en-US";var gB=Mh;function _B(n){typeof n=="string"&&(gB=n.toLowerCase().replace(/_/g,"-"))}var yB=(n,e,t)=>{};function B(n,e,t,r){let i=Te(),o=It(),s=rn();return AD(o,i,i[ut],s,n,e,r),B}function vB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ph],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function AD(n,e,t,r,i,o,s){let a=Vh(r),u=n.firstCreatePass&&sD(n),d=e[Xn],g=oD(e),y=!0;if(r.type&3||s){let O=On(r,e),R=s?s(O):O,U=g.length,j=s?X=>s(yr(X[r.index])):r.index,V=null;if(!s&&a&&(V=vB(n,e,i,r.index)),V!==null){let X=V.__ngLastListenerFn__||V;X.__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,y=!1}else{o=hT(r,e,d,o),yB(O,i,o);let X=t.listen(R,i,o);g.push(o,X),u&&u.push(i,j,U,U+1)}}else o=hT(r,e,d,o);let b=r.outputs,C;if(y&&b!==null&&(C=b[i])){let O=C.length;if(O)for(let R=0;R<O;R+=2){let U=C[R],j=C[R+1],_e=e[U][j].subscribe(o),te=g.length;g.push(o,_e),u&&u.push(i,r.index,te,-(te+1))}}}function dT(n,e,t,r){let i=Ne(null);try{return mr(6,e,t),t(r)!==!1}catch(o){return aD(n,o),!1}finally{mr(7,e,t),Ne(i)}}function hT(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?to(n.index,e):e;xy(s,5);let a=dT(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=dT(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function G(n=1){return R2(n)}function Ry(n,e,t){return PD(n,"",e,"",t),Ry}function PD(n,e,t,r,i){let o=Te(),s=xD(o,e,t,r);if(s!==rr){let a=It(),c=$h();Iy(a,c,o,n,s,o[ut],i,!1)}return PD}function MD(n,e,t){yU(n,e,t)}function Oy(n){let e=Te(),t=It(),r=tx();iy(r+1);let i=Ay(t,r);if(n.dirty&&p2(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=bU(e,r);n.reset(o,sL),n.notifyOnChanges()}return!0}return!1}function Ny(){return gU(Te(),tx())}function m(n,e=""){let t=Te(),r=It(),i=n+ei,o=r.firstCreatePass?ml(r,i,1,e,null):r.data[i],s=wB(r,t,o,e,n);t[i]=s,Hh()&&Kh(r,t,s,o),zo(o,!1)}var wB=(n,e,t,r,i)=>(zh(!0),TL(e[ut],r));function $(n){return L("",n,""),$}function L(n,e,t){let r=Te(),i=xD(r,n,e,t);return i!==rr&&cD(r,qo(),i),L}function io(n,e,t,r,i){let o=Te(),s=YU(o,n,e,t,r,i);return s!==rr&&cD(o,qo(),s),io}function bn(n,e,t){vD(e)&&(e=e());let r=Te(),i=jh();if(ni(r,i,e)){let o=It(),s=$h();Iy(o,s,r,n,e,r[ut],t,!1)}return bn}function Nn(n,e){let t=vD(n);return t&&n.set(e),t}function En(n,e){let t=Te(),r=It(),i=rn();return AD(r,t,t[ut],i,n,e),En}function bB(n,e,t){let r=It();if(r.firstCreatePass){let i=Gi(n);j_(t,r.data,r.blueprint,i,!0),j_(e,r.data,r.blueprint,i,!1)}}function j_(n,e,t,r,i){if(n=tn(n),Array.isArray(n))for(let o=0;o<n.length;o++)j_(n[o],e,t,r,i);else{let o=It(),s=Te(),a=rn(),c=oa(n)?n:tn(n.provide),u=UT(n),d=a.providerIndexes&1048575,g=a.directiveStart,y=a.providerIndexes>>20;if(oa(n)||!n.multi){let b=new Bo(u,i,z),C=Jg(c,e,i?d:d+y,g);C===-1?(f_(wh(a,s),o,c),Zg(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(b),s.push(b)):(t[C]=b,s[C]=b)}else{let b=Jg(c,e,d+y,g),C=Jg(c,e,d,d+y),O=b>=0&&t[b],R=C>=0&&t[C];if(i&&!R||!i&&!O){f_(wh(a,s),o,c);let U=CB(i?IB:EB,t.length,i,r,u);!i&&R&&(t[C].providerFactory=U),Zg(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(U),s.push(U)}else{let U=RD(t[i?C:b],u,!i&&r);Zg(o,n,b>-1?b:C,U)}!i&&r&&R&&t[C].componentProviders++}}}function Zg(n,e,t,r){let i=oa(e),o=e2(e);if(i||o){let c=(o?tn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function RD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Jg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function EB(n,e,t,r){return $_(this.multi,[])}function IB(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=jo(t,t[ye],this.providerFactory.index,r);o=a.slice(0,s),$_(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],$_(i,o);return o}function $_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function CB(n,e,t,r,i){let o=new Bo(n,t,z);return o.multi=[],o.index=e,o.componentProviders=0,RD(o,i,r&&!t),o}function li(n,e=[]){return t=>{t.providersResolver=(r,i)=>bB(r,i?i(n):n,e)}}function OD(n,e,t){let r=fl()+n,i=Te();return i[r]===rr?_l(i,r,t?e.call(t):e()):FU(i,r)}function ir(n,e,t,r){return SB(Te(),fl(),n,e,t,r)}function ef(n,e,t,r,i){return TB(Te(),fl(),n,e,t,r,i)}function ND(n,e,t,r,i,o){return xB(Te(),fl(),n,e,t,r,i,o)}function kD(n,e,t,r,i,o,s){return DB(Te(),fl(),n,e,t,r,i,o,s)}function tf(n,e){let t=n[e];return t===rr?void 0:t}function SB(n,e,t,r,i,o){let s=e+t;return ni(n,s,i)?_l(n,s+1,o?r.call(o,i):r(i)):tf(n,s+1)}function TB(n,e,t,r,i,o,s){let a=e+t;return ll(n,a,i,o)?_l(n,a+2,s?r.call(s,i,o):r(i,o)):tf(n,a+2)}function xB(n,e,t,r,i,o,s,a){let c=e+t;return LU(n,c,i,o,s)?_l(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):tf(n,c+3)}function DB(n,e,t,r,i,o,s,a,c){let u=e+t;return VU(n,u,i,o,s,a)?_l(n,u+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):tf(n,u+4)}var ri=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},FD=new ri("19.0.5"),H_=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ky=(()=>{class n{compileModuleSync(t){return new L_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=RT(t),o=Vx(i.declarations).reduce((s,a)=>{let c=ko(a);return c&&s.push(new al(c)),s},[]);return new H_(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var AB=(()=>{class n{zone=K(Ve);changeDetectionScheduler=K(sl);applicationRef=K(Ji);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PB=new ne("",{factory:()=>!1});function LD({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ve(oe(H({},UD()),{scheduleInRootZone:t})),[{provide:Ve,useFactory:n},{provide:ia,multi:!0,useFactory:()=>{let r=K(AB,{optional:!0});return()=>r.initialize()}},{provide:ia,multi:!0,useFactory:()=>{let r=K(MB);return()=>{r.initialize()}}},e===!0?{provide:bx,useValue:!0}:[],{provide:Ex,useValue:t??vx}]}function VD(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=LD({ngZoneFactory:()=>{let i=UD(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&pl("NgZone_CoalesceEvent"),new Ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return an([{provide:PB,useValue:!0},{provide:Gh,useValue:!1},r])}function UD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var MB=(()=>{class n{subscription=new st;initialized=!1;zone=K(Ve);pendingTasks=K(fa);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ve.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ve.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var RB=(()=>{class n{appRef=K(Ji);taskService=K(fa);ngZone=K(Ve);zonelessEnabled=K(Gh);tracing=K(kx,{optional:!0});disableScheduling=K(bx,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new st;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Eh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(K(Ex,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof y_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?qS:Ix;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Eh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,qS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OB(){return typeof $localize<"u"&&$localize.locale||Mh}var Fy=new ne("",{providedIn:"root",factory:()=>K(Fy,ve.Optional|ve.SkipSelf)||OB()});var z_=new ne(""),NB=new ne("");function Jc(n){return!n.moduleRef}function kB(n){let e=Jc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ve);return t.run(()=>{Jc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Wi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Jc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(z_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(z_);s.add(o),n.moduleRef.onDestroy(()=>{ah(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return KU(r,t,()=>{let o=e.get(TD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Fy,Mh);if(_B(s||Mh),!e.get(NB,!0))return Jc(n)?e.get(Ji):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Jc(n)){let c=e.get(Ji);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return FB(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function FB(n,e){let t=n.injector.get(Ji);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new re(-403,!1);e.push(n)}var ch=null;function LB(n=[],e){return bt.create({name:e,providers:[{provide:kh,useValue:"platform"},{provide:z_,useValue:new Set([()=>ch=null])},...n]})}function VB(n=[]){if(ch)return ch;let e=LB(n);return ch=e,qU(),UB(e),e}function UB(n){let e=n.get(dy,null);tr(n,()=>{e?.forEach(t=>t())})}var Wo=(()=>{class n{static __NG_ELEMENT_ID__=BB}return n})();function BB(n){return jB(rn(),Te(),(n&16)===16)}function jB(n,e,t){if(Lh(n)&&!t){let r=to(n.index,e);return new $o(r,r)}else if(n.type&175){let r=e[_r];return new $o(r,e)}return null}var q_=class{constructor(){}supports(e){return ED(e)}create(e){return new G_(e)}},$B=(n,e)=>e,G_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||$B}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<fT(r,i,o)?t:r,a=fT(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let y=0;y<u;y++){let b=y<o.length?o[y]:o[y]=0,C=b+y;d<=C&&C<u&&(o[y]=b+1)}let g=s.previousIndex;o[g]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ED(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,NU(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new W_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Rh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Rh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},W_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},K_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Rh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new K_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function pT(){return new Ly([new q_])}var Ly=(()=>{class n{factories;static \u0275prov=ce({token:n,providedIn:"root",factory:pT});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||pT()),deps:[[n,new DT,new Ye]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new re(901,!1)}}return n})();function BD(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=VB(r),o=[LD({}),{provide:sl,useExisting:RB},...t||[]],s=new Ah({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return kB({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function yl(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function vl(n,e){pl("NgSignals");let t=eS(n);return e?.equal&&(t[pn].equal=e.equal),t}function ui(n){let e=Ne(null);try{return n()}finally{Ne(e)}}var mT=class{[pn];constructor(e){this[pn]=e}destroy(){this[pn].destroy()}};var GD=null;function di(){return GD}function WD(n){GD??=n}var nf=class{};var kn=new ne(""),KD=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>K(qB),providedIn:"platform"})}return n})();var qB=(()=>{class n extends KD{_location;_history;_doc=K(kn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return di().getBaseHref(this._doc)}onPopState(t){let r=di().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=di().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function QD(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function jD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ko(n){return n&&n[0]!=="?"?"?"+n:n}var of=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>K(YD),providedIn:"root"})}return n})(),GB=new ne(""),YD=(()=>{class n extends of{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??K(kn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return QD(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ko(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ko(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ko(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Ce(KD),Ce(GB,8))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hi=(()=>{class n{_subject=new _t;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=QB(jD($D(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ko(r))}normalize(t){return n.stripTrailingSlash(KB(this._basePath,$D(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ko(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ko(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ko;static joinWithSlash=QD;static stripTrailingSlash=jD;static \u0275fac=function(r){return new(r||n)(Ce(of))};static \u0275prov=ce({token:n,factory:()=>WB(),providedIn:"root"})}return n})();function WB(){return new hi(Ce(of))}function KB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function $D(n){return n.replace(/\/index.html$/,"")}function QB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function ZD(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Vy=/\s+/,HD=[],wr=(()=>{class n{_ngEl;_renderer;initialClasses=HD;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Vy):HD}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Vy):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Vy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(z(vn),z(ai))};static \u0275dir=Ze({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Uy=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},br=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Uy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),zD(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);zD(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(z(ci),z(Yi),z(Ly))};static \u0275dir=Ze({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function zD(n,e){n.context.$implicit=e.item}var St=(()=>{class n{_viewContainer;_context=new By;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(z(ci),z(Yi))};static \u0275dir=Ze({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),By=class{$implicit=null;ngIf=null};function qD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${nn(e)}'.`)}var jy=class{_viewContainerRef;_templateRef;_created=!1;constructor(e,t){this._viewContainerRef=e,this._templateRef=t}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},$y=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(t){this._ngSwitch=t,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){let r=t===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(let r of this._defaultViews)r.enforceState(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),JD=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new jy(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||n)(z(ci),z(Yi),z($y,9))};static \u0275dir=Ze({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})();var Et=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ro({type:n});static \u0275inj=Xi({})}return n})(),XD="browser",YB="server";function Hy(n){return n===YB}var rf=class{};var qy=class extends nf{supportsDOMEvents=!0},Gy=class n extends qy{static makeCurrent(){WD(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=ZB();return t==null?null:JB(t)}resetBaseElement(){wl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ZD(document.cookie,e)}},wl=null;function ZB(){return wl=wl||document.querySelector("base"),wl?wl.getAttribute("href"):null}function JB(n){return new URL(n,document.baseURI).pathname}var XB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),Wy=new ne(""),oA=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new re(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Ce(Wy),Ce(Ve))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),af=class{_doc;constructor(e){this._doc=e}manager},sf="ng-app-id";function eA(n){for(let e of n)e.remove()}function tA(n,e){let t=e.createElement("style");return t.textContent=n,t}function ej(n,e,t,r){let i=n.head?.querySelectorAll(`style[${sf}="${e}"],link[${sf}="${e}"]`);if(i)for(let o of i)o.removeAttribute(sf),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Ky(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var sA=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Hy(o),ej(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,tA);r?.forEach(i=>this.addUsage(i,this.external,Ky))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(eA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])eA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,tA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Ky(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(sf,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Ce(kn),Ce(uy),Ce(hy,8),Ce(no))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),zy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yy=/%COMP%/g,aA="%COMP%",tj=`_nghost-${aA}`,nj=`_ngcontent-${aA}`,rj=!0,ij=new ne("",{providedIn:"root",factory:()=>rj});function oj(n){return nj.replace(Yy,n)}function sj(n){return tj.replace(Yy,n)}function cA(n,e){return e.map(t=>t.replace(Yy,n))}var nA=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.platformIsServer=Hy(a),this.defaultRenderer=new bl(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vr.ShadowDom&&(r=oe(H({},r),{encapsulation:vr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof cf?i.applyToHost(t):i instanceof El&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case vr.Emulated:o=new cf(c,u,r,this.appId,d,s,a,g);break;case vr.ShadowDom:return new Qy(c,u,t,r,s,a,this.nonce,g);default:o=new El(c,u,r,d,s,a,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||n)(Ce(oA),Ce(sA),Ce(uy),Ce(ij),Ce(kn),Ce(no),Ce(Ve),Ce(hy))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),bl=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(zy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(rA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(rA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=zy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=zy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ti.DashCase|ti.Important)?e.style.setProperty(t,r,i&ti.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ti.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=di().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function rA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Qy=class extends bl{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=cA(i.id,i.styles);for(let g of u){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let d=i.getExternalStyles?.();if(d)for(let g of d){let y=Ky(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},El=class extends bl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?cA(c,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},cf=class extends El{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,u),this.contentAttr=oj(u),this.hostAttr=sj(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},aj=(()=>{class n extends af{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static \u0275fac=function(r){return new(r||n)(Ce(kn))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),iA=["alt","control","meta","shift"],cj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},uj=(()=>{class n extends af{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>di().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),iA.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=cj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),iA.forEach(s=>{if(s!==i){let a=lj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Ce(kn))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();function lA(n,e){return BD(H({rootComponent:n},dj(e)))}function dj(n){return{appProviders:[...gj,...n?.providers??[]],platformProviders:mj}}function hj(){Gy.makeCurrent()}function fj(){return new Wi}function pj(){return Rx(document),document}var mj=[{provide:no,useValue:XD},{provide:dy,useValue:hj,multi:!0},{provide:kn,useFactory:pj,deps:[]}];var gj=[{provide:kh,useValue:"root"},{provide:Wi,useFactory:fj,deps:[]},{provide:Wy,useClass:aj,multi:!0,deps:[kn,Ve,no]},{provide:Wy,useClass:uj,multi:!0,deps:[kn]},nA,sA,oA,{provide:ua,useExisting:nA},{provide:rf,useClass:XB,deps:[]},[]];var uA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Ce(kn))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ge="primary",Ul=Symbol("RouteTitle"),tv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ia(n){return new tv(n)}function yj(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function vj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Er(n[t],e[t]))return!1;return!0}function Er(n,e){let t=n?nv(n):void 0,r=e?nv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!yA(n[i],e[i]))return!1;return!0}function nv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function yA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function vA(n){return n.length>0?n[n.length-1]:null}function so(n){return Og(n)?n:Go(n)?lt(Promise.resolve(n)):me(n)}var wj={exact:bA,subset:EA},wA={exact:bj,subset:Ej,ignored:()=>!0};function dA(n,e,t){return wj[t.paths](n.root,e.root,t.matrixParams)&&wA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function bj(n,e){return Er(n,e)}function bA(n,e,t){if(!Yo(n.segments,e.segments)||!df(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!bA(n.children[r],e.children[r],t))return!1;return!0}function Ej(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yA(n[t],e[t]))}function EA(n,e,t){return IA(n,e,e.segments,t)}function IA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Yo(i,t)||e.hasChildren()||!df(i,t,r))}else if(n.segments.length===t.length){if(!Yo(n.segments,t)||!df(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!EA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Yo(n.segments,i)||!df(n.segments,i,r)||!n.children[ge]?!1:IA(n.children[ge],e,o,r)}}function df(n,e,t){return e.every((r,i)=>wA[t](n[i].parameters,r.parameters))}var mi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ue([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ia(this.queryParams),this._queryParamMap}toString(){return Sj.serialize(this)}},Ue=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hf(this)}},Qo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ia(this.parameters),this._parameterMap}toString(){return SA(this)}};function Ij(n,e){return Yo(n,e)&&n.every((t,r)=>Er(t.parameters,e[r].parameters))}function Yo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Cj(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ge&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ge&&(t=t.concat(e(i,r)))}),t}var Dv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>new Al,providedIn:"root"})}return n})(),Al=class{parse(e){let t=new iv(e);return new mi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Il(e.root,!0)}`,r=Dj(e.queryParams),i=typeof e.fragment=="string"?`#${Tj(e.fragment)}`:"";return`${t}${r}${i}`}},Sj=new Al;function hf(n){return n.segments.map(e=>SA(e)).join("/")}function Il(n,e){if(!n.hasChildren())return hf(n);if(e){let t=n.children[ge]?Il(n.children[ge],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ge&&r.push(`${i}:${Il(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Cj(n,(r,i)=>i===ge?[Il(n.children[ge],!1)]:[`${i}:${Il(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ge]!=null?`${hf(n)}/${t[0]}`:`${hf(n)}/(${t.join("//")})`}}function CA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lf(n){return CA(n).replace(/%3B/gi,";")}function Tj(n){return encodeURI(n)}function rv(n){return CA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ff(n){return decodeURIComponent(n)}function hA(n){return ff(n.replace(/\+/g,"%20"))}function SA(n){return`${rv(n.path)}${xj(n.parameters)}`}function xj(n){return Object.entries(n).map(([e,t])=>`;${rv(e)}=${rv(t)}`).join("")}function Dj(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${lf(t)}=${lf(i)}`).join("&"):`${lf(t)}=${lf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Aj=/^[^\/()?;#]+/;function Zy(n){let e=n.match(Aj);return e?e[0]:""}var Pj=/^[^\/()?;=#]+/;function Mj(n){let e=n.match(Pj);return e?e[0]:""}var Rj=/^[^=?&#]+/;function Oj(n){let e=n.match(Rj);return e?e[0]:""}var Nj=/^[^&#]+/;function kj(n){let e=n.match(Nj);return e?e[0]:""}var iv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ge]=new Ue(e,t)),r}parseSegment(){let e=Zy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new Qo(ff(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Mj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Zy(this.remaining);i&&(r=i,this.capture(r))}e[ff(t)]=ff(r)}parseQueryParam(e){let t=Oj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=kj(this.remaining);s&&(r=s,this.capture(r))}let i=hA(t),o=hA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Zy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ge);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ge]:new Ue([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function TA(n){return n.segments.length>0?new Ue([],{[ge]:n}):n}function xA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=xA(i);if(r===ge&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ue(n.segments,e);return Fj(t)}function Fj(n){if(n.numberOfChildren===1&&n.children[ge]){let e=n.children[ge];return new Ue(n.segments.concat(e.segments),e.children)}return n}function Pl(n){return n instanceof mi}function Lj(n,e,t=null,r=null){let i=DA(n);return AA(i,e,t,r)}function DA(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Ue(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=TA(r);return e??i}function AA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Jy(i,i,i,t,r);let o=Vj(e);if(o.toRoot())return Jy(i,i,new Ue([],{}),t,r);let s=Uj(o,i,n),a=s.processChildren?Tl(s.segmentGroup,s.index,o.commands):MA(s.segmentGroup,s.index,o.commands);return Jy(i,s.segmentGroup,a,t,r)}function pf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ml(n){return typeof n=="object"&&n!=null&&n.outlets}function Jy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=PA(n,e,t);let a=TA(xA(s));return new mi(a,o,i)}function PA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=PA(o,e,t)}),new Ue(n.segments,r)}var mf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pf(r[0]))throw new re(4003,!1);let i=r.find(Ml);if(i&&i!==vA(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Vj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new mf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new mf(t,e,r)}var wa=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Uj(n,e,t){if(n.isAbsolute)return new wa(e,!0,0);if(!t)return new wa(e,!1,NaN);if(t.parent===null)return new wa(t,!0,0);let r=pf(n.commands[0])?0:1,i=t.segments.length-1+r;return Bj(t,i,n.numberOfDoubleDots)}function Bj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new wa(r,!1,i-o)}function jj(n){return Ml(n[0])?n[0].outlets:{[ge]:n}}function MA(n,e,t){if(n??=new Ue([],{}),n.segments.length===0&&n.hasChildren())return Tl(n,e,t);let r=$j(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ue(n.segments.slice(0,r.pathIndex),{});return o.children[ge]=new Ue(n.segments.slice(r.pathIndex),n.children),Tl(o,0,i)}else return r.match&&i.length===0?new Ue(n.segments,{}):r.match&&!n.hasChildren()?ov(n,e,t):r.match?Tl(n,0,i):ov(n,e,t)}function Tl(n,e,t){if(t.length===0)return new Ue(n.segments,{});{let r=jj(t),i={};if(Object.keys(r).some(o=>o!==ge)&&n.children[ge]&&n.numberOfChildren===1&&n.children[ge].segments.length===0){let o=Tl(n.children[ge],e,t);return new Ue(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=MA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ue(n.segments,i)}}function $j(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ml(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!pA(c,u,s))return o;r+=2}else{if(!pA(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ov(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ml(o)){let c=Hj(o.outlets);return new Ue(r,c)}if(i===0&&pf(t[0])){let c=n.segments[e];r.push(new Qo(c.path,fA(t[0]))),i++;continue}let s=Ml(o)?o.outlets[ge]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&pf(a)?(r.push(new Qo(s,fA(a))),i+=2):(r.push(new Qo(s,{})),i++)}return new Ue(r,{})}function Hj(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ov(new Ue([],{}),0,r))}),e}function fA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function pA(n,e,t){return n==t.path&&Er(e,t.parameters)}var xl="imperative",Ot=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ot||{}),Fn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Rl=class extends Fn{type=Ot.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Zo=class extends Fn{urlAfterRedirects;type=Ot.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Cn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Cn||{}),sv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(sv||{}),pi=class extends Fn{reason;code;type=Ot.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Jo=class extends Fn{reason;code;type=Ot.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ol=class extends Fn{error;target;type=Ot.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gf=class extends Fn{urlAfterRedirects;state;type=Ot.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},av=class extends Fn{urlAfterRedirects;state;type=Ot.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cv=class extends Fn{urlAfterRedirects;state;shouldActivate;type=Ot.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},lv=class extends Fn{urlAfterRedirects;state;type=Ot.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uv=class extends Fn{urlAfterRedirects;state;type=Ot.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dv=class{route;type=Ot.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hv=class{route;type=Ot.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fv=class{snapshot;type=Ot.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pv=class{snapshot;type=Ot.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mv=class{snapshot;type=Ot.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gv=class{snapshot;type=Ot.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Nl=class{},Ca=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function zj(n,e){return n.providers&&!n._injector&&(n._injector=Py(n.providers,e,`Route: ${n.path}`)),n._injector??e}function or(n){return n.outlet||ge}function qj(n,e){let t=n.filter(r=>or(r)===e);return t.push(...n.filter(r=>or(r)!==e)),t}function Bl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var _v=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Bl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new If(this.rootInjector)}},If=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new _v(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Ce(Rn))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_f=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=yv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=yv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=vv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return vv(e,this._root).map(t=>t.value)}};function yv(n,e){if(n===e.value)return e;for(let t of e.children){let r=yv(n,t);if(r)return r}return null}function vv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=vv(n,t);if(r.length)return r.unshift(e),r}return[]}var In=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function va(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var yf=class extends _f{snapshot;constructor(e,t){super(e),this.snapshot=t,Av(this,e)}toString(){return this.snapshot.toString()}};function RA(n){let e=Gj(n),t=new Rt([new Qo("",{})]),r=new Rt({}),i=new Rt({}),o=new Rt({}),s=new Rt(""),a=new oo(t,r,o,s,i,ge,n,e.root);return a.snapshot=e.root,new yf(new In(a,[]),e)}function Gj(n){let e={},t={},r={},i="",o=new ba([],e,r,i,t,ge,n,null,{});return new wf("",new In(o,[]))}var oo=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ie(u=>u[Ul]))??me(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ie(e=>Ia(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ie(e=>Ia(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&NA(i)&&(r.resolve[Ul]=i.title),r}var ba=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ul]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ia(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ia(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wf=class extends _f{url;constructor(e,t){super(t),this.url=e,Av(this,t)}toString(){return OA(this._root)}};function Av(n,e){e.value._routerState=n,e.children.forEach(t=>Av(n,t))}function OA(n){let e=n.children.length>0?` { ${n.children.map(OA).join(", ")} } `:"";return`${n.value}${e}`}function Xy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Er(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Er(e.params,t.params)||n.paramsSubject.next(t.params),vj(e.url,t.url)||n.urlSubject.next(t.url),Er(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function wv(n,e){let t=Er(n.params,e.params)&&Ij(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||wv(n.parent,e.parent))}function NA(n){return typeof n.title=="string"||n.title===null}var Wj=new ne(""),Pv=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ge;activateEvents=new wt;deactivateEvents=new wt;attachEvents=new wt;detachEvents=new wt;routerOutletData=Sx(void 0);parentContexts=K(If);location=K(ci);changeDetector=K(Wo);inputBinder=K(Mv,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new bv(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[eo]})}return n})(),bv=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===oo?this.route:e===If?this.childContexts:e===Wj?this.outletData:this.parent.get(e,t)}},Mv=new ne("");function Kj(n,e,t){let r=kl(n,e._root,t?t._root:void 0);return new yf(r,e)}function kl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Qj(n,e,t);return new In(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>kl(n,a)),s}}let r=Yj(e.value),i=e.children.map(o=>kl(n,o));return new In(r,i)}}function Qj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return kl(n,r,i);return kl(n,r)})}function Yj(n){return new oo(new Rt(n.url),new Rt(n.params),new Rt(n.queryParams),new Rt(n.fragment),new Rt(n.data),n.outlet,n.component,n)}var Fl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},kA="ngNavigationCancelingError";function bf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Pl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=FA(!1,Cn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function FA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[kA]=!0,t.cancellationCode=e,t}function Zj(n){return LA(n)&&Pl(n.url)}function LA(n){return!!n&&n[kA]}var Jj=(n,e,t,r)=>Ie(i=>(new Ev(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Ev=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=va(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=va(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=va(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=va(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new gv(o.value.snapshot))}),e.children.length&&this.forwardEvent(new pv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Xy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Xy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ef=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ea=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Xj(n,e,t){let r=n._root,i=e?e._root:null;return Cl(r,i,t,[r.value])}function e5(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ta(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!bT(n)?n:e.get(n):r}function Cl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=va(e);return n.children.forEach(s=>{t5(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Dl(a,t.getContext(s),i)),i}function t5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=n5(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ef(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Cl(n,e,a?a.children:null,r,i):Cl(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ea(a.outlet.component,s))}else s&&Dl(e,a,i),i.canActivateChecks.push(new Ef(r)),o.component?Cl(n,null,a?a.children:null,r,i):Cl(n,null,t,r,i);return i}function n5(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Yo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Yo(n.url,e.url)||!Er(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wv(n,e)||!Er(n.queryParams,e.queryParams);case"paramsChange":default:return!wv(n,e)}}function Dl(n,e,t){let r=va(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Dl(s,e.children.getContext(o),t):Dl(s,null,t):Dl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ea(e.outlet.component,i)):t.canDeactivateChecks.push(new Ea(null,i)):t.canDeactivateChecks.push(new Ea(null,i))}function jl(n){return typeof n=="function"}function r5(n){return typeof n=="boolean"}function i5(n){return n&&jl(n.canLoad)}function o5(n){return n&&jl(n.canActivate)}function s5(n){return n&&jl(n.canActivateChild)}function a5(n){return n&&jl(n.canDeactivate)}function c5(n){return n&&jl(n.canMatch)}function VA(n){return n instanceof Qr||n?.name==="EmptyError"}var uf=Symbol("INITIAL_VALUE");function Sa(){return Yn(n=>Zd(n.map(e=>e.pipe(Yr(1),Ug(uf)))).pipe(Ie(e=>{for(let t of e)if(t!==!0){if(t===uf)return uf;if(t===!1||l5(t))return t}return!0}),Qn(e=>e!==uf),Yr(1)))}function l5(n){return Pl(n)||n instanceof Fl}function u5(n,e){return yt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?me(oe(H({},t),{guardsResult:!0})):d5(s,r,i,n).pipe(yt(a=>a&&r5(a)?h5(r,o,n,e):me(a)),Ie(a=>oe(H({},t),{guardsResult:a})))})}function d5(n,e,t,r){return lt(n).pipe(yt(i=>_5(i.component,i.route,t,e,r)),Zr(i=>i!==!0,!0))}function h5(n,e,t,r){return lt(e).pipe(Ks(i=>Ws(p5(i.route.parent,r),f5(i.route,r),g5(n,i.path,t),m5(n,i.route,t))),Zr(i=>i!==!0,!0))}function f5(n,e){return n!==null&&e&&e(new mv(n)),me(!0)}function p5(n,e){return n!==null&&e&&e(new fv(n)),me(!0)}function m5(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return me(!0);let i=r.map(o=>Jd(()=>{let s=Bl(e)??t,a=Ta(o,s),c=o5(a)?a.canActivate(e,n):tr(s,()=>a(e,n));return so(c).pipe(Zr())}));return me(i).pipe(Sa())}function g5(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>e5(s)).filter(s=>s!==null).map(s=>Jd(()=>{let a=s.guards.map(c=>{let u=Bl(s.node)??t,d=Ta(c,u),g=s5(d)?d.canActivateChild(r,n):tr(u,()=>d(r,n));return so(g).pipe(Zr())});return me(a).pipe(Sa())}));return me(o).pipe(Sa())}function _5(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return me(!0);let s=o.map(a=>{let c=Bl(e)??i,u=Ta(a,c),d=a5(u)?u.canDeactivate(n,e,t,r):tr(c,()=>u(n,e,t,r));return so(d).pipe(Zr())});return me(s).pipe(Sa())}function y5(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return me(!0);let o=i.map(s=>{let a=Ta(s,n),c=i5(a)?a.canLoad(e,t):tr(n,()=>a(e,t));return so(c)});return me(o).pipe(Sa(),UA(r))}function UA(n){return Sg(vt(e=>{if(typeof e!="boolean")throw bf(n,e)}),Ie(e=>e===!0))}function v5(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return me(!0);let o=i.map(s=>{let a=Ta(s,n),c=c5(a)?a.canMatch(e,t):tr(n,()=>a(e,t));return so(c)});return me(o).pipe(Sa(),UA(r))}var Ll=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Vl=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ya(n){return Gs(new Ll(n))}function w5(n){return Gs(new re(4e3,!1))}function b5(n){return Gs(FA(!1,Cn.GuardRejected))}var Iv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return me(r);if(i.numberOfChildren>1||!i.children[ge])return w5(`${e.redirectTo}`);i=i.children[ge]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:d,url:g,outlet:y,params:b,data:C,title:O}=i,R=tr(o,()=>a({params:b,data:C,queryParams:c,fragment:u,routeConfig:d,url:g,outlet:y,title:O}));if(R instanceof mi)throw new Vl(R);t=R}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Vl(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new mi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ue(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Cv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function E5(n,e,t,r,i){let o=BA(n,e,t);return o.matched?(r=zj(e,r),v5(r,e,t,i).pipe(Ie(s=>s===!0?o:H({},Cv)))):me(o)}function BA(n,e,t){if(e.path==="**")return I5(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},Cv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||yj)(t,n,e);if(!i)return H({},Cv);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function I5(n){return{matched:!0,parameters:n.length>0?vA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function mA(n,e,t,r){return t.length>0&&T5(n,t,r)?{segmentGroup:new Ue(e,S5(r,new Ue(t,n.children))),slicedSegments:[]}:t.length===0&&x5(n,t,r)?{segmentGroup:new Ue(n.segments,C5(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ue(n.segments,n.children),slicedSegments:t}}function C5(n,e,t,r){let i={};for(let o of t)if(Cf(n,e,o)&&!r[or(o)]){let s=new Ue([],{});i[or(o)]=s}return H(H({},r),i)}function S5(n,e){let t={};t[ge]=e;for(let r of n)if(r.path===""&&or(r)!==ge){let i=new Ue([],{});t[or(r)]=i}return t}function T5(n,e,t){return t.some(r=>Cf(n,e,r)&&or(r)!==ge)}function x5(n,e,t){return t.some(r=>Cf(n,e,r))}function Cf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function D5(n,e,t){return e.length===0&&!n.children[t]}var Sv=class{};function A5(n,e,t,r,i,o,s="emptyOnly"){return new Tv(n,e,t,r,i,s,o).recognize()}var P5=31,Tv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Iv(this.urlSerializer,this.urlTree)}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=mA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ie(({children:t,rootSnapshot:r})=>{let i=new In(r,t),o=new wf("",i),s=Lj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ba([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ge,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ge,t).pipe(Ie(r=>({children:r,rootSnapshot:t})),ji(r=>{if(r instanceof Vl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ll?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ie(s=>s instanceof In?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return lt(o).pipe(Ks(s=>{let a=r.children[s],c=qj(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Vg((s,a)=>(s.push(...a),s)),$i(null),Lg(),yt(s=>{if(s===null)return ya(r);let a=jA(s);return M5(a),me(a)}))}processSegment(e,t,r,i,o,s,a){return lt(t).pipe(Ks(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(ji(u=>{if(u instanceof Ll)return me(null);throw u}))),Zr(c=>!!c),ji(c=>{if(VA(c))return D5(r,i,o)?me(new Sv):ya(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return or(r)!==s&&(s===ge||!Cf(i,o,r))?ya(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):ya(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:g,remainingSegments:y}=BA(t,i,o);if(!c)return ya(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>P5&&(this.allowRedirects=!1));let b=new ba(o,u,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,gA(i),or(i),i.component??i._loadedComponent??null,i,_A(i)),C=vf(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(C.params),b.data=Object.freeze(C.data);let O=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,g,b,e);return this.applyRedirects.lineralizeSegments(i,O).pipe(yt(R=>this.processSegment(e,r,t,R.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=E5(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Yn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Yn(({routes:u})=>{let d=r._loadedInjector??e,{parameters:g,consumedSegments:y,remainingSegments:b}=c,C=new ba(y,g,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,gA(r),or(r),r.component??r._loadedComponent??null,r,_A(r)),O=vf(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(O.params),C.data=Object.freeze(O.data);let{segmentGroup:R,slicedSegments:U}=mA(t,y,b,u);if(U.length===0&&R.hasChildren())return this.processChildren(d,u,R,C).pipe(Ie(V=>new In(C,V)));if(u.length===0&&U.length===0)return me(new In(C,[]));let j=or(r)===o;return this.processSegment(d,u,R,U,j?ge:o,!0,C).pipe(Ie(V=>new In(C,V instanceof In?[V]:[])))}))):ya(t)))}getChildConfig(e,t,r){return t.children?me({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?me({routes:t._loadedRoutes,injector:t._loadedInjector}):y5(e,t,r,this.urlSerializer).pipe(yt(i=>i?this.configLoader.loadChildren(e,t).pipe(vt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):b5(t))):me({routes:[],injector:e})}};function M5(n){n.sort((e,t)=>e.value.outlet===ge?-1:t.value.outlet===ge?1:e.value.outlet.localeCompare(t.value.outlet))}function R5(n){let e=n.value.routeConfig;return e&&e.path===""}function jA(n){let e=[],t=new Set;for(let r of n){if(!R5(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=jA(r.children);e.push(new In(r.value,i))}return e.filter(r=>!t.has(r))}function gA(n){return n.data||{}}function _A(n){return n.resolve||{}}function O5(n,e,t,r,i,o){return yt(s=>A5(n,e,t,r,s.extractedUrl,i,o).pipe(Ie(({state:a,tree:c})=>oe(H({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function N5(n,e){return yt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return me(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of $A(c))s.add(u);let a=0;return lt(s).pipe(Ks(c=>o.has(c)?k5(c,r,n,e):(c.data=vf(c,c.parent,n).resolve,me(void 0))),vt(()=>a++),Qs(1),yt(c=>a===s.size?me(t):gn))})}function $A(n){let e=n.children.map(t=>$A(t)).flat();return[n,...e]}function k5(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!NA(i)&&(o[Ul]=i.title),F5(o,n,e,r).pipe(Ie(s=>(n._resolvedData=s,n.data=vf(n,n.parent,t).resolve,null)))}function F5(n,e,t,r){let i=nv(n);if(i.length===0)return me({});let o={};return lt(i).pipe(yt(s=>L5(n[s],e,t,r).pipe(Zr(),vt(a=>{if(a instanceof Fl)throw bf(new Al,a);o[s]=a}))),Qs(1),Fg(o),ji(s=>VA(s)?gn:Gs(s)))}function L5(n,e,t,r){let i=Bl(e)??r,o=Ta(n,i),s=o.resolve?o.resolve(e,t):tr(i,()=>o(e,t));return so(s)}function ev(n){return Yn(e=>{let t=n(e);return t?lt(t).pipe(Ie(()=>e)):me(e)})}var HA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ge);return r}getResolvedTitleForRoute(t){return t.data[Ul]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>K(V5),providedIn:"root"})}return n})(),V5=(()=>{class n extends HA{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Ce(uA))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rv=new ne("",{providedIn:"root",factory:()=>({})}),U5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=at({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,i){r&1&&J(0,"router-outlet")},dependencies:[Pv],encapsulation:2})}return n})();function Ov(n){let e=n.children&&n.children.map(Ov),t=e?oe(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ge&&(t.component=U5),t}var Nv=new ne(""),B5=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=K(ky);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return me(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=so(t.loadComponent()).pipe(Ie(zA),vt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Zc(()=>{this.componentLoaders.delete(t)})),i=new $s(r,()=>new _t).pipe(js());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return me({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=j5(r,this.compiler,t,this.onLoadEndListener).pipe(Zc(()=>{this.childrenLoaders.delete(r)})),s=new $s(o,()=>new _t).pipe(js());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j5(n,e,t,r){return so(n.loadChildren()).pipe(Ie(zA),yt(i=>i instanceof cl||Array.isArray(i)?me(i):lt(e.compileModuleAsync(i))),Ie(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Nv,[],{optional:!0,self:!0}).flat()),{routes:s.map(Ov),injector:o}}))}function $5(n){return n&&typeof n=="object"&&"default"in n}function zA(n){return $5(n)?n.default:n}var kv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>K(H5),providedIn:"root"})}return n})(),H5=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),z5=new ne("");var q5=new ne(""),G5=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new _t;transitionAbortSubject=new _t;configLoader=K(B5);environmentInjector=K(Rn);urlSerializer=K(Dv);rootContexts=K(If);location=K(hi);inputBindingEnabled=K(Mv,{optional:!0})!==null;titleStrategy=K(HA);options=K(Rv,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=K(kv);createViewTransition=K(z5,{optional:!0});navigationErrorHandler=K(q5,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>me(void 0);rootComponentType=null;constructor(){let t=i=>this.events.next(new dv(i)),r=i=>this.events.next(new hv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(oe(H(H({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Rt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:xl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qn(o=>o.id!==0),Ie(o=>oe(H({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Yn(o=>{let s=!1,a=!1;return me(o).pipe(Yn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Cn.SupersededByNewNavigation),gn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?oe(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload"){let g="";return this.events.next(new Jo(c.id,this.urlSerializer.serialize(c.rawUrl),g,sv.IgnoredSameUrlNavigation)),c.resolve(!1),gn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return me(c).pipe(Yn(g=>{let y=this.transitions?.getValue();return this.events.next(new Rl(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?gn:Promise.resolve(g)}),O5(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),vt(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=oe(H({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new gf(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:g,extractedUrl:y,source:b,restoredState:C,extras:O}=c,R=new Rl(g,this.urlSerializer.serialize(y),b,C);this.events.next(R);let U=RA(this.rootComponentType).snapshot;return this.currentTransition=o=oe(H({},c),{targetSnapshot:U,urlAfterRedirects:y,extras:oe(H({},O),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,me(o)}else{let g="";return this.events.next(new Jo(c.id,this.urlSerializer.serialize(c.extractedUrl),g,sv.IgnoredByUrlHandlingStrategy)),c.resolve(!1),gn}}),vt(c=>{let u=new av(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ie(c=>(this.currentTransition=o=oe(H({},c),{guards:Xj(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),u5(this.environmentInjector,c=>this.events.next(c)),vt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw bf(this.urlSerializer,c.guardsResult);let u=new cv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Qn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Cn.GuardRejected),!1)),ev(c=>{if(c.guards.canActivateChecks.length)return me(c).pipe(vt(u=>{let d=new lv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Yn(u=>{let d=!1;return me(u).pipe(N5(this.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Cn.NoDataFromResolver)}}))}),vt(u=>{let d=new uv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),ev(c=>{let u=d=>{let g=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(d.routeConfig).pipe(vt(y=>{d.component=y}),Ie(()=>{})));for(let y of d.children)g.push(...u(y));return g};return Zd(u(c.targetSnapshot.root)).pipe($i(null),Yr(1))}),ev(()=>this.afterPreactivation()),Yn(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?lt(d).pipe(Ie(()=>o)):me(o)}),Ie(c=>{let u=Kj(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=oe(H({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),vt(()=>{this.events.next(new Nl)}),Jj(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Yr(1),vt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zo(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Bg(this.transitionAbortSubject.pipe(vt(c=>{throw c}))),Zc(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Cn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ji(c=>{if(a=!0,LA(c))this.events.next(new pi(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Zj(c)?this.events.next(new Ca(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Ol(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=tr(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Fl){let{message:g,cancellationCode:y}=bf(this.urlSerializer,d);this.events.next(new pi(o.id,this.urlSerializer.serialize(o.extractedUrl),g,y)),this.events.next(new Ca(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(u),c}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return gn}))}))}cancelNavigationTransition(t,r,i){let o=new pi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W5(n){return n!==xl}var K5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>K(Q5),providedIn:"root"})}return n})(),xv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Q5=(()=>{class n extends xv{static \u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>K(Y5),providedIn:"root"})}return n})(),Y5=(()=>{class n extends qA{location=K(hi);urlSerializer=K(Dv);options=K(Rv,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=K(kv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=RA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Rl)this.stateMemento=this.createStateMemento();else if(t instanceof Jo)this.rawUrlTree=r.initialUrl;else if(t instanceof gf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Nl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof pi&&(t.code===Cn.GuardRejected||t.code===Cn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ol?this.restoreHistory(r,!0):t instanceof Zo&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof mi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=H(H({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=H(H({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Sl||{});function Z5(n,e){n.events.pipe(Qn(t=>t instanceof Zo||t instanceof pi||t instanceof Ol||t instanceof Jo),Ie(t=>t instanceof Zo||t instanceof Jo?Sl.COMPLETE:(t instanceof pi?t.code===Cn.Redirect||t.code===Cn.SupersededByNewNavigation:!1)?Sl.REDIRECTING:Sl.FAILED),Qn(t=>t!==Sl.REDIRECTING),Yr(1)).subscribe(()=>{e()})}var J5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},X5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Tt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=K(Jh);stateManager=K(qA);options=K(Rv,{optional:!0})||{};pendingTasks=K(fa);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=K(G5);urlSerializer=K(Dv);location=K(hi);urlHandlingStrategy=K(kv);_events=new _t;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=K(K5);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=K(Nv,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!K(Mv,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new st;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof pi&&r.code!==Cn.Redirect&&r.code!==Cn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Zo)this.navigated=!0;else if(r instanceof Ca){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||W5(i.source)},s);this.scheduleNavigation(a,xl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}t4(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Ov),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let g;try{let y=i?i.snapshot:this.routerState.snapshot.root;g=DA(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return AA(g,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Pl(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,xl,null,r)}navigate(t,r={skipLocationChange:!1}){return e4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},J5):r===!1?i=H({},X5):i=r,Pl(t))return dA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return dA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((g,y)=>{a=g,c=y});let d=this.pendingTasks.add();return Z5(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function e4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new re(4008,!1)}function t4(n){return!(n instanceof Nl)&&!(n instanceof Ca)}var n4=new ne("");function Sf(n,...e){return an([{provide:Nv,multi:!0,useValue:n},[],{provide:oo,useFactory:r4,deps:[Tt]},{provide:My,multi:!0,useFactory:i4},e.map(t=>t.\u0275providers)])}function r4(n){return n.routerState.root}function i4(){let n=K(bt);return e=>{let t=n.get(Ji);if(e!==t.components[0])return;let r=n.get(Tt),i=n.get(o4);n.get(s4)===1&&r.initialNavigation(),n.get(a4,null,ve.Optional)?.setUpPreloading(),n.get(n4,null,ve.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var o4=new ne("",{factory:()=>new _t}),s4=new ne("",{providedIn:"root",factory:()=>1});var a4=new ne("");var Tf=class n{title="auction-bazar";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&J(0,"router-outlet")},dependencies:[Pv],encapsulation:2})};var tP=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(z(ai),z(vn))};static \u0275dir=Ze({type:n})}return n})(),Ff=(()=>{class n extends tP{static \u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})();static \u0275dir=Ze({type:n,features:[wn]})}return n})(),Pa=new ne("");var c4={provide:Pa,useExisting:er(()=>ln),multi:!0};function l4(){let n=di()?di().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var u4=new ne(""),ln=(()=>{class n extends tP{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!l4())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(z(ai),z(vn),z(u4,8))};static \u0275dir=Ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&B("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[li([c4]),wn]})}return n})();function co(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function nP(n){return n!=null&&typeof n.length=="number"}var Lf=new ne(""),$v=new ne(""),d4=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,be=class{static min(e){return h4(e)}static max(e){return f4(e)}static required(e){return rP(e)}static requiredTrue(e){return p4(e)}static email(e){return m4(e)}static minLength(e){return g4(e)}static maxLength(e){return _4(e)}static pattern(e){return y4(e)}static nullValidator(e){return Df(e)}static compose(e){return lP(e)}static composeAsync(e){return dP(e)}};function h4(n){return e=>{if(co(e.value)||co(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function f4(n){return e=>{if(co(e.value)||co(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function rP(n){return co(n.value)?{required:!0}:null}function p4(n){return n.value===!0?null:{required:!0}}function m4(n){return co(n.value)||d4.test(n.value)?null:{email:!0}}function g4(n){return e=>co(e.value)||!nP(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function _4(n){return e=>nP(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function y4(n){if(!n)return Df;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(co(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Df(n){return null}function iP(n){return n!=null}function oP(n){return Go(n)?lt(n):n}function sP(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function aP(n,e){return e.map(t=>t(n))}function v4(n){return!n.validate}function cP(n){return n.map(e=>v4(e)?e:t=>e.validate(t))}function lP(n){if(!n)return null;let e=n.filter(iP);return e.length==0?null:function(t){return sP(aP(t,e))}}function uP(n){return n!=null?lP(cP(n)):null}function dP(n){if(!n)return null;let e=n.filter(iP);return e.length==0?null:function(t){let r=aP(t,e).map(oP);return kg(r).pipe(Ie(sP))}}function hP(n){return n!=null?dP(cP(n)):null}function GA(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fP(n){return n._rawValidators}function pP(n){return n._rawAsyncValidators}function Fv(n){return n?Array.isArray(n)?n:[n]:[]}function Af(n,e){return Array.isArray(n)?n.includes(e):n===e}function WA(n,e){let t=Fv(e);return Fv(n).forEach(i=>{Af(t,i)||t.push(i)}),t}function KA(n,e){return Fv(e).filter(t=>!Af(n,t))}var Pf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Xo=class extends Pf{name;get formDirective(){return null}get path(){return null}},es=class extends Pf{_parent=null;name=null;valueAccessor=null},Mf=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},w4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Tte=oe(H({},w4),{"[class.ng-submitted]":"isSubmitted"}),Ln=(()=>{class n extends Mf{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(z(es,2))};static \u0275dir=Ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&cn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[wn]})}return n})(),Ir=(()=>{class n extends Mf{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(z(Xo,10))};static \u0275dir=Ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&cn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[wn]})}return n})();var $l="VALID",xf="INVALID",xa="PENDING",Hl="DISABLED",lo=class{},Rf=class extends lo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},zl=class extends lo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},ql=class extends lo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Da=class extends lo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Lv=class extends lo{source;constructor(e){super(),this.source=e}},Vv=class extends lo{source;constructor(e){super(),this.source=e}};function Hv(n){return(Vf(n)?n.validators:n)||null}function b4(n){return Array.isArray(n)?uP(n):n||null}function zv(n,e){return(Vf(e)?e.asyncValidators:n)||null}function E4(n){return Array.isArray(n)?hP(n):n||null}function Vf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function mP(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new re(1e3,"");if(!r[t])throw new re(1001,"")}function gP(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new re(1002,"")})}var Aa=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ui(this.statusReactive)}set status(e){ui(()=>this.statusReactive.set(e))}_status=vl(()=>this.statusReactive());statusReactive=gl(void 0);get valid(){return this.status===$l}get invalid(){return this.status===xf}get pending(){return this.status==xa}get disabled(){return this.status===Hl}get enabled(){return this.status!==Hl}errors;get pristine(){return ui(this.pristineReactive)}set pristine(e){ui(()=>this.pristineReactive.set(e))}_pristine=vl(()=>this.pristineReactive());pristineReactive=gl(!0);get dirty(){return!this.pristine}get touched(){return ui(this.touchedReactive)}set touched(e){ui(()=>this.touchedReactive.set(e))}_touched=vl(()=>this.touchedReactive());touchedReactive=gl(!1);get untouched(){return!this.touched}_events=new _t;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(WA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(KA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(KA(e,this._rawAsyncValidators))}hasValidator(e){return Af(this._rawValidators,e)}hasAsyncValidator(e){return Af(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ql(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ql(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new zl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new zl(!0,r))}markAsPending(e={}){this.status=xa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Da(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(H({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Hl,this.errors=null,this._forEachChild(i=>{i.disable(oe(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rf(this.value,r)),this._events.next(new Da(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$l,this._forEachChild(r=>{r.enable(oe(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$l||this.status===xa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rf(this.value,t)),this._events.next(new Da(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(H({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hl:$l}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=xa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=oP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Da(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new wt,this.statusChanges=new wt}_calculateStatus(){return this._allControlsDisabled()?Hl:this.errors?xf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xa)?xa:this._anyControlsHaveStatus(xf)?xf:$l}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new zl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ql(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=b4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=E4(this._rawAsyncValidators)}},Of=class extends Aa{constructor(e,t,r){super(Hv(t),zv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){gP(this,!0,e),Object.keys(e).forEach(r=>{mP(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Uv=class extends Of{};var Uf=new ne("CallSetDisabledState",{providedIn:"root",factory:()=>Bf}),Bf="always";function _P(n,e){return[...e.path,n]}function Bv(n,e,t=Bf){qv(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),C4(n,e),T4(n,e),S4(n,e),I4(n,e)}function QA(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),kf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Nf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function I4(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function qv(n,e){let t=fP(n);e.validator!==null?n.setValidators(GA(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=pP(n);e.asyncValidator!==null?n.setAsyncValidators(GA(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Nf(e._rawValidators,i),Nf(e._rawAsyncValidators,i)}function kf(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=fP(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=pP(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Nf(e._rawValidators,r),Nf(e._rawAsyncValidators,r),t}function C4(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&yP(n,e)})}function S4(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&yP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function yP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function T4(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function x4(n,e){n==null,qv(n,e)}function D4(n,e){return kf(n,e)}function vP(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function A4(n){return Object.getPrototypeOf(n.constructor)===Ff}function P4(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function wP(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ln?t=o:A4(o)?r=o:i=o}),i||r||t||null}function M4(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function YA(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZA(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Gl=class extends Aa{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Hv(t),zv(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ZA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ZA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var R4=n=>n instanceof Gl;var O4={provide:es,useExisting:er(()=>Gv)},JA=Promise.resolve(),Gv=(()=>{class n extends es{_changeDetectorRef;callSetDisabledState;control=new Gl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new wt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=wP(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),vP(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Bv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){JA.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&yl(r);JA.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?_P(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(z(Xo,9),z(Lf,10),z($v,10),z(Pa,10),z(Wo,8),z(Uf,8))};static \u0275dir=Ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[li([O4]),wn,eo]})}return n})(),Cr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),N4={provide:Pa,useExisting:er(()=>Wv),multi:!0},Wv=(()=>{class n extends Ff{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&B("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[li([N4]),wn]})}return n})();var bP=new ne("");var k4={provide:Xo,useExisting:er(()=>sr)},sr=(()=>{class n extends Xo{callSetDisabledState;get submitted(){return ui(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=vl(()=>this._submittedReactive());_submittedReactive=gl(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new wt;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Bv(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){QA(t.control||null,t,!1),M4(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),P4(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Lv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Vv(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(QA(r||null,t),R4(i)&&(Bv(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);x4(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&D4(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qv(this.form,this),this._oldForm&&kf(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(z(Lf,10),z($v,10),z(Uf,8))};static \u0275dir=Ze({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&B("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[li([k4]),wn,eo]})}return n})();var F4={provide:es,useExisting:er(()=>ar)},ar=(()=>{class n extends es{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new wt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=wP(this,o)}ngOnChanges(t){this._added||this._setUpControl(),vP(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return _P(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(z(Xo,13),z(Lf,10),z($v,10),z(Pa,10),z(bP,8))};static \u0275dir=Ze({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[li([F4]),wn,eo]})}return n})(),L4={provide:Pa,useExisting:er(()=>Sr),multi:!0};function EP(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function V4(n){return n.split(":")[0]}var Sr=(()=>{class n extends Ff{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=EP(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=V4(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&B("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[li([L4]),wn]})}return n})(),Tr=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(EP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(z(vn),z(ai),z(Sr,9))};static \u0275dir=Ze({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),U4={provide:Pa,useExisting:er(()=>IP),multi:!0};function XA(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function B4(n){return n.split(":")[0]}var IP=(()=>{class n extends Ff{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=B4(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&B("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[li([U4]),wn]})}return n})(),xr=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(XA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(XA(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(z(vn),z(ai),z(IP,9))};static \u0275dir=Ze({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var j4=(()=>{class n{_validator=Df;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Df,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,features:[eo]})}return n})();var $4={provide:Lf,useExisting:er(()=>Wl),multi:!0};var Wl=(()=>{class n extends j4{required;inputName="required";normalizeInput=yl;createValidator=t=>rP;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Xh("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[li([$4]),wn]})}return n})();var CP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ro({type:n});static \u0275inj=Xi({})}return n})(),jv=class extends Aa{constructor(e,t,r){super(Hv(t),zv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){gP(this,!1,e),e.forEach((r,i)=>{mP(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function eP(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Vn=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return eP(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Of(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Uv(i,r)}control(t,r,i){let o={};return this.useNonNullable?(eP(r)?o=r:(o.validators=r,o.asyncValidators=i),new Gl(t,oe(H({},o),{nonNullable:!0}))):new Gl(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new jv(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Gl)return t;if(t instanceof Aa)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ma=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Uf,useValue:t.callSetDisabledState??Bf}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ro({type:n});static \u0275inj=Xi({imports:[CP]})}return n})(),un=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Uf,useValue:t.callSetDisabledState??Bf}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ro({type:n});static \u0275inj=Xi({imports:[CP]})}return n})();var Qv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Q=function(n,e){if(!n)throw rs(e)},rs=function(n){return new Error("Firebase Database ("+Qv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var TP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},H4=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},$f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=o>>2,g=(o&3)<<4|a>>4,y=(a&15)<<2|u>>6,b=u&63;c||(b=64,s||(y=64)),r.push(t[d],t[g],t[y],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):H4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||g==null)throw new Yv;let y=o<<2|a>>4;if(r.push(y),u!==64){let b=a<<4&240|u>>2;if(r.push(b),g!==64){let C=u<<6&192|g;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Yv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Jv=function(n){let e=TP(n);return $f.encodeByteArray(e,!0)},Kl=function(n){return Jv(n).replace(/\./g,"")},Ql=function(n){try{return $f.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xP(n){return DP(void 0,n)}function DP(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!z4(t)||(n[t]=DP(n[t],e[t]));return n}function z4(n){return n!=="__proto__"}function q4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var G4=()=>q4().__FIREBASE_DEFAULTS__,W4=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},K4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ql(n[1]);return e&&JSON.parse(e)},Hf=()=>{try{return G4()||W4()||K4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Xv=n=>{var e,t;return(t=(e=Hf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Oa=n=>{let e=Xv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},e0=()=>{var n;return(n=Hf())===null||n===void 0?void 0:n.config},t0=n=>{var e;return(e=Hf())===null||e===void 0?void 0:e[`_${n}`]};var ns=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Na(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Kl(JSON.stringify(t)),Kl(JSON.stringify(s)),""].join(".")}function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yl(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function Q4(){var n;let e=(n=Hf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MP(){let n=xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Dr(){return Qv.NODE_CLIENT===!0||Qv.NODE_ADMIN===!0}function RP(){return!Q4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function n0(){try{return typeof indexedDB=="object"}catch{return!1}}function OP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Y4="FirebaseError",on=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Y4,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_i.prototype.create)}},_i=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Z4(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new on(i,a,r)}};function Z4(n,e){return n.replace(J4,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var J4=/\{\$([^}]+)}/g;function Ra(n){return JSON.parse(n)}function Dt(n){return JSON.stringify(n)}var NP=function(n){let e={},t={},r={},i="";try{let o=n.split(".");e=Ra(Ql(o[0])||""),t=Ra(Ql(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var kP=function(n){let e=NP(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},FP=function(n){let e=NP(n).claims;return typeof e=="object"&&e.admin===!0};function Ar(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function is(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Zl(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jl(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function os(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(SP(o)&&SP(s)){if(!os(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function SP(n){return n!==null&&typeof n=="object"}function ss(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ka(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Fa(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var jf=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)r[g]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let g=0;g<16;g++)r[g]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let g=16;g<80;g++){let y=r[g-3]^r[g-8]^r[g-14]^r[g-16];r[g]=(y<<1|y>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let g=0;g<80;g++){g<40?g<20?(u=a^o&(s^a),d=1518500249):(u=o^s^a,d=1859775393):g<60?(u=o&s|a&(o|s),d=2400959708):(u=o^s^a,d=3395469782);let y=(i<<5|i>>>27)+u+c+d+r[g]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=y}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<t;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<t;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function LP(n,e){let t=new Zv(n,e);return t.subscribe.bind(t)}var Zv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");X4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Kv),i.error===void 0&&(i.error=Kv),i.complete===void 0&&(i.complete=Kv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function X4(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kv(){}function VP(n,e){return`${n} failed: ${e} argument `}var UP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,Q(r<n.length,"Surrogate pair missing trail surrogate.");let s=n.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Xl=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var Ate=4*60*60*1e3;function qe(n){return n&&n._delegate?n._delegate:n}var zt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var as="[DEFAULT]";var qf=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ns;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t3(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:e3(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function e3(n){return n===as?void 0:n}function t3(n){return n.instantiationMode==="EAGER"}var eu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new qf(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var n3=[],Ee=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ee||{}),r3={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},i3=Ee.INFO,o3={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},s3=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=o3[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Pr=class{constructor(e){this.name=e,this._logLevel=i3,this._logHandler=s3,this._userLogHandler=null,n3.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}};var a3=(n,e)=>e.some(t=>n instanceof t),BP,jP;function c3(){return BP||(BP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l3(){return jP||(jP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var $P=new WeakMap,i0=new WeakMap,HP=new WeakMap,r0=new WeakMap,s0=new WeakMap;function u3(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Mr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&$P.set(t,n)}).catch(()=>{}),s0.set(e,n),e}function d3(n){if(i0.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});i0.set(n,e)}var o0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return i0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||HP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zP(n){o0=n(o0)}function h3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Gf(this),e,...t);return HP.set(r,e.sort?e.sort():[e]),Mr(r)}:l3().includes(n)?function(...e){return n.apply(Gf(this),e),Mr($P.get(this))}:function(...e){return Mr(n.apply(Gf(this),e))}}function f3(n){return typeof n=="function"?h3(n):(n instanceof IDBTransaction&&d3(n),a3(n,c3())?new Proxy(n,o0):n)}function Mr(n){if(n instanceof IDBRequest)return u3(n);if(r0.has(n))return r0.get(n);let e=f3(n);return e!==n&&(r0.set(n,e),s0.set(e,n)),e}var Gf=n=>s0.get(n);function GP(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Mr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Mr(s.result),c.oldVersion,c.newVersion,Mr(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var p3=["get","getKey","getAll","getAllKeys","count"],m3=["put","add","delete","clear"],a0=new Map;function qP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(a0.get(e))return a0.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=m3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||p3.includes(t)))return;let o=function(s,...a){return E(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return a0.set(e,o),o}zP(n=>oe(H({},n),{get:(e,t,r)=>qP(e,t)||n.get(e,t,r),has:(e,t)=>!!qP(e,t)||n.has(e,t)}));var l0=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(g3(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function g3(n){let e=n.getComponent();return e?.type==="VERSION"}var u0="@firebase/app",WP="0.10.13";var yi=new Pr("@firebase/app"),_3="@firebase/app-compat",y3="@firebase/analytics-compat",v3="@firebase/analytics",w3="@firebase/app-check-compat",b3="@firebase/app-check",E3="@firebase/auth",I3="@firebase/auth-compat",C3="@firebase/database",S3="@firebase/data-connect",T3="@firebase/database-compat",x3="@firebase/functions",D3="@firebase/functions-compat",A3="@firebase/installations",P3="@firebase/installations-compat",M3="@firebase/messaging",R3="@firebase/messaging-compat",O3="@firebase/performance",N3="@firebase/performance-compat",k3="@firebase/remote-config",F3="@firebase/remote-config-compat",L3="@firebase/storage",V3="@firebase/storage-compat",U3="@firebase/firestore",B3="@firebase/vertexai-preview",j3="@firebase/firestore-compat",$3="firebase",H3="10.14.1";var d0="[DEFAULT]",z3={[u0]:"fire-core",[_3]:"fire-core-compat",[v3]:"fire-analytics",[y3]:"fire-analytics-compat",[b3]:"fire-app-check",[w3]:"fire-app-check-compat",[E3]:"fire-auth",[I3]:"fire-auth-compat",[C3]:"fire-rtdb",[S3]:"fire-data-connect",[T3]:"fire-rtdb-compat",[x3]:"fire-fn",[D3]:"fire-fn-compat",[A3]:"fire-iid",[P3]:"fire-iid-compat",[M3]:"fire-fcm",[R3]:"fire-fcm-compat",[O3]:"fire-perf",[N3]:"fire-perf-compat",[k3]:"fire-rc",[F3]:"fire-rc-compat",[L3]:"fire-gcs",[V3]:"fire-gcs-compat",[U3]:"fire-fst",[j3]:"fire-fst-compat",[B3]:"fire-vertex","fire-js":"fire-js",[$3]:"fire-js-all"};var tu=new Map,q3=new Map,h0=new Map;function KP(n,e){try{n.container.addComponent(e)}catch(t){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Un(n){let e=n.name;if(h0.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;h0.set(e,n);for(let t of tu.values())KP(t,n);for(let t of q3.values())KP(t,n);return!0}function vi(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function cr(n){return n.settings!==void 0}var G3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},uo=new _i("app","Firebase",G3);var f0=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw uo.create("app-deleted",{appName:this._name})}};var Bn=H3;function g0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:d0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw uo.create("bad-app-name",{appName:String(i)});if(t||(t=e0()),!t)throw uo.create("no-options");let o=tu.get(i);if(o){if(os(t,o.options)&&os(r,o.config))return o;throw uo.create("duplicate-app",{appName:i})}let s=new eu(i);for(let c of h0.values())s.addComponent(c);let a=new f0(t,r,s);return tu.set(i,a),a}function Rr(n=d0){let e=tu.get(n);if(!e&&n===d0&&e0())return g0();if(!e)throw uo.create("no-app",{appName:n});return e}function Wf(){return Array.from(tu.values())}function Be(n,e,t){var r;let i=(r=z3[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(a.join(" "));return}Un(new zt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var W3="firebase-heartbeat-database",K3=1,nu="firebase-heartbeat-store",c0=null;function JP(){return c0||(c0=GP(W3,K3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(nu)}catch(t){console.warn(t)}}}}).catch(n=>{throw uo.create("idb-open",{originalErrorMessage:n.message})})),c0}function Q3(n){return E(this,null,function*(){try{let t=(yield JP()).transaction(nu),r=yield t.objectStore(nu).get(XP(n));return yield t.done,r}catch(e){if(e instanceof on)yi.warn(e.message);else{let t=uo.create("idb-get",{originalErrorMessage:e?.message});yi.warn(t.message)}}})}function QP(n,e){return E(this,null,function*(){try{let r=(yield JP()).transaction(nu,"readwrite");yield r.objectStore(nu).put(e,XP(n)),yield r.done}catch(t){if(t instanceof on)yi.warn(t.message);else{let r=uo.create("idb-set",{originalErrorMessage:t?.message});yi.warn(r.message)}}})}function XP(n){return`${n.name}!${n.options.appId}`}var Y3=1024,Z3=30*24*60*60*1e3,p0=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new m0(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=YP();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=Z3}),this._storage.overwrite(this._heartbeatsCache))}catch(r){yi.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=YP(),{heartbeatsToSend:r,unsentEntries:i}=J3(this._heartbeatsCache.heartbeats),o=Kl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return yi.warn(t),""}})}};function YP(){return new Date().toISOString().substring(0,10)}function J3(n,e=Y3){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ZP(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ZP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var m0=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return n0()?OP().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Q3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return QP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return QP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function ZP(n){return Kl(JSON.stringify({version:2,heartbeats:n})).length}function X3(n){Un(new zt("platform-logger",e=>new l0(e),"PRIVATE")),Un(new zt("heartbeat",e=>new p0(e),"PRIVATE")),Be(u0,WP,n),Be(u0,WP,"esm2017"),Be("fire-js","")}X3("");var e$="firebase",t$="10.14.1";Be(e$,t$,"app");var lr=new ri("ANGULARFIRE2_VERSION");function ho(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var wi=(n,e)=>{let t=e?[e]:Wf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Or=class{constructor(){return wi(n$)}},n$="app-check";function La(){}var Kf=class{zone;delegate;constructor(e,t=Mg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},_0=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",La,{},La,La)),t.pipe(vt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Nr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Kf(Zone.current)),this.insideAngular=t.run(()=>new Kf(Zone.current,Pg)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Ce(Ve))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qf(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function r$(n){return Qf().ngZone.runOutsideAngular(()=>n())}function cs(n){return Qf().ngZone.run(()=>n())}function i$(n){return o$(Qf())(n)}function o$(n){return function(t){return t=t.lift(new _0(n.ngZone)),t.pipe(Bi(n.outsideAngular),Ui(n.insideAngular))}}var s$=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),cs(()=>n.apply(void 0,r))},tt=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=cs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",La,{},La,La))),r[o]=s$(r[o],t));let i=r$(()=>n.apply(this,r));if(!e)if(i instanceof Ae){let o=Qf();return i.pipe(Bi(o.outsideAngular),Ui(o.insideAngular))}else return cs(()=>i);return i instanceof Ae?i.pipe(i$):i instanceof Promise?cs(()=>new Promise((o,s)=>i.then(a=>cs(()=>o(a)),a=>cs(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:cs(()=>i)};var Sn=class{constructor(e){return e}},ur=class{constructor(){return Wf()}};function a$(n){return n&&n.length===1?n[0]:new Sn(Rr())}var y0=new ne("angularfire2._apps"),c$={provide:Sn,useFactory:a$,deps:[[new Ye,y0]]},l$={provide:ur,deps:[[new Ye,y0]]};function u$(n){return(e,t)=>{let r=t.get(no);Be("angularfire",lr.full,"core"),Be("angularfire",lr.full,"app"),Be("angular",FD.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Sn(i)}}function e1(n,...e){return an([c$,l$,{provide:y0,useFactory:u$(n),multi:!0,deps:[Ve,bt,Nr,...e]}])}var t1=tt(g0,!0);function y1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var v1=y1,w1=new _i("auth","Firebase",y1());var tp=new Pr("@firebase/auth");function d$(n,...e){tp.logLevel<=Ee.WARN&&tp.warn(`Auth (${Bn}): ${n}`,...e)}function Zf(n,...e){tp.logLevel<=Ee.ERROR&&tp.error(`Auth (${Bn}): ${n}`,...e)}function Fr(n,...e){throw B0(n,...e)}function ls(n,...e){return B0(n,...e)}function b1(n,e,t){let r=Object.assign(Object.assign({},v1()),{[e]:t});return new _i("auth","Firebase",r).create(e,{appName:n.name})}function Ii(n){return b1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function B0(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return w1.create(n,...e)}function se(n,e,...t){if(!n)throw B0(e,...t)}function bi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Zf(e),new Error(e)}function po(n,e){n||bi(e)}function E0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function h$(){return n1()==="http:"||n1()==="https:"}function n1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function f$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h$()||PP()||"connection"in navigator)?navigator.onLine:!0}function p$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var us=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,po(t>e,"Short delay should be less than long delay!"),this.isMobile=Yl()||zf()}get(){return f$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function j0(n,e){po(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var np=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var m$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var g$=new us(3e4,6e4);function Lr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Vr(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){return E1(n,i,()=>E(this,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let g=ss(Object.assign({key:n.config.apiKey},d)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let b=Object.assign({method:e,headers:y},u);return AP()||(b.referrerPolicy="no-referrer"),np.fetch()(I1(n,n.config.apiHost,t,g),b)}))})}function E1(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},m$),e);try{let i=new I0(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Yf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yf(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Yf(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Yf(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw b1(n,d,u);Fr(n,d)}}catch(i){if(i instanceof on)throw i;Fr(n,"network-request-failed",{message:String(i)})}})}function uu(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){let u=yield Vr(n,e,t,r,i);return"mfaPendingCredential"in u&&Fr(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function I1(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?j0(n.config,i):`${n.config.apiScheme}://${i}`}function _$(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var I0=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ls(this.auth,"network-request-failed")),g$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Yf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ls(n,e,r);return i.customData._tokenResponse=t,i}function r1(n){return n!==void 0&&n.enterprise!==void 0}var C0=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _$(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function y$(n,e){return E(this,null,function*(){return Vr(n,"GET","/v2/recaptchaConfig",Lr(n,e))})}function v$(n,e){return E(this,null,function*(){return Vr(n,"POST","/v1/accounts:delete",e)})}function C1(n,e){return E(this,null,function*(){return Vr(n,"POST","/v1/accounts:lookup",e)})}function ru(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $0(n,e=!1){return E(this,null,function*(){let t=qe(n),r=yield t.getIdToken(e),i=H0(r);se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ru(v0(i.auth_time)),issuedAtTime:ru(v0(i.iat)),expirationTime:ru(v0(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function v0(n){return Number(n)*1e3}function H0(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Zf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ql(t);return i?JSON.parse(i):(Zf("Failed to decode base64 JWT payload"),null)}catch(i){return Zf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function i1(n){let e=H0(n);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ou(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof on&&w$(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function w$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var S0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var su=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rp(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield ou(n,C1(t,{idToken:r}));se(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?S1(o.providerUserInfo):[],a=b$(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new su(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,g)})}function z0(n){return E(this,null,function*(){let e=qe(n);yield rp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function b$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function S1(n){return n.map(e=>{var{providerId:t}=e,r=Rg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function E$(n,e){return E(this,null,function*(){let t=yield E1(n,{},()=>E(this,null,function*(){let r=ss({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=I1(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",np.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function I$(n,e){return E(this,null,function*(){return Vr(n,"POST","/v2/accounts:revokeToken",Lr(n,e))})}var iu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){se(e.length!==0,"internal-error");let t=i1(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield E$(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(se(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(se(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return bi("not implemented")}};function fo(n,e){se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Va=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Rg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new S0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new su(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield ou(this,this.stsTokenManager.getToken(this.auth,e));return se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return $0(this,e)}reload(){return z0(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield rp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(cr(this.auth.app))return Promise.reject(Ii(this.auth));let e=yield this.getIdToken();return yield ou(this,v$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,b=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=t.photoURL)!==null&&s!==void 0?s:void 0,O=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,U=(u=t.createdAt)!==null&&u!==void 0?u:void 0,j=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:V,emailVerified:X,isAnonymous:_e,providerData:te,stsTokenManager:x}=t;se(V&&x,e,"internal-error");let I=iu.fromJSON(this.name,x);se(typeof V=="string",e,"internal-error"),fo(g,e.name),fo(y,e.name),se(typeof X=="boolean",e,"internal-error"),se(typeof _e=="boolean",e,"internal-error"),fo(b,e.name),fo(C,e.name),fo(O,e.name),fo(R,e.name),fo(U,e.name),fo(j,e.name);let S=new n({uid:V,auth:e,email:y,emailVerified:X,displayName:g,isAnonymous:_e,photoURL:C,phoneNumber:b,tenantId:O,stsTokenManager:I,createdAt:U,lastLoginAt:j});return te&&Array.isArray(te)&&(S.providerData=te.map(D=>Object.assign({},D))),R&&(S._redirectEventId=R),S}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new iu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield rp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];se(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?S1(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new iu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new su(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var o1=new Map;function Ei(n){po(n instanceof Function,"Expected a class definition");let e=o1.get(n);return e?(po(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,o1.set(n,e),e)}var C$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),T0=C$;function Jf(n,e,t){return`firebase:${n}:${e}:${t}`}var ip=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Jf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Jf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Va._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(Ei(T0),e,r);let i=(yield Promise.all(t.map(u=>E(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Ei(T0),s=Jf(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(s);if(d){let g=Va._fromJSON(e,d);u!==o&&(a=g),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>E(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function s1(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M1(e))return"Blackberry";if(R1(e))return"Webos";if(x1(e))return"Safari";if((e.includes("chrome/")||D1(e))&&!e.includes("edge/"))return"Chrome";if(P1(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function T1(n=xt()){return/firefox\//i.test(n)}function x1(n=xt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D1(n=xt()){return/crios\//i.test(n)}function A1(n=xt()){return/iemobile/i.test(n)}function P1(n=xt()){return/android/i.test(n)}function M1(n=xt()){return/blackberry/i.test(n)}function R1(n=xt()){return/webos/i.test(n)}function q0(n=xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function S$(n=xt()){var e;return q0(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function T$(){return MP()&&document.documentMode===10}function O1(n=xt()){return q0(n)||P1(n)||R1(n)||M1(n)||/windows phone/i.test(n)||A1(n)}function N1(n,e=[]){let t;switch(n){case"Browser":t=s1(xt());break;case"Worker":t=`${s1(xt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bn}/${r}`}var x0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function x$(t){return E(this,arguments,function*(n,e={}){return Vr(n,"GET","/v2/passwordPolicy",Lr(n,e))})}var D$=6,D0=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:D$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var A0=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new op(this),this.idTokenSubscription=new op(this),this.beforeStateQueue=new x0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ei(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ip.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield C1(this,{idToken:e}),r=yield Va._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(cr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield rp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=p$()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(cr(this.app))return Promise.reject(Ii(this));let t=e?qe(e):null;return t&&se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return cr(this.app)?Promise.reject(Ii(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return cr(this.app)?Promise.reject(Ii(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Ei(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield x$(this),t=new D0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _i("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield I$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ei(e)||this._popupRedirectResolver;se(t,this,"argument-error"),this.redirectPersistenceManager=yield ip.create(this,[Ei(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&d$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function mo(n){return qe(n)}var op=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=LP(t=>this.observer=t)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var fp={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A$(n){fp=n}function k1(n){return fp.loadJS(n)}function P$(){return fp.recaptchaEnterpriseScript}function M$(){return fp.gapiScript}function F1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var R$="recaptcha-enterprise",O$="NO_RECAPTCHA",P0=class{constructor(e){this.type=R$,this.auth=mo(e)}verify(e="verify",t=!1){return E(this,null,function*(){function r(o){return E(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>E(this,null,function*(){y$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new C0(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;r1(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(O$)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&r1(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=P$();c.length!==0&&(c+=a),k1(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function a1(n,e,t,r=!1){return E(this,null,function*(){let i=new P0(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function sp(n,e,t,r){return E(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield a1(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>E(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield a1(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function G0(n,e){let t=vi(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(os(o,e??{}))return i;Fr(i,"already-initialized")}return t.initialize({options:e})}function N$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ei);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function W0(n,e,t){let r=mo(n);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=L1(e),{host:s,port:a}=k$(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||F$()}function L1(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function k$(n){let e=L1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:c1(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:c1(s)}}}function c1(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function F$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var au=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,t){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}};function L$(n,e){return E(this,null,function*(){return Vr(n,"POST","/v1/accounts:resetPassword",Lr(n,e))})}function V$(n,e){return E(this,null,function*(){return Vr(n,"POST","/v1/accounts:signUp",e)})}function U$(n,e){return E(this,null,function*(){return uu(n,"POST","/v1/accounts:signInWithPassword",Lr(n,e))})}function B$(n,e){return E(this,null,function*(){return Vr(n,"POST","/v1/accounts:sendOobCode",Lr(n,e))})}function j$(n,e){return E(this,null,function*(){return B$(n,e)})}function $$(n,e){return E(this,null,function*(){return uu(n,"POST","/v1/accounts:signInWithEmailLink",Lr(n,e))})}function H$(n,e){return E(this,null,function*(){return uu(n,"POST","/v1/accounts:signInWithEmailLink",Lr(n,e))})}var cu=class n extends au{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return E(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sp(e,t,"signInWithPassword",U$);case"emailLink":return $$(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}})}_linkToIdToken(e,t){return E(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sp(e,r,"signUpPassword",V$);case"emailLink":return H$(e,{idToken:t,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function w0(n,e){return E(this,null,function*(){return uu(n,"POST","/v1/accounts:signInWithIdp",Lr(n,e))})}function z$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function q$(n){let e=ka(Fa(n)).link,t=e?ka(Fa(e)).deep_link_id:null,r=ka(Fa(n)).deep_link_id;return(r?ka(Fa(r)).link:null)||r||t||e||n}var ap=class n{constructor(e){var t,r,i,o,s,a;let c=ka(Fa(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,g=z$((i=c.mode)!==null&&i!==void 0?i:null);se(u&&d&&g,"argument-error"),this.apiKey=u,this.operation=g,this.code=d,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=q$(e);try{return new n(t)}catch{return null}}};var V1=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return cu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ap.parseLink(r);return se(i,"argument-error"),cu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),cp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var M0=class extends cp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function G$(n,e){return E(this,null,function*(){return uu(n,"POST","/v1/accounts:signUp",Lr(n,e))})}var Ua=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let o=yield Va._fromIdTokenResponse(e,r,i),s=l1(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=l1(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function l1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var R0=class n extends on{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function U1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?R0._fromErrorAndOperation(n,o,e,r):o})}function W$(n,e,t=!1){return E(this,null,function*(){let r=yield ou(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ua._forOperation(n,"link",r)})}function K$(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(cr(r.app))return Promise.reject(Ii(r));let i="reauthenticate";try{let o=yield ou(n,U1(r,i,e,n),t);se(o.idToken,r,"internal-error");let s=H0(o.idToken);se(s,r,"internal-error");let{sub:a}=s;return se(n.uid===a,r,"user-mismatch"),Ua._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fr(r,"user-mismatch"),o}})}function B1(n,e,t=!1){return E(this,null,function*(){if(cr(n.app))return Promise.reject(Ii(n));let r="signIn",i=yield U1(n,r,e),o=yield Ua._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function K0(n,e){return E(this,null,function*(){return B1(mo(n),e)})}function Q$(n,e,t){var r;se(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),se(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(se(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(se(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function Q0(n){return E(this,null,function*(){let e=mo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Y0(n,e,t){return E(this,null,function*(){let r=mo(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Q$(r,i,t),yield sp(r,i,"getOobCode",j$)})}function Z0(n,e,t){return E(this,null,function*(){yield L$(qe(n),{oobCode:e,newPassword:t}).catch(r=>E(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Q0(n),r}))})}function J0(n,e,t){return E(this,null,function*(){if(cr(n.app))return Promise.reject(Ii(n));let r=mo(n),s=yield sp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",G$).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Q0(n),c}),a=yield Ua._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function X0(n,e,t){return cr(n.app)?Promise.reject(Ii(n)):K0(qe(n),V1.credential(e,t)).catch(r=>E(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Q0(n),r}))}function ew(n,e,t,r){return qe(n).onIdTokenChanged(e,t,r)}function tw(n,e,t){return qe(n).beforeAuthStateChanged(e,t)}var lp="__sak";var up=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lp,"1"),this.storage.removeItem(lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Y$=1e3,Z$=10,J$=(()=>{class n extends up{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);T$()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Z$):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Y$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield Li(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield Li(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield Li(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),j1=J$;var X$=(()=>{class n extends up{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),nw=X$;function eH(n){return Promise.all(n.map(e=>E(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var tH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>E(this,null,function*(){return d(r.origin,s)})),u=yield eH(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function $1(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var O0=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=$1("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){let y=g;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function kr(){return window}function nH(n){kr().location.href=n}function H1(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}function rH(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function iH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function oH(){return H1()?self:null}var z1="firebaseLocalStorageDb",sH=1,dp="firebaseLocalStorage",q1="fbase_key",ds=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function pp(n,e){return n.transaction([dp],e?"readwrite":"readonly").objectStore(dp)}function aH(){let n=indexedDB.deleteDatabase(z1);return new ds(n).toPromise()}function N0(){let n=indexedDB.open(z1,sH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(dp,{keyPath:q1})}catch(i){t(i)}}),n.addEventListener("success",()=>E(this,null,function*(){let r=n.result;r.objectStoreNames.contains(dp)?e(r):(r.close(),yield aH(),e(yield N0()))}))})}function u1(n,e,t){return E(this,null,function*(){let r=pp(n,!0).put({[q1]:e,value:t});return new ds(r).toPromise()})}function cH(n,e){return E(this,null,function*(){let t=pp(n,!1).get(e),r=yield new ds(t).toPromise();return r===void 0?null:r.value})}function d1(n,e){let t=pp(n,!0).delete(e);return new ds(t).toPromise()}var lH=800,uH=3,dH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield N0(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>uH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return H1()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=tH._getInstance(oH()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield rH(),!this.activeServiceWorker)return;this.sender=new O0(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||iH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield N0();return yield u1(t,lp,"1"),yield d1(t,lp),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>u1(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>cH(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>d1(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(o=>{let s=pp(o,!1).getAll();return new ds(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),lH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),G1=dH;var Ene=F1("rcb"),Ine=new us(3e4,6e4);function hH(n,e){return e?Ei(e):(se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var lu=class extends au{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return w0(e,this._buildIdpRequest())}_linkToIdToken(e,t){return w0(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return w0(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function fH(n){return B1(n.auth,new lu(n),n.bypassAuthState)}function pH(n){let{auth:e,user:t}=n;return se(t,e,"internal-error"),K$(t,new lu(n),n.bypassAuthState)}function mH(n){return E(this,null,function*(){let{auth:e,user:t}=n;return se(t,e,"internal-error"),W$(t,new lu(n),n.bypassAuthState)})}var k0=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fH;case"linkViaPopup":case"linkViaRedirect":return mH;case"reauthViaPopup":case"reauthViaRedirect":return pH;default:Fr(this.auth,"internal-error")}}resolve(e){po(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){po(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Cne=new us(2e3,1e4);var gH="pendingRedirect",Xf=new Map,F0=class n extends k0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Xf.get(this.auth._key());if(!e){try{let r=(yield _H(this.resolver,this.auth))?yield Li(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xf.set(this.auth._key(),e)}return this.bypassAuthState||Xf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return Li(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Li(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function _H(n,e){return E(this,null,function*(){let t=wH(e),r=vH(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function yH(n,e){Xf.set(n._key(),e)}function vH(n){return Ei(n._redirectPersistence)}function wH(n){return Jf(gH,n.config.apiKey,n.name)}function bH(n,e,t=!1){return E(this,null,function*(){if(cr(n.app))return Promise.reject(Ii(n));let r=mo(n),i=hH(r,e),s=yield new F0(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var EH=10*60*1e3,L0=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!W1(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ls(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EH&&this.cachedEventUids.clear(),this.cachedEventUids.has(h1(e))}saveEventToCache(e){this.cachedEventUids.add(h1(e)),this.lastProcessedEventTime=Date.now()}};function h1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function W1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function IH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W1(n);default:return!1}}function CH(t){return E(this,arguments,function*(n,e={}){return Vr(n,"GET","/v1/projects",e)})}var SH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TH=/^https?/;function xH(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield CH(n);for(let t of e)try{if(DH(t))return}catch{}Fr(n,"unauthorized-domain")})}function DH(n){let e=E0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!TH.test(t))return!1;if(SH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var AH=new us(3e4,6e4);function f1(){let n=kr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function PH(n){return new Promise((e,t)=>{var r,i,o;function s(){f1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f1(),t(ls(n,"network-request-failed"))},timeout:AH.get()})}if(!((i=(r=kr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=kr().gapi)===null||o===void 0)&&o.load)s();else{let a=F1("iframefcb");return kr()[a]=()=>{gapi.load?s():t(ls(n,"network-request-failed"))},k1(`${M$()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw ep=null,e})}var ep=null;function MH(n){return ep=ep||PH(n),ep}var RH=new us(5e3,15e3),OH="__/auth/iframe",NH="emulator/auth/iframe",kH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LH(n){let e=n.config;se(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?j0(e,NH):`https://${n.config.authDomain}/${OH}`,r={apiKey:e.apiKey,appName:n.name,v:Bn},i=FH.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ss(r).slice(1)}`}function VH(n){return E(this,null,function*(){let e=yield MH(n),t=kr().gapi;return se(t,n,"internal-error"),e.open({where:document.body,url:LH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kH,dontclear:!0},r=>new Promise((i,o)=>E(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ls(n,"network-request-failed"),a=kr().setTimeout(()=>{o(s)},RH.get());function c(){kr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var UH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BH=500,jH=600,$H="_blank",HH="http://localhost",hp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function zH(n,e,t,r=BH,i=jH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},UH),{width:r.toString(),height:i.toString(),top:o,left:s}),u=xt().toLowerCase();t&&(a=D1(u)?$H:t),T1(u)&&(e=e||HH,c.scrollbars="yes");let d=Object.entries(c).reduce((y,[b,C])=>`${y}${b}=${C},`,"");if(S$(u)&&a!=="_self")return qH(e||"",a),new hp(null);let g=window.open(e||"",a,d);se(g,n,"popup-blocked");try{g.focus()}catch{}return new hp(g)}function qH(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var GH="__/auth/handler",WH="emulator/auth/handler",KH=encodeURIComponent("fac");function p1(n,e,t,r,i,o){return E(this,null,function*(){se(n.config.authDomain,n,"auth-domain-config-required"),se(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bn,eventId:i};if(e instanceof cp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Zl(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,g]of Object.entries(o||{}))s[d]=g}if(e instanceof M0){let d=e.getScopes().filter(g=>g!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${KH}=${encodeURIComponent(c)}`:"";return`${QH(n)}?${ss(a).slice(1)}${u}`})}function QH({config:n}){return n.emulator?j0(n,WH):`https://${n.authDomain}/${GH}`}var b0="webStorageSupport",V0=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nw,this._completeRedirectFn=bH,this._overrideRedirectResult=yH}_openPopup(e,t,r,i){return E(this,null,function*(){var o;po((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield p1(e,t,r,E0(),i);return zH(e,s,$1())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield p1(e,t,r,E0(),i);return nH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(po(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield VH(e),r=new L0(e);return t.register("authEvent",i=>(se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(b0,{type:b0},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[b0];s!==void 0&&t(!!s),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return O1()||x1()||q0()}},K1=V0;var m1="@firebase/auth",g1="1.7.9";var U0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function YH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZH(n){Un(new zt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;se(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N1(n)},u=new A0(r,i,o,c);return N$(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Un(new zt("auth-internal",e=>{let t=mo(e.getProvider("auth").getImmediate());return(r=>new U0(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Be(m1,g1,YH(n)),Be(m1,g1,"esm2017")}var JH=5*60,XH=t0("authIdTokenMaxAge")||JH,_1=null,ez=n=>e=>E(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>XH)return;let i=t?.token;_1!==i&&(_1=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function rw(n=Rr()){let e=vi(n,"auth");if(e.isInitialized())return e.getImmediate();let t=G0(n,{popupRedirectResolver:K1,persistence:[G1,j1,nw]}),r=t0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=ez(o.toString());tw(t,s,()=>s(t.currentUser)),ew(t,a=>s(a))}}let i=Xv("auth");return i&&W0(t,`http://${i}`),t}function tz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}A$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ls("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",tz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZH("Browser");var Q1="auth",Nt=class{constructor(e){return e}},Ci=class{constructor(){return wi(Q1)}};var iw=new ne("angularfire2.auth-instances");function zz(n,e){let t=ho(Q1,n,e);return t&&new Nt(t)}function qz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Nt(r)}}var Gz={provide:Ci,deps:[[new Ye,iw]]},Wz={provide:Nt,useFactory:zz,deps:[[new Ye,iw],Sn]};function Y1(n,...e){return Be("angularfire",lr.full,"auth"),an([Wz,Gz,{provide:iw,useFactory:qz(n),multi:!0,deps:[Ve,bt,Nr,ur,[new Ye,Or],...e]}])}var Z1=tt(Z0,!0);var J1=tt(J0,!0);var X1=tt(rw,!0);var eM=tt(Y0,!0);var mp=tt(X0,!0);var tM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nM={};var go,ow;(function(){var n;function e(x,I){function S(){}S.prototype=I.prototype,x.D=I.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(D,A,M){for(var T=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)T[Gr-2]=arguments[Gr];return I.prototype[A].apply(D,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,I,S){S||(S=0);var D=Array(16);if(typeof I=="string")for(var A=0;16>A;++A)D[A]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(A=0;16>A;++A)D[A]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=x.g[0],S=x.g[1],A=x.g[2];var M=x.g[3],T=I+(M^S&(A^M))+D[0]+3614090360&4294967295;I=S+(T<<7&4294967295|T>>>25),T=M+(A^I&(S^A))+D[1]+3905402710&4294967295,M=I+(T<<12&4294967295|T>>>20),T=A+(S^M&(I^S))+D[2]+606105819&4294967295,A=M+(T<<17&4294967295|T>>>15),T=S+(I^A&(M^I))+D[3]+3250441966&4294967295,S=A+(T<<22&4294967295|T>>>10),T=I+(M^S&(A^M))+D[4]+4118548399&4294967295,I=S+(T<<7&4294967295|T>>>25),T=M+(A^I&(S^A))+D[5]+1200080426&4294967295,M=I+(T<<12&4294967295|T>>>20),T=A+(S^M&(I^S))+D[6]+2821735955&4294967295,A=M+(T<<17&4294967295|T>>>15),T=S+(I^A&(M^I))+D[7]+4249261313&4294967295,S=A+(T<<22&4294967295|T>>>10),T=I+(M^S&(A^M))+D[8]+1770035416&4294967295,I=S+(T<<7&4294967295|T>>>25),T=M+(A^I&(S^A))+D[9]+2336552879&4294967295,M=I+(T<<12&4294967295|T>>>20),T=A+(S^M&(I^S))+D[10]+4294925233&4294967295,A=M+(T<<17&4294967295|T>>>15),T=S+(I^A&(M^I))+D[11]+2304563134&4294967295,S=A+(T<<22&4294967295|T>>>10),T=I+(M^S&(A^M))+D[12]+1804603682&4294967295,I=S+(T<<7&4294967295|T>>>25),T=M+(A^I&(S^A))+D[13]+4254626195&4294967295,M=I+(T<<12&4294967295|T>>>20),T=A+(S^M&(I^S))+D[14]+2792965006&4294967295,A=M+(T<<17&4294967295|T>>>15),T=S+(I^A&(M^I))+D[15]+1236535329&4294967295,S=A+(T<<22&4294967295|T>>>10),T=I+(A^M&(S^A))+D[1]+4129170786&4294967295,I=S+(T<<5&4294967295|T>>>27),T=M+(S^A&(I^S))+D[6]+3225465664&4294967295,M=I+(T<<9&4294967295|T>>>23),T=A+(I^S&(M^I))+D[11]+643717713&4294967295,A=M+(T<<14&4294967295|T>>>18),T=S+(M^I&(A^M))+D[0]+3921069994&4294967295,S=A+(T<<20&4294967295|T>>>12),T=I+(A^M&(S^A))+D[5]+3593408605&4294967295,I=S+(T<<5&4294967295|T>>>27),T=M+(S^A&(I^S))+D[10]+38016083&4294967295,M=I+(T<<9&4294967295|T>>>23),T=A+(I^S&(M^I))+D[15]+3634488961&4294967295,A=M+(T<<14&4294967295|T>>>18),T=S+(M^I&(A^M))+D[4]+3889429448&4294967295,S=A+(T<<20&4294967295|T>>>12),T=I+(A^M&(S^A))+D[9]+568446438&4294967295,I=S+(T<<5&4294967295|T>>>27),T=M+(S^A&(I^S))+D[14]+3275163606&4294967295,M=I+(T<<9&4294967295|T>>>23),T=A+(I^S&(M^I))+D[3]+4107603335&4294967295,A=M+(T<<14&4294967295|T>>>18),T=S+(M^I&(A^M))+D[8]+1163531501&4294967295,S=A+(T<<20&4294967295|T>>>12),T=I+(A^M&(S^A))+D[13]+2850285829&4294967295,I=S+(T<<5&4294967295|T>>>27),T=M+(S^A&(I^S))+D[2]+4243563512&4294967295,M=I+(T<<9&4294967295|T>>>23),T=A+(I^S&(M^I))+D[7]+1735328473&4294967295,A=M+(T<<14&4294967295|T>>>18),T=S+(M^I&(A^M))+D[12]+2368359562&4294967295,S=A+(T<<20&4294967295|T>>>12),T=I+(S^A^M)+D[5]+4294588738&4294967295,I=S+(T<<4&4294967295|T>>>28),T=M+(I^S^A)+D[8]+2272392833&4294967295,M=I+(T<<11&4294967295|T>>>21),T=A+(M^I^S)+D[11]+1839030562&4294967295,A=M+(T<<16&4294967295|T>>>16),T=S+(A^M^I)+D[14]+4259657740&4294967295,S=A+(T<<23&4294967295|T>>>9),T=I+(S^A^M)+D[1]+2763975236&4294967295,I=S+(T<<4&4294967295|T>>>28),T=M+(I^S^A)+D[4]+1272893353&4294967295,M=I+(T<<11&4294967295|T>>>21),T=A+(M^I^S)+D[7]+4139469664&4294967295,A=M+(T<<16&4294967295|T>>>16),T=S+(A^M^I)+D[10]+3200236656&4294967295,S=A+(T<<23&4294967295|T>>>9),T=I+(S^A^M)+D[13]+681279174&4294967295,I=S+(T<<4&4294967295|T>>>28),T=M+(I^S^A)+D[0]+3936430074&4294967295,M=I+(T<<11&4294967295|T>>>21),T=A+(M^I^S)+D[3]+3572445317&4294967295,A=M+(T<<16&4294967295|T>>>16),T=S+(A^M^I)+D[6]+76029189&4294967295,S=A+(T<<23&4294967295|T>>>9),T=I+(S^A^M)+D[9]+3654602809&4294967295,I=S+(T<<4&4294967295|T>>>28),T=M+(I^S^A)+D[12]+3873151461&4294967295,M=I+(T<<11&4294967295|T>>>21),T=A+(M^I^S)+D[15]+530742520&4294967295,A=M+(T<<16&4294967295|T>>>16),T=S+(A^M^I)+D[2]+3299628645&4294967295,S=A+(T<<23&4294967295|T>>>9),T=I+(A^(S|~M))+D[0]+4096336452&4294967295,I=S+(T<<6&4294967295|T>>>26),T=M+(S^(I|~A))+D[7]+1126891415&4294967295,M=I+(T<<10&4294967295|T>>>22),T=A+(I^(M|~S))+D[14]+2878612391&4294967295,A=M+(T<<15&4294967295|T>>>17),T=S+(M^(A|~I))+D[5]+4237533241&4294967295,S=A+(T<<21&4294967295|T>>>11),T=I+(A^(S|~M))+D[12]+1700485571&4294967295,I=S+(T<<6&4294967295|T>>>26),T=M+(S^(I|~A))+D[3]+2399980690&4294967295,M=I+(T<<10&4294967295|T>>>22),T=A+(I^(M|~S))+D[10]+4293915773&4294967295,A=M+(T<<15&4294967295|T>>>17),T=S+(M^(A|~I))+D[1]+2240044497&4294967295,S=A+(T<<21&4294967295|T>>>11),T=I+(A^(S|~M))+D[8]+1873313359&4294967295,I=S+(T<<6&4294967295|T>>>26),T=M+(S^(I|~A))+D[15]+4264355552&4294967295,M=I+(T<<10&4294967295|T>>>22),T=A+(I^(M|~S))+D[6]+2734768916&4294967295,A=M+(T<<15&4294967295|T>>>17),T=S+(M^(A|~I))+D[13]+1309151649&4294967295,S=A+(T<<21&4294967295|T>>>11),T=I+(A^(S|~M))+D[4]+4149444226&4294967295,I=S+(T<<6&4294967295|T>>>26),T=M+(S^(I|~A))+D[11]+3174756917&4294967295,M=I+(T<<10&4294967295|T>>>22),T=A+(I^(M|~S))+D[2]+718787259&4294967295,A=M+(T<<15&4294967295|T>>>17),T=S+(M^(A|~I))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,x.g[2]=x.g[2]+A&4294967295,x.g[3]=x.g[3]+M&4294967295}r.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var S=I-this.blockSize,D=this.B,A=this.h,M=0;M<I;){if(A==0)for(;M<=S;)i(this,x,M),M+=this.blockSize;if(typeof x=="string"){for(;M<I;)if(D[A++]=x.charCodeAt(M++),A==this.blockSize){i(this,D),A=0;break}}else for(;M<I;)if(D[A++]=x[M++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=I},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var S=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=S&255,S/=256;for(this.u(x),x=Array(16),I=S=0;4>I;++I)for(var D=0;32>D;D+=8)x[S++]=this.g[I]>>>D&255;return x};function o(x,I){var S=a;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=I(x)}function s(x,I){this.h=I;for(var S=[],D=!0,A=x.length-1;0<=A;A--){var M=x[A]|0;D&&M==I||(S[A]=M,D=!1)}this.g=S}var a={};function c(x){return-128<=x&&128>x?o(x,function(I){return new s([I|0],0>I?-1:0)}):new s([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return g;if(0>x)return R(u(-x));for(var I=[],S=1,D=0;x>=S;D++)I[D]=x/S|0,S*=4294967296;return new s(I,0)}function d(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return R(d(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(I,8)),D=g,A=0;A<x.length;A+=8){var M=Math.min(8,x.length-A),T=parseInt(x.substring(A,A+M),I);8>M?(M=u(Math.pow(I,M)),D=D.j(M).add(u(T))):(D=D.j(S),D=D.add(u(T)))}return D}var g=c(0),y=c(1),b=c(16777216);n=s.prototype,n.m=function(){if(O(this))return-R(this).m();for(var x=0,I=1,S=0;S<this.g.length;S++){var D=this.i(S);x+=(0<=D?D:4294967296+D)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C(this))return"0";if(O(this))return"-"+R(this).toString(x);for(var I=u(Math.pow(x,6)),S=this,D="";;){var A=X(S,I).g;S=U(S,A.j(I));var M=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=A,C(S))return M+D;for(;6>M.length;)M="0"+M;D=M+D}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function C(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function O(x){return x.h==-1}n.l=function(x){return x=U(this,x),O(x)?-1:C(x)?0:1};function R(x){for(var I=x.g.length,S=[],D=0;D<I;D++)S[D]=~x.g[D];return new s(S,~x.h).add(y)}n.abs=function(){return O(this)?R(this):this},n.add=function(x){for(var I=Math.max(this.g.length,x.g.length),S=[],D=0,A=0;A<=I;A++){var M=D+(this.i(A)&65535)+(x.i(A)&65535),T=(M>>>16)+(this.i(A)>>>16)+(x.i(A)>>>16);D=T>>>16,M&=65535,T&=65535,S[A]=T<<16|M}return new s(S,S[S.length-1]&-2147483648?-1:0)};function U(x,I){return x.add(R(I))}n.j=function(x){if(C(this)||C(x))return g;if(O(this))return O(x)?R(this).j(R(x)):R(R(this).j(x));if(O(x))return R(this.j(R(x)));if(0>this.l(b)&&0>x.l(b))return u(this.m()*x.m());for(var I=this.g.length+x.g.length,S=[],D=0;D<2*I;D++)S[D]=0;for(D=0;D<this.g.length;D++)for(var A=0;A<x.g.length;A++){var M=this.i(D)>>>16,T=this.i(D)&65535,Gr=x.i(A)>>>16,Dc=x.i(A)&65535;S[2*D+2*A]+=T*Dc,j(S,2*D+2*A),S[2*D+2*A+1]+=M*Dc,j(S,2*D+2*A+1),S[2*D+2*A+1]+=T*Gr,j(S,2*D+2*A+1),S[2*D+2*A+2]+=M*Gr,j(S,2*D+2*A+2)}for(D=0;D<I;D++)S[D]=S[2*D+1]<<16|S[2*D];for(D=I;D<2*I;D++)S[D]=0;return new s(S,0)};function j(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function V(x,I){this.g=x,this.h=I}function X(x,I){if(C(I))throw Error("division by zero");if(C(x))return new V(g,g);if(O(x))return I=X(R(x),I),new V(R(I.g),R(I.h));if(O(I))return I=X(x,R(I)),new V(R(I.g),I.h);if(30<x.g.length){if(O(x)||O(I))throw Error("slowDivide_ only works with positive integers.");for(var S=y,D=I;0>=D.l(x);)S=_e(S),D=_e(D);var A=te(S,1),M=te(D,1);for(D=te(D,2),S=te(S,2);!C(D);){var T=M.add(D);0>=T.l(x)&&(A=A.add(S),M=T),D=te(D,1),S=te(S,1)}return I=U(x,A.j(I)),new V(A,I)}for(A=g;0<=x.l(I);){for(S=Math.max(1,Math.floor(x.m()/I.m())),D=Math.ceil(Math.log(S)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),M=u(S),T=M.j(I);O(T)||0<T.l(x);)S-=D,M=u(S),T=M.j(I);C(M)&&(M=y),A=A.add(M),x=U(x,T)}return new V(A,x)}n.A=function(x){return X(this,x).h},n.and=function(x){for(var I=Math.max(this.g.length,x.g.length),S=[],D=0;D<I;D++)S[D]=this.i(D)&x.i(D);return new s(S,this.h&x.h)},n.or=function(x){for(var I=Math.max(this.g.length,x.g.length),S=[],D=0;D<I;D++)S[D]=this.i(D)|x.i(D);return new s(S,this.h|x.h)},n.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),S=[],D=0;D<I;D++)S[D]=this.i(D)^x.i(D);return new s(S,this.h^x.h)};function _e(x){for(var I=x.g.length+1,S=[],D=0;D<I;D++)S[D]=x.i(D)<<1|x.i(D-1)>>>31;return new s(S,x.h)}function te(x,I){var S=I>>5;I%=32;for(var D=x.g.length-S,A=[],M=0;M<D;M++)A[M]=0<I?x.i(M+S)>>>I|x.i(M+S+1)<<32-I:x.i(M+S);return new s(A,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ow=nM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,go=nM.Integer=s}).apply(typeof tM<"u"?tM:typeof self<"u"?self:typeof window<"u"?window:{});var _p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Si={};var sw,Kz,Ba,aw,du,yp,cw,lw,uw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,_){return l==Array.prototype||l==Object.prototype||(l[f]=_.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof _p=="object"&&_p];for(var f=0;f<l.length;++f){var _=l[f];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var _=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var P=l[w];if(!(P in _))break e;_=_[P]}l=l[l.length-1],w=_[l],f=f(w),f!=w&&f!=null&&e(_,l,{configurable:!0,writable:!0,value:f})}}function o(l,f){l instanceof String&&(l+="");var _=0,w=!1,P={next:function(){if(!w&&_<l.length){var N=_++;return{value:f(N,l[N]),done:!1}}return w=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(l){return l||function(){return o(this,function(f,_){return _})}});var s=s||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function u(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function d(l,f,_){return l.call.apply(l.bind,arguments)}function g(l,f,_){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,w),l.apply(f,P)}}return function(){return l.apply(f,arguments)}}function y(l,f,_){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,y.apply(null,arguments)}function b(l,f){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function C(l,f){function _(){}_.prototype=f.prototype,l.aa=f.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(w,P,N){for(var W=Array(arguments.length-2),He=2;He<arguments.length;He++)W[He-2]=arguments[He];return f.prototype[P].apply(w,W)}}function O(l){let f=l.length;if(0<f){let _=Array(f);for(let w=0;w<f;w++)_[w]=l[w];return _}return[]}function R(l,f){for(let _=1;_<arguments.length;_++){let w=arguments[_];if(c(w)){let P=l.length||0,N=w.length||0;l.length=P+N;for(let W=0;W<N;W++)l[P+W]=w[W]}else l.push(w)}}class U{constructor(f,_){this.i=f,this.j=_,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function j(l){return/^[\s\xa0]*$/.test(l)}function V(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function X(l){return X[" "](l),l}X[" "]=function(){};var _e=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function te(l,f,_){for(let w in l)f.call(_,l[w],w,l)}function x(l,f){for(let _ in l)f.call(void 0,l[_],_,l)}function I(l){let f={};for(let _ in l)f[_]=l[_];return f}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,f){let _,w;for(let P=1;P<arguments.length;P++){w=arguments[P];for(_ in w)l[_]=w[_];for(let N=0;N<S.length;N++)_=S[N],Object.prototype.hasOwnProperty.call(w,_)&&(l[_]=w[_])}}function A(l){var f=1;l=l.split(":");let _=[];for(;0<f&&l.length;)_.push(l.shift()),f--;return l.length&&_.push(l.join(":")),_}function M(l){a.setTimeout(()=>{throw l},0)}function T(){var l=Um;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Gr{constructor(){this.h=this.g=null}add(f,_){let w=Dc.get();w.set(f,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Dc=new U(()=>new uk,l=>l.reset());class uk{constructor(){this.next=this.g=this.h=null}set(f,_){this.h=f,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ac,Pc=!1,Um=new Gr,qI=()=>{let l=a.Promise.resolve(void 0);Ac=()=>{l.then(dk)}};var dk=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(_){M(_)}var f=Dc;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Pc=!1};function Oi(){this.s=this.s,this.C=this.C}Oi.prototype.s=!1,Oi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Oi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Vt(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var hk=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let _=()=>{};a.addEventListener("test",_,f),a.removeEventListener("test",_,f)}catch{}return l}();function Mc(l,f){if(Vt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(_e){e:{try{X(f.nodeName);var P=!0;break e}catch{}P=!1}P||(f=null)}}else _=="mouseover"?f=l.fromElement:_=="mouseout"&&(f=l.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:fk[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Mc.aa.h.call(this)}}C(Mc,Vt);var fk={2:"touch",3:"pen",4:"mouse"};Mc.prototype.h=function(){Mc.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Rc="closure_listenable_"+(1e6*Math.random()|0),pk=0;function mk(l,f,_,w,P){this.listener=l,this.proxy=null,this.src=f,this.type=_,this.capture=!!w,this.ha=P,this.key=++pk,this.da=this.fa=!1}function od(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function sd(l){this.src=l,this.g={},this.h=0}sd.prototype.add=function(l,f,_,w,P){var N=l.toString();l=this.g[N],l||(l=this.g[N]=[],this.h++);var W=jm(l,f,w,P);return-1<W?(f=l[W],_||(f.fa=!1)):(f=new mk(f,this.src,N,!!w,P),f.fa=_,l.push(f)),f};function Bm(l,f){var _=f.type;if(_ in l.g){var w=l.g[_],P=Array.prototype.indexOf.call(w,f,void 0),N;(N=0<=P)&&Array.prototype.splice.call(w,P,1),N&&(od(f),l.g[_].length==0&&(delete l.g[_],l.h--))}}function jm(l,f,_,w){for(var P=0;P<l.length;++P){var N=l[P];if(!N.da&&N.listener==f&&N.capture==!!_&&N.ha==w)return P}return-1}var $m="closure_lm_"+(1e6*Math.random()|0),Hm={};function GI(l,f,_,w,P){if(w&&w.once)return KI(l,f,_,w,P);if(Array.isArray(f)){for(var N=0;N<f.length;N++)GI(l,f[N],_,w,P);return null}return _=Wm(_),l&&l[Rc]?l.K(f,_,u(w)?!!w.capture:!!w,P):WI(l,f,_,!1,w,P)}function WI(l,f,_,w,P,N){if(!f)throw Error("Invalid event type");var W=u(P)?!!P.capture:!!P,He=qm(l);if(He||(l[$m]=He=new sd(l)),_=He.add(f,_,w,W,N),_.proxy)return _;if(w=gk(),_.proxy=w,w.src=l,w.listener=_,l.addEventListener)hk||(P=W),P===void 0&&(P=!1),l.addEventListener(f.toString(),w,P);else if(l.attachEvent)l.attachEvent(YI(f.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function gk(){function l(_){return f.call(l.src,l.listener,_)}let f=_k;return l}function KI(l,f,_,w,P){if(Array.isArray(f)){for(var N=0;N<f.length;N++)KI(l,f[N],_,w,P);return null}return _=Wm(_),l&&l[Rc]?l.L(f,_,u(w)?!!w.capture:!!w,P):WI(l,f,_,!0,w,P)}function QI(l,f,_,w,P){if(Array.isArray(f))for(var N=0;N<f.length;N++)QI(l,f[N],_,w,P);else w=u(w)?!!w.capture:!!w,_=Wm(_),l&&l[Rc]?(l=l.i,f=String(f).toString(),f in l.g&&(N=l.g[f],_=jm(N,_,w,P),-1<_&&(od(N[_]),Array.prototype.splice.call(N,_,1),N.length==0&&(delete l.g[f],l.h--)))):l&&(l=qm(l))&&(f=l.g[f.toString()],l=-1,f&&(l=jm(f,_,w,P)),(_=-1<l?f[l]:null)&&zm(_))}function zm(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Rc])Bm(f.i,l);else{var _=l.type,w=l.proxy;f.removeEventListener?f.removeEventListener(_,w,l.capture):f.detachEvent?f.detachEvent(YI(_),w):f.addListener&&f.removeListener&&f.removeListener(w),(_=qm(f))?(Bm(_,l),_.h==0&&(_.src=null,f[$m]=null)):od(l)}}}function YI(l){return l in Hm?Hm[l]:Hm[l]="on"+l}function _k(l,f){if(l.da)l=!0;else{f=new Mc(f,this);var _=l.listener,w=l.ha||l.src;l.fa&&zm(l),l=_.call(w,f)}return l}function qm(l){return l=l[$m],l instanceof sd?l:null}var Gm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wm(l){return typeof l=="function"?l:(l[Gm]||(l[Gm]=function(f){return l.handleEvent(f)}),l[Gm])}function Ut(){Oi.call(this),this.i=new sd(this),this.M=this,this.F=null}C(Ut,Oi),Ut.prototype[Rc]=!0,Ut.prototype.removeEventListener=function(l,f,_,w){QI(this,l,f,_,w)};function Xt(l,f){var _,w=l.F;if(w)for(_=[];w;w=w.F)_.push(w);if(l=l.M,w=f.type||f,typeof f=="string")f=new Vt(f,l);else if(f instanceof Vt)f.target=f.target||l;else{var P=f;f=new Vt(w,l),D(f,P)}if(P=!0,_)for(var N=_.length-1;0<=N;N--){var W=f.g=_[N];P=ad(W,w,!0,f)&&P}if(W=f.g=l,P=ad(W,w,!0,f)&&P,P=ad(W,w,!1,f)&&P,_)for(N=0;N<_.length;N++)W=f.g=_[N],P=ad(W,w,!1,f)&&P}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var _=l.g[f],w=0;w<_.length;w++)od(_[w]);delete l.g[f],l.h--}}this.F=null},Ut.prototype.K=function(l,f,_,w){return this.i.add(String(l),f,!1,_,w)},Ut.prototype.L=function(l,f,_,w){return this.i.add(String(l),f,!0,_,w)};function ad(l,f,_,w){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var P=!0,N=0;N<f.length;++N){var W=f[N];if(W&&!W.da&&W.capture==_){var He=W.listener,Mt=W.ha||W.src;W.fa&&Bm(l.i,W),P=He.call(Mt,w)!==!1&&P}}return P&&!w.defaultPrevented}function ZI(l,f,_){if(typeof l=="function")_&&(l=y(l,_));else if(l&&typeof l.handleEvent=="function")l=y(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function JI(l){l.g=ZI(()=>{l.g=null,l.i&&(l.i=!1,JI(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class yk extends Oi{constructor(f,_){super(),this.m=f,this.l=_,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:JI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oc(l){Oi.call(this),this.h=l,this.g={}}C(Oc,Oi);var XI=[];function eC(l){te(l.g,function(f,_){this.g.hasOwnProperty(_)&&zm(f)},l),l.g={}}Oc.prototype.N=function(){Oc.aa.N.call(this),eC(this)},Oc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Km=a.JSON.stringify,vk=a.JSON.parse,wk=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Qm(){}Qm.prototype.h=null;function tC(l){return l.h||(l.h=l.i())}function nC(){}var Nc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ym(){Vt.call(this,"d")}C(Ym,Vt);function Zm(){Vt.call(this,"c")}C(Zm,Vt);var To={},rC=null;function cd(){return rC=rC||new Ut}To.La="serverreachability";function iC(l){Vt.call(this,To.La,l)}C(iC,Vt);function kc(l){let f=cd();Xt(f,new iC(f))}To.STAT_EVENT="statevent";function oC(l,f){Vt.call(this,To.STAT_EVENT,l),this.stat=f}C(oC,Vt);function en(l){let f=cd();Xt(f,new oC(f,l))}To.Ma="timingevent";function sC(l,f){Vt.call(this,To.Ma,l),this.size=f}C(sC,Vt);function Fc(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Lc(){this.g=!0}Lc.prototype.xa=function(){this.g=!1};function bk(l,f,_,w,P,N){l.info(function(){if(l.g)if(N)for(var W="",He=N.split("&"),Mt=0;Mt<He.length;Mt++){var Fe=He[Mt].split("=");if(1<Fe.length){var Bt=Fe[0];Fe=Fe[1];var jt=Bt.split("_");W=2<=jt.length&&jt[1]=="type"?W+(Bt+"="+Fe+"&"):W+(Bt+"=redacted&")}}else W=null;else W=N;return"XMLHTTP REQ ("+w+") [attempt "+P+"]: "+f+`
`+_+`
`+W})}function Ek(l,f,_,w,P,N,W){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+P+"]: "+f+`
`+_+`
`+N+" "+W})}function Rs(l,f,_,w){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ck(l,_)+(w?" "+w:"")})}function Ik(l,f){l.info(function(){return"TIMEOUT: "+f})}Lc.prototype.info=function(){};function Ck(l,f){if(!l.g)return f;if(!f)return null;try{var _=JSON.parse(f);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var w=_[l];if(!(2>w.length)){var P=w[1];if(Array.isArray(P)&&!(1>P.length)){var N=P[0];if(N!="noop"&&N!="stop"&&N!="close")for(var W=1;W<P.length;W++)P[W]=""}}}}return Km(_)}catch{return f}}var ld={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},aC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jm;function ud(){}C(ud,Qm),ud.prototype.g=function(){return new XMLHttpRequest},ud.prototype.i=function(){return{}},Jm=new ud;function Ni(l,f,_,w){this.j=l,this.i=f,this.l=_,this.R=w||1,this.U=new Oc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cC}function cC(){this.i=null,this.g="",this.h=!1}var lC={},Xm={};function eg(l,f,_){l.L=1,l.v=pd(Wr(f)),l.m=_,l.P=!0,uC(l,null)}function uC(l,f){l.F=Date.now(),dd(l),l.A=Wr(l.v);var _=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),CC(_.i,"t",w),l.C=0,_=l.j.J,l.h=new cC,l.g=$C(l.j,_?f:null,!l.m),0<l.O&&(l.M=new yk(y(l.Y,l,l.g),l.O)),f=l.U,_=l.g,w=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(XI[0]=P.toString()),P=XI);for(var N=0;N<P.length;N++){var W=GI(_,P[N],w||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),kc(),bk(l.i,l.u,l.A,l.l,l.R,l.m)}Ni.prototype.ca=function(l){l=l.target;let f=this.M;f&&Kr(l)==3?f.j():this.Y(l)},Ni.prototype.Y=function(l){try{if(l==this.g)e:{let jt=Kr(this.g);var f=this.g.Ba();let ks=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||MC(this.g)))){this.J||jt!=4||f==7||(f==8||0>=ks?kc(3):kc(2)),tg(this);var _=this.g.Z();this.X=_;t:if(dC(this)){var w=MC(this.g);l="";var P=w.length,N=Kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xo(this),Vc(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<P;f++)this.h.h=!0,l+=this.h.i.decode(w[f],{stream:!(N&&f==P-1)});w.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=_==200,Ek(this.i,this.u,this.A,this.l,this.R,jt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Mt=this.g;if((He=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(He)){var Fe=He;break t}}Fe=null}if(_=Fe)Rs(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ng(this,_);else{this.o=!1,this.s=3,en(12),xo(this),Vc(this);break e}}if(this.P){_=!0;let Wn;for(;!this.J&&this.C<W.length;)if(Wn=Sk(this,W),Wn==Xm){jt==4&&(this.s=4,en(14),_=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==lC){this.s=4,en(15),Rs(this.i,this.l,W,"[Invalid Chunk]"),_=!1;break}else Rs(this.i,this.l,Wn,null),ng(this,Wn);if(dC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||W.length!=0||this.h.h||(this.s=1,en(16),_=!1),this.o=this.o&&_,!_)Rs(this.i,this.l,W,"[Invalid Chunked Response]"),xo(this),Vc(this);else if(0<W.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),cg(Bt),Bt.M=!0,en(11))}}else Rs(this.i,this.l,W,null),ng(this,W);jt==4&&xo(this),this.o&&!this.J&&(jt==4?VC(this.j,this):(this.o=!1,dd(this)))}else $k(this.g),_==400&&0<W.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),xo(this),Vc(this)}}}catch{}finally{}};function dC(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Sk(l,f){var _=l.C,w=f.indexOf(`
`,_);return w==-1?Xm:(_=Number(f.substring(_,w)),isNaN(_)?lC:(w+=1,w+_>f.length?Xm:(f=f.slice(w,w+_),l.C=w+_,f)))}Ni.prototype.cancel=function(){this.J=!0,xo(this)};function dd(l){l.S=Date.now()+l.I,hC(l,l.I)}function hC(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Fc(y(l.ba,l),f)}function tg(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ni.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(Ik(this.i,this.A),this.L!=2&&(kc(),en(17)),xo(this),this.s=2,Vc(this)):hC(this,this.S-l)};function Vc(l){l.j.G==0||l.J||VC(l.j,l)}function xo(l){tg(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,eC(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function ng(l,f){try{var _=l.j;if(_.G!=0&&(_.g==l||rg(_.h,l))){if(!l.K&&rg(_.h,l)&&_.G==3){try{var w=_.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var P=w;if(P[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)vd(_),_d(_);else break e;ag(_),en(18)}}else _.za=P[1],0<_.za-_.T&&37500>P[2]&&_.F&&_.v==0&&!_.C&&(_.C=Fc(y(_.Za,_),6e3));if(1>=mC(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ao(_,11)}else if((l.K||_.g==l)&&vd(_),!j(f))for(P=_.Da.g.parse(f),f=0;f<P.length;f++){let Fe=P[f];if(_.T=Fe[0],Fe=Fe[1],_.G==2)if(Fe[0]=="c"){_.K=Fe[1],_.ia=Fe[2];let Bt=Fe[3];Bt!=null&&(_.la=Bt,_.j.info("VER="+_.la));let jt=Fe[4];jt!=null&&(_.Aa=jt,_.j.info("SVER="+_.Aa));let ks=Fe[5];ks!=null&&typeof ks=="number"&&0<ks&&(w=1.5*ks,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;let Wn=l.g;if(Wn){let bd=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bd){var N=w.h;N.g||bd.indexOf("spdy")==-1&&bd.indexOf("quic")==-1&&bd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(ig(N,N.h),N.h=null))}if(w.D){let lg=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;lg&&(w.ya=lg,Qe(w.I,w.D,lg))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var W=l;if(w.qa=jC(w,w.J?w.ia:null,w.W),W.K){gC(w.h,W);var He=W,Mt=w.L;Mt&&(He.I=Mt),He.B&&(tg(He),dd(He)),w.g=W}else FC(w);0<_.i.length&&yd(_)}else Fe[0]!="stop"&&Fe[0]!="close"||Ao(_,7);else _.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Ao(_,7):sg(_):Fe[0]!="noop"&&_.l&&_.l.ta(Fe),_.v=0)}}kc(4)}catch{}}var Tk=class{constructor(l,f){this.g=l,this.map=f}};function fC(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pC(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function mC(l){return l.h?1:l.g?l.g.size:0}function rg(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function ig(l,f){l.g?l.g.add(f):l.h=f}function gC(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}fC.prototype.cancel=function(){if(this.i=_C(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function _C(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let _ of l.g.values())f=f.concat(_.D);return f}return O(l.i)}function xk(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],_=l.length,w=0;w<_;w++)f.push(l[w]);return f}f=[],_=0;for(w in l)f[_++]=l[w];return f}function Dk(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var _=0;_<l;_++)f.push(_);return f}f=[],_=0;for(let w in l)f[_++]=w;return f}}}function yC(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var _=Dk(l),w=xk(l),P=w.length,N=0;N<P;N++)f.call(void 0,w[N],_&&_[N],l)}var vC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ak(l,f){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var w=l[_].indexOf("="),P=null;if(0<=w){var N=l[_].substring(0,w);P=l[_].substring(w+1)}else N=l[_];f(N,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Do(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Do){this.h=l.h,hd(this,l.j),this.o=l.o,this.g=l.g,fd(this,l.s),this.l=l.l;var f=l.i,_=new jc;_.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),wC(this,_),this.m=l.m}else l&&(f=String(l).match(vC))?(this.h=!1,hd(this,f[1]||"",!0),this.o=Uc(f[2]||""),this.g=Uc(f[3]||"",!0),fd(this,f[4]),this.l=Uc(f[5]||"",!0),wC(this,f[6]||"",!0),this.m=Uc(f[7]||"")):(this.h=!1,this.i=new jc(null,this.h))}Do.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Bc(f,bC,!0),":");var _=this.g;return(_||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Bc(f,bC,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(Bc(_,_.charAt(0)=="/"?Rk:Mk,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",Bc(_,Nk)),l.join("")};function Wr(l){return new Do(l)}function hd(l,f,_){l.j=_?Uc(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function fd(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function wC(l,f,_){f instanceof jc?(l.i=f,kk(l.i,l.h)):(_||(f=Bc(f,Ok)),l.i=new jc(f,l.h))}function Qe(l,f,_){l.i.set(f,_)}function pd(l){return Qe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Uc(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Bc(l,f,_){return typeof l=="string"?(l=encodeURI(l).replace(f,Pk),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Pk(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var bC=/[#\/\?@]/g,Mk=/[#\?:]/g,Rk=/[#\?]/g,Ok=/[#\?@]/g,Nk=/#/g;function jc(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function ki(l){l.g||(l.g=new Map,l.h=0,l.i&&Ak(l.i,function(f,_){l.add(decodeURIComponent(f.replace(/\+/g," ")),_)}))}n=jc.prototype,n.add=function(l,f){ki(this),this.i=null,l=Os(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(f),this.h+=1,this};function EC(l,f){ki(l),f=Os(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function IC(l,f){return ki(l),f=Os(l,f),l.g.has(f)}n.forEach=function(l,f){ki(this),this.g.forEach(function(_,w){_.forEach(function(P){l.call(f,P,w,this)},this)},this)},n.na=function(){ki(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),_=[];for(let w=0;w<f.length;w++){let P=l[w];for(let N=0;N<P.length;N++)_.push(f[w])}return _},n.V=function(l){ki(this);let f=[];if(typeof l=="string")IC(this,l)&&(f=f.concat(this.g.get(Os(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)f=f.concat(l[_])}return f},n.set=function(l,f){return ki(this),this.i=null,l=Os(this,l),IC(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function CC(l,f,_){EC(l,f),0<_.length&&(l.i=null,l.g.set(Os(l,f),O(_)),l.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var _=0;_<f.length;_++){var w=f[_];let N=encodeURIComponent(String(w)),W=this.V(w);for(w=0;w<W.length;w++){var P=N;W[w]!==""&&(P+="="+encodeURIComponent(String(W[w]))),l.push(P)}}return this.i=l.join("&")};function Os(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function kk(l,f){f&&!l.j&&(ki(l),l.i=null,l.g.forEach(function(_,w){var P=w.toLowerCase();w!=P&&(EC(this,w),CC(this,P,_))},l)),l.j=f}function Fk(l,f){let _=new Lc;if(a.Image){let w=new Image;w.onload=b(Fi,_,"TestLoadImage: loaded",!0,f,w),w.onerror=b(Fi,_,"TestLoadImage: error",!1,f,w),w.onabort=b(Fi,_,"TestLoadImage: abort",!1,f,w),w.ontimeout=b(Fi,_,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else f(!1)}function Lk(l,f){let _=new Lc,w=new AbortController,P=setTimeout(()=>{w.abort(),Fi(_,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:w.signal}).then(N=>{clearTimeout(P),N.ok?Fi(_,"TestPingServer: ok",!0,f):Fi(_,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(P),Fi(_,"TestPingServer: error",!1,f)})}function Fi(l,f,_,w,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),w(_)}catch{}}function Vk(){this.g=new wk}function Uk(l,f,_){let w=_||"";try{yC(l,function(P,N){let W=P;u(P)&&(W=Km(P)),f.push(w+N+"="+encodeURIComponent(W))})}catch(P){throw f.push(w+"type="+encodeURIComponent("_badmap")),P}}function $c(l){this.l=l.Ub||null,this.j=l.eb||!1}C($c,Qm),$c.prototype.g=function(){return new md(this.l,this.j)},$c.prototype.i=function(l){return function(){return l}}({});function md(l,f){Ut.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(md,Ut),n=md.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,zc(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hc(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,zc(this)),this.g&&(this.readyState=3,zc(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;SC(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function SC(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Hc(this):zc(this),this.readyState==3&&SC(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Hc(this))},n.Qa=function(l){this.g&&(this.response=l,Hc(this))},n.ga=function(){this.g&&Hc(this)};function Hc(l){l.readyState=4,l.l=null,l.j=null,l.v=null,zc(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var _=f.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=f.next();return l.join(`\r
`)};function zc(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(md.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function TC(l){let f="";return te(l,function(_,w){f+=w,f+=":",f+=_,f+=`\r
`}),f}function og(l,f,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=TC(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):Qe(l,f,_))}function ot(l){Ut.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(ot,Ut);var Bk=/^https?$/i,jk=["POST","PUT"];n=ot.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jm.g(),this.v=this.o?tC(this.o):tC(Jm),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(N){xC(this,N);return}if(l=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var P in w)_.set(P,w[P]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let N of w.keys())_.set(N,w.get(N));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(N=>N.toLowerCase()=="content-type"),P=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jk,f,void 0))||w||P||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,W]of _)this.g.setRequestHeader(N,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{PC(this),this.u=!0,this.g.send(l),this.u=!1}catch(N){xC(this,N)}};function xC(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,DC(l),gd(l)}function DC(l){l.A||(l.A=!0,Xt(l,"complete"),Xt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Xt(this,"complete"),Xt(this,"abort"),gd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gd(this,!0)),ot.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?AC(this):this.bb())},n.bb=function(){AC(this)};function AC(l){if(l.h&&typeof s<"u"&&(!l.v[1]||Kr(l)!=4||l.Z()!=2)){if(l.u&&Kr(l)==4)ZI(l.Ea,0,l);else if(Xt(l,"readystatechange"),Kr(l)==4){l.h=!1;try{let W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var _;if(!(_=f)){var w;if(w=W===0){var P=String(l.D).match(vC)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),w=!Bk.test(P?P.toLowerCase():"")}_=w}if(_)Xt(l,"complete"),Xt(l,"success");else{l.m=6;try{var N=2<Kr(l)?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.Z()+"]",DC(l)}}finally{gd(l)}}}}function gd(l,f){if(l.g){PC(l);let _=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Xt(l,"ready");try{_.onreadystatechange=w}catch{}}}function PC(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Kr(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Kr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),vk(f)}};function MC(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function $k(l){let f={};l=(l.g&&2<=Kr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(j(l[w]))continue;var _=A(l[w]);let P=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let N=f[P]||[];f[P]=N,N.push(_)}x(f,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qc(l,f,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||f}function RC(l){this.Aa=0,this.i=[],this.j=new Lc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qc("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qc("baseRetryDelayMs",5e3,l),this.cb=qc("retryDelaySeedMs",1e4,l),this.Wa=qc("forwardChannelMaxRetries",2,l),this.wa=qc("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new fC(l&&l.concurrentRequestLimit),this.Da=new Vk,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=RC.prototype,n.la=8,n.G=1,n.connect=function(l,f,_,w){en(0),this.W=l,this.H=f||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=jC(this,null,this.W),yd(this)};function sg(l){if(OC(l),l.G==3){var f=l.U++,_=Wr(l.I);if(Qe(_,"SID",l.K),Qe(_,"RID",f),Qe(_,"TYPE","terminate"),Gc(l,_),f=new Ni(l,l.j,f),f.L=2,f.v=pd(Wr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=f.v,_=!0),_||(f.g=$C(f.j,null),f.g.ea(f.v)),f.F=Date.now(),dd(f)}BC(l)}function _d(l){l.g&&(cg(l),l.g.cancel(),l.g=null)}function OC(l){_d(l),l.u&&(a.clearTimeout(l.u),l.u=null),vd(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function yd(l){if(!pC(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ac||qI(),Pc||(Ac(),Pc=!0),Um.add(f,l),l.B=0}}function Hk(l,f){return mC(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Fc(y(l.Ga,l,f),UC(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let P=new Ni(this,this.j,l),N=this.o;if(this.S&&(N?(N=I(N),D(N,this.S)):N=this.S),this.m!==null||this.O||(P.H=N,N=null),this.P)e:{for(var f=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=_;break e}if(f===4096||_===this.i.length-1){f=_+1;break e}}f=1e3}else f=1e3;f=kC(this,P,f),_=Wr(this.I),Qe(_,"RID",l),Qe(_,"CVER",22),this.D&&Qe(_,"X-HTTP-Session-Id",this.D),Gc(this,_),N&&(this.O?f="headers="+encodeURIComponent(String(TC(N)))+"&"+f:this.m&&og(_,this.m,N)),ig(this.h,P),this.Ua&&Qe(_,"TYPE","init"),this.P?(Qe(_,"$req",f),Qe(_,"SID","null"),P.T=!0,eg(P,_,null)):eg(P,_,f),this.G=2}}else this.G==3&&(l?NC(this,l):this.i.length==0||pC(this.h)||NC(this))};function NC(l,f){var _;f?_=f.l:_=l.U++;let w=Wr(l.I);Qe(w,"SID",l.K),Qe(w,"RID",_),Qe(w,"AID",l.T),Gc(l,w),l.m&&l.o&&og(w,l.m,l.o),_=new Ni(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),f&&(l.i=f.D.concat(l.i)),f=kC(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ig(l.h,_),eg(_,w,f)}function Gc(l,f){l.H&&te(l.H,function(_,w){Qe(f,w,_)}),l.l&&yC({},function(_,w){Qe(f,w,_)})}function kC(l,f,_){_=Math.min(l.i.length,_);var w=l.l?y(l.l.Na,l.l,l):null;e:{var P=l.i;let N=-1;for(;;){let W=["count="+_];N==-1?0<_?(N=P[0].g,W.push("ofs="+N)):N=0:W.push("ofs="+N);let He=!0;for(let Mt=0;Mt<_;Mt++){let Fe=P[Mt].g,Bt=P[Mt].map;if(Fe-=N,0>Fe)N=Math.max(0,P[Mt].g-100),He=!1;else try{Uk(Bt,W,"req"+Fe+"_")}catch{w&&w(Bt)}}if(He){w=W.join("&");break e}}}return l=l.i.splice(0,_),f.D=l,w}function FC(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ac||qI(),Pc||(Ac(),Pc=!0),Um.add(f,l),l.v=0}}function ag(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Fc(y(l.Fa,l),UC(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,LC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Fc(y(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),_d(this),LC(this))};function cg(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function LC(l){l.g=new Ni(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Wr(l.qa);Qe(f,"RID","rpc"),Qe(f,"SID",l.K),Qe(f,"AID",l.T),Qe(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Qe(f,"TO",l.ja),Qe(f,"TYPE","xmlhttp"),Gc(l,f),l.m&&l.o&&og(f,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=pd(Wr(f)),_.m=null,_.P=!0,uC(_,l)}n.Za=function(){this.C!=null&&(this.C=null,_d(this),ag(this),en(19))};function vd(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function VC(l,f){var _=null;if(l.g==f){vd(l),cg(l),l.g=null;var w=2}else if(rg(l.h,f))_=f.D,gC(l.h,f),w=1;else return;if(l.G!=0){if(f.o)if(w==1){_=f.m?f.m.length:0,f=Date.now()-f.F;var P=l.B;w=cd(),Xt(w,new sC(w,_)),yd(l)}else FC(l);else if(P=f.s,P==3||P==0&&0<f.X||!(w==1&&Hk(l,f)||w==2&&ag(l)))switch(_&&0<_.length&&(f=l.h,f.i=f.i.concat(_)),P){case 1:Ao(l,5);break;case 4:Ao(l,10);break;case 3:Ao(l,6);break;default:Ao(l,2)}}}function UC(l,f){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*f}function Ao(l,f){if(l.j.info("Error code "+f),f==2){var _=y(l.fb,l),w=l.Xa;let P=!w;w=new Do(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hd(w,"https"),pd(w),P?Fk(w.toString(),_):Lk(w.toString(),_)}else en(2);l.G=0,l.l&&l.l.sa(f),BC(l),OC(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function BC(l){if(l.G=0,l.ka=[],l.l){let f=_C(l.h);(f.length!=0||l.i.length!=0)&&(R(l.ka,f),R(l.ka,l.i),l.h.i.length=0,O(l.i),l.i.length=0),l.l.ra()}}function jC(l,f,_){var w=_ instanceof Do?Wr(_):new Do(_);if(w.g!="")f&&(w.g=f+"."+w.g),fd(w,w.s);else{var P=a.location;w=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;var N=new Do(null);w&&hd(N,w),f&&(N.g=f),P&&fd(N,P),_&&(N.l=_),w=N}return _=l.D,f=l.ya,_&&f&&Qe(w,_,f),Qe(w,"VER",l.la),Gc(l,w),w}function $C(l,f,_){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new ot(new $c({eb:_})):new ot(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function HC(){}n=HC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function wd(){}wd.prototype.g=function(l,f){return new fn(l,f)};function fn(l,f){Ut.call(this),this.g=new RC(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!j(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!j(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Ns(this)}C(fn,Ut),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){sg(this.g)},fn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=Km(l),l=_);f.i.push(new Tk(f.Ya++,l)),f.G==3&&yd(f)},fn.prototype.N=function(){this.g.l=null,delete this.j,sg(this.g),delete this.g,fn.aa.N.call(this)};function zC(l){Ym.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let _ in f){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}C(zC,Ym);function qC(){Zm.call(this),this.status=1}C(qC,Zm);function Ns(l){this.g=l}C(Ns,HC),Ns.prototype.ua=function(){Xt(this.g,"a")},Ns.prototype.ta=function(l){Xt(this.g,new zC(l))},Ns.prototype.sa=function(l){Xt(this.g,new qC)},Ns.prototype.ra=function(){Xt(this.g,"b")},wd.prototype.createWebChannel=wd.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,uw=Si.createWebChannelTransport=function(){return new wd},lw=Si.getStatEventTarget=function(){return cd()},cw=Si.Event=To,yp=Si.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ld.NO_ERROR=0,ld.TIMEOUT=8,ld.HTTP_ERROR=6,du=Si.ErrorCode=ld,aC.COMPLETE="complete",aw=Si.EventType=aC,nC.EventType=Nc,Nc.OPEN="a",Nc.CLOSE="b",Nc.ERROR="c",Nc.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,Ba=Si.WebChannel=nC,Kz=Si.FetchXmlHttpFactory=$c,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,sw=Si.XhrIo=ot}).apply(typeof _p<"u"?_p:typeof self<"u"?self:typeof window<"u"?window:{});var rM="@firebase/firestore";var At=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");var lc="10.14.0";var ps=new Pr("@firebase/firestore");function hu(){return ps.logLevel}function ee(n,...e){if(ps.logLevel<=Ee.DEBUG){let t=e.map(Qb);ps.debug(`Firestore (${lc}): ${n}`,...t)}}function Ti(n,...e){if(ps.logLevel<=Ee.ERROR){let t=e.map(Qb);ps.error(`Firestore (${lc}): ${n}`,...t)}}function Wa(n,...e){if(ps.logLevel<=Ee.WARN){let t=e.map(Qb);ps.warn(`Firestore (${lc}): ${n}`,...t)}}function Qb(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ae(n="Unexpected state"){let e=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: `+n;throw Ti(e),new Error(e)}function ke(n,e){n||ae()}function fe(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Z=class extends on{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $n=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ip=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},pw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(At.UNAUTHENTICATED))}shutdown(){}},mw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},gw=class{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $n,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>E(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $n)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string"),new Ip(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string"),new At(e)}},_w=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},yw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new _w(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ww=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ke(this.o===void 0);let r=o=>{o.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ke(typeof t.token=="string"),this.R=t.token,new vw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Qz(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Cp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Qz(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Le(n,e){return n<e?-1:n>e?1:0}function Ka(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ft=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var he=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ft(0,0))}static max(){return new n(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ae(),r===void 0?r=e.length-t:r>e.length-t&&ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Je=class n extends Sp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Yz=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tn=class n extends Sp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Yz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ie=class n{constructor(e){this.path=e}static fromPath(e){return new n(Je.fromString(e))}static fromName(e){return new n(Je.fromString(e).popFirst(5))}static empty(){return new n(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Je(e.slice()))}};var bw=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};bw.UNKNOWN_ID=-1;function Zz(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new Ft(t+1,0):new Ft(t,r));return new ms(i,ie.empty(),e)}function Jz(n){return new ms(n.readTime,n.key,-1)}var ms=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(he.min(),ie.empty(),-1)}static max(){return new n(he.max(),ie.empty(),-1)}};function Xz(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ie.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}var e6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ew=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ou(n){return E(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==e6)throw n;ee("LocalStore","Unexpectedly lost primary lease")})}var q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function t6(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Nu(n){return n.name==="IndexedDbTransactionError"}var LM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ku(n){return n==null}function vu(n){return n===0&&1/n==-1/0}function n6(n){return typeof n=="number"&&Number.isInteger(n)&&!vu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var r6=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vre=[...r6,"documentOverlays"],i6=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],o6=i6,s6=[...o6,"indexConfiguration","indexState","indexEntries"];var wre=[...s6,"globals"];function iM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ct=class n{constructor(e,t){this.comparator=e,this.root=t||Br.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new za(this.root,e,this.comparator,!1)}getReverseIterator(){return new za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new za(this.root,e,this.comparator,!0)}},za=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Br=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();let e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}};Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1;Br.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Br(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Gt=class n{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tp(this.data.getIterator())}getIteratorFrom(e){return new Tp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Tp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var jn=class n{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Gt(Tn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ka(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var xp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Kt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xp("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Kt.EMPTY_BYTE_STRING=new Kt("");var a6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(n){if(ke(!!n),typeof n=="string"){let e=0,t=a6.exec(n);if(ke(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(n.seconds),nanos:nt(n.nanos)}}function nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wo(n){return typeof n=="string"?Kt.fromBase64String(n):Kt.fromUint8Array(n)}function Yb(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Zb(n){let e=n.mapValue.fields.__previous_value__;return Yb(e)?Zb(e):e}function wu(n){let e=xi(n.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}var Iw=class{constructor(e,t,r,i,o,s,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Dp=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var vp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yb(n)?4:BM(n)?9007199254740991:UM(n)?10:11:ae()}function $r(n,e){if(n===e)return!0;let t=gs(n);if(t!==gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wu(n).isEqual(wu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=xi(i.timestampValue),a=xi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return wo(i.bytesValue).isEqual(wo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return nt(i.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return nt(i.integerValue)===nt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=nt(i.doubleValue),a=nt(o.doubleValue);return s===a?vu(s)===vu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ka(n.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(iM(s)!==iM(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!$r(s[c],a[c])))return!1;return!0}(n,e);default:return ae()}}function bu(n,e){return(n.values||[]).find(t=>$r(t,e))!==void 0}function Qa(n,e){if(n===e)return 0;let t=gs(n),r=gs(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=nt(o.integerValue||o.doubleValue),c=nt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return oM(n.timestampValue,e.timestampValue);case 4:return oM(wu(n),wu(e));case 5:return Le(n.stringValue,e.stringValue);case 6:return function(o,s){let a=wo(o),c=wo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=Le(a[u],c[u]);if(d!==0)return d}return Le(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Le(nt(o.latitude),nt(s.latitude));return a!==0?a:Le(nt(o.longitude),nt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return sM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let g=o.fields||{},y=s.fields||{},b=(a=g.value)===null||a===void 0?void 0:a.arrayValue,C=(c=y.value)===null||c===void 0?void 0:c.arrayValue,O=Le(((u=b?.values)===null||u===void 0?void 0:u.length)||0,((d=C?.values)===null||d===void 0?void 0:d.length)||0);return O!==0?O:sM(b,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===vp.mapValue&&s===vp.mapValue)return 0;if(o===vp.mapValue)return 1;if(s===vp.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let g=0;g<c.length&&g<d.length;++g){let y=Le(c[g],d[g]);if(y!==0)return y;let b=Qa(a[c[g]],u[d[g]]);if(b!==0)return b}return Le(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ae()}}function oM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);let t=xi(n),r=xi(e),i=Le(t.seconds,r.seconds);return i!==0?i:Le(t.nanos,r.nanos)}function sM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Qa(t[i],r[i]);if(o)return o}return Le(t.length,r.length)}function Ya(n){return Cw(n)}function Cw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=xi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return wo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ie.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Cw(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Cw(t.fields[s])}`;return i+"}"}(n.mapValue):ae()}function aM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sw(n){return!!n&&"integerValue"in n}function Jb(n){return!!n&&"arrayValue"in n}function cM(n){return!!n&&"nullValue"in n}function lM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bp(n){return!!n&&"mapValue"in n}function UM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function pu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return bs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var dn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(t)}setAll(e){let t=Tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=pu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());bp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(pu(this.value))}};function jM(n){let e=[];return bs(n.fields,(t,r)=>{let i=new Tn([t]);if(bp(r)){let o=jM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new jn(e)}var Dn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,he.min(),he.min(),he.min(),dn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,he.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,he.min(),he.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,he.min(),he.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Za=class{constructor(e,t){this.position=e,this.inclusive=t}};function uM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ie.comparator(ie.fromName(s.referenceValue),t.key):r=Qa(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function dM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$r(n.position[t],e.position[t]))return!1;return!0}var Ja=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function c6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ap=class{},mt=class n extends Ap{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xw(e,t,r):t==="array-contains"?new Pw(e,r):t==="in"?new Mw(e,r):t==="not-in"?new Rw(e,r):t==="array-contains-any"?new Ow(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Dw(e,r):new Aw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Qa(t,this.value)):t!==null&&gs(this.value)===gs(t)&&this.matchesComparison(Qa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},dr=class n extends Ap{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return $M(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function $M(n){return n.op==="and"}function HM(n){return l6(n)&&$M(n)}function l6(n){for(let e of n.filters)if(e instanceof dr)return!1;return!0}function Tw(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+Ya(n.value);if(HM(n))return n.filters.map(e=>Tw(e)).join(",");{let e=n.filters.map(t=>Tw(t)).join(",");return`${n.op}(${e})`}}function zM(n,e){return n instanceof mt?function(r,i){return i instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&$r(r.value,i.value)}(n,e):n instanceof dr?function(r,i){return i instanceof dr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&zM(s,i.filters[a]),!0):!1}(n,e):void ae()}function qM(n){return n instanceof mt?function(t){return`${t.field.canonicalString()} ${t.op} ${Ya(t.value)}`}(n):n instanceof dr?function(t){return t.op.toString()+" {"+t.getFilters().map(qM).join(" ,")+"}"}(n):"Filter"}var xw=class extends mt{constructor(e,t,r){super(e,t,r),this.key=ie.fromName(r.referenceValue)}matches(e){let t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}},Dw=class extends mt{constructor(e,t){super(e,"in",t),this.keys=GM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Aw=class extends mt{constructor(e,t){super(e,"not-in",t),this.keys=GM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function GM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ie.fromName(r.referenceValue))}var Pw=class extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Jb(t)&&bu(t.arrayValue,this.value)}},Mw=class extends mt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&bu(this.value.arrayValue,t)}},Rw=class extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!bu(this.value.arrayValue,t)}},Ow=class extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Jb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bu(this.value.arrayValue,r))}};var Nw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function hM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Nw(n,e,t,r,i,o,s)}function Xb(n){let e=fe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Tw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ku(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ya(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ya(r)).join(",")),e.ue=t}return e.ue}function eE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dM(n.startAt,e.startAt)&&dM(n.endAt,e.endAt)}function kw(n){return ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var _s=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function u6(n,e,t,r,i,o,s,a){return new _s(n,e,t,r,i,o,s,a)}function tE(n){return new _s(n)}function fM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function WM(n){return n.collectionGroup!==null}function mu(n){let e=fe(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Gt(Tn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ja(o,r))}),t.has(Tn.keyField().canonicalString())||e.ce.push(new Ja(Tn.keyField(),r))}return e.ce}function jr(n){let e=fe(n);return e.le||(e.le=d6(e,mu(n))),e.le}function d6(n,e){if(n.limitType==="F")return hM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ja(i.field,o)});let t=n.endAt?new Za(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Za(n.startAt.position,n.startAt.inclusive):null;return hM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Fw(n,e){let t=n.filters.concat([e]);return new _s(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Lw(n,e,t){return new _s(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function em(n,e){return eE(jr(n),jr(e))&&n.limitType===e.limitType}function KM(n){return`${Xb(jr(n))}|lt:${n.limitType}`}function ja(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>qM(i)).join(", ")}]`),ku(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ya(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ya(i)).join(",")),`Target(${r})`}(jr(n))}; limitType=${n.limitType})`}function tm(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ie.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of mu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=uM(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,mu(r),i)||r.endAt&&!function(s,a,c){let u=uM(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,mu(r),i))}(n,e)}function h6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QM(n){return(e,t)=>{let r=!1;for(let i of mu(n)){let o=f6(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function f6(n,e,t){let r=n.field.isKeyField()?ie.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Qa(c,u):ae()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}var bo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return VM(this.inner)}size(){return this.innerSize}};var p6=new ct(ie.comparator);function Di(){return p6}var YM=new ct(ie.comparator);function fu(...n){let e=YM;for(let t of n)e=e.insert(t.key,t);return e}function ZM(n){let e=YM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function hs(){return gu()}function JM(){return gu()}function gu(){return new bo(n=>n.toString(),(n,e)=>n.isEqual(e))}var m6=new ct(ie.comparator),g6=new Gt(ie.comparator);function xe(...n){let e=g6;for(let t of n)e=e.add(t);return e}var _6=new Gt(Le);function y6(){return _6}function nE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vu(e)?"-0":e}}function XM(n){return{integerValue:""+n}}function v6(n,e){return n6(e)?XM(e):nE(n,e)}var Xa=class{constructor(){this._=void 0}};function w6(n,e,t){return n instanceof ec?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Yb(o)&&(o=Zb(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof ys?tR(n,e):n instanceof vs?nR(n,e):function(i,o){let s=eR(i,o),a=pM(s)+pM(i.Pe);return Sw(s)&&Sw(i.Pe)?XM(a):nE(i.serializer,a)}(n,e)}function b6(n,e,t){return n instanceof ys?tR(n,e):n instanceof vs?nR(n,e):t}function eR(n,e){return n instanceof tc?function(r){return Sw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ec=class extends Xa{},ys=class extends Xa{constructor(e){super(),this.elements=e}};function tR(n,e){let t=rR(e);for(let r of n.elements)t.some(i=>$r(i,r))||t.push(r);return{arrayValue:{values:t}}}var vs=class extends Xa{constructor(e){super(),this.elements=e}};function nR(n,e){let t=rR(e);for(let r of n.elements)t=t.filter(i=>!$r(i,r));return{arrayValue:{values:t}}}var tc=class extends Xa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function pM(n){return nt(n.integerValue||n.doubleValue)}function rR(n){return Jb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function E6(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ys&&i instanceof ys||r instanceof vs&&i instanceof vs?Ka(r.elements,i.elements,$r):r instanceof tc&&i instanceof tc?$r(r.Pe,i.Pe):r instanceof ec&&i instanceof ec}(n.transform,e.transform)}var Vw=class{constructor(e,t){this.version=e,this.transformResults=t}},kt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ep(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var nc=class{};function iR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new rc(n.key,kt.none()):new ws(n.key,n.data,kt.none());{let t=n.data,r=dn.empty(),i=new Gt(Tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hr(n.key,r,new jn(i.toArray()),kt.none())}}function I6(n,e,t){n instanceof ws?function(i,o,s){let a=i.value.clone(),c=gM(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Hr?function(i,o,s){if(!Ep(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=gM(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(oR(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function _u(n,e,t,r){return n instanceof ws?function(o,s,a,c){if(!Ep(o.precondition,s))return a;let u=o.value.clone(),d=_M(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Hr?function(o,s,a,c){if(!Ep(o.precondition,s))return a;let u=_M(o.fieldTransforms,c,s),d=s.data;return d.setAll(oR(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,a){return Ep(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function C6(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=eR(r.transform,i||null);o!=null&&(t===null&&(t=dn.empty()),t.set(r.field,o))}return t||null}function mM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ka(r,i,(o,s)=>E6(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ws=class extends nc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Hr=class extends nc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function oR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function gM(n,e,t){let r=new Map;ke(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,b6(s,a,t[i]))}return r}function _M(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,w6(o,s,e))}return r}var rc=class extends nc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Pp=class extends nc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Uw=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&I6(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=_u(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=_u(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=JM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=iR(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&Ka(this.mutations,e.mutations,(t,r)=>mM(t,r))&&Ka(this.baseMutations,e.baseMutations,(t,r)=>mM(t,r))}},Bw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ke(e.mutations.length===r.length);let i=function(){return m6}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var jw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $w=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ft,Me;function sR(n){switch(n){default:return ae();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function aR(n){if(n===void 0)return Ti("GRPC error has no .code"),F.UNKNOWN;switch(n){case ft.OK:return F.OK;case ft.CANCELLED:return F.CANCELLED;case ft.UNKNOWN:return F.UNKNOWN;case ft.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ft.INTERNAL:return F.INTERNAL;case ft.UNAVAILABLE:return F.UNAVAILABLE;case ft.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ft.NOT_FOUND:return F.NOT_FOUND;case ft.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ft.ABORTED:return F.ABORTED;case ft.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ft.DATA_LOSS:return F.DATA_LOSS;default:return ae()}}(Me=ft||(ft={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var yM=null;function S6(){return new TextEncoder}var T6=new go([4294967295,4294967295],0);function vM(n){let e=S6().encode(n),t=new ow;return t.update(e),new Uint8Array(t.digest())}function wM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new go([t,r],0),new go([i,o],0)]}var Hw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fs(`Invalid padding: ${t}`);if(r<0)throw new fs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fs(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=go.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(go.fromNumber(r)));return i.compare(T6)===1&&(i=new go([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=vM(e),[r,i]=wM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=vM(e),[r,i]=wM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},fs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Mp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(he.min(),i,new ct(Le),Di(),xe())}},Eu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,xe(),xe(),xe())}};var qa=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Rp=class{constructor(e,t){this.targetId=e,this.me=t}},Op=class{constructor(e,t,r=Kt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Np=class{constructor(){this.fe=0,this.ge=EM(),this.pe=Kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),t=xe(),r=xe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Eu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=EM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},zw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Di(),this.qe=bM(),this.Qe=new ct(Le)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(kw(o))if(r===0){let s=new ie(o.path);this.Ue(t,s,Dn.newNoDocument(s,he.min()))}else ke(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}yM?.et(function(d,g,y,b,C){var O,R,U,j,V,X;let _e={localCacheCount:d,existenceFilterCount:g.count,databaseId:y.database,projectId:y.projectId},te=g.unchangedNames;return te&&(_e.bloomFilter={applied:C===0,hashCount:(O=te?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(j=(U=(R=te?.bits)===null||R===void 0?void 0:R.bitmap)===null||U===void 0?void 0:U.length)!==null&&j!==void 0?j:0,padding:(X=(V=te?.bits)===null||V===void 0?void 0:V.padding)!==null&&X!==void 0?X:0,mightContain:x=>{var I;return(I=b?.mightContain(x))!==null&&I!==void 0&&I}}),_e}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=wo(r).toUint8Array()}catch(c){if(c instanceof xp)return Wa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Hw(s,i,o)}catch(c){return Wa(c instanceof fs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&kw(a.target)){let c=new ie(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Dn.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=xe();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Mp(e,t,this.Qe,this.ke,r);return this.ke=Di(),this.qe=bM(),this.Qe=new ct(Le),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Np,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Gt(Le),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Np),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function bM(){return new ct(ie.comparator)}function EM(){return new ct(ie.comparator)}var x6={asc:"ASCENDING",desc:"DESCENDING"},D6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A6={and:"AND",or:"OR"},qw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Gw(n,e){return n.useProto3Json||ku(e)?e:{value:e}}function kp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function P6(n,e){return kp(n,e.toTimestamp())}function xn(n){return ke(!!n),he.fromTimestamp(function(t){let r=xi(t);return new Ft(r.seconds,r.nanos)}(n))}function rE(n,e){return Ww(n,e).canonicalString()}function Ww(n,e){let t=function(i){return new Je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function lR(n){let e=Je.fromString(n);return ke(mR(e)),e}function Fp(n,e){return rE(n.databaseId,e.path)}function yu(n,e){let t=lR(e);if(t.get(1)!==n.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ie(dR(t))}function uR(n,e){return rE(n.databaseId,e)}function M6(n){let e=lR(n);return e.length===4?Je.emptyPath():dR(e)}function Kw(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dR(n){return ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function IM(n,e,t){return{name:Fp(n,e),fields:t.value.mapValue.fields}}function R6(n,e){return"found"in e?function(r,i){ke(!!i.found),i.found.name,i.found.updateTime;let o=yu(r,i.found.name),s=xn(i.found.updateTime),a=i.found.createTime?xn(i.found.createTime):he.min(),c=new dn({mapValue:{fields:i.found.fields}});return Dn.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){ke(!!i.missing),ke(!!i.readTime);let o=yu(r,i.missing),s=xn(i.readTime);return Dn.newNoDocument(o,s)}(n,e):ae()}function O6(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ke(d===void 0||typeof d=="string"),Kt.fromBase64String(d||"")):(ke(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Kt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?F.UNKNOWN:aR(u.code);return new Z(d,u.message||"")}(s);t=new Op(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=yu(n,r.document.name),o=xn(r.document.updateTime),s=r.document.createTime?xn(r.document.createTime):he.min(),a=new dn({mapValue:{fields:r.document.fields}}),c=Dn.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new qa(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=yu(n,r.document),o=r.readTime?xn(r.readTime):he.min(),s=Dn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new qa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=yu(n,r.document),o=r.removedTargetIds||[];t=new qa([],o,i,null)}else{if(!("filter"in e))return ae();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new $w(i,o),a=r.targetId;t=new Rp(a,s)}}return t}function hR(n,e){let t;if(e instanceof ws)t={update:IM(n,e.key,e.value)};else if(e instanceof rc)t={delete:Fp(n,e.key)};else if(e instanceof Hr)t={update:IM(n,e.key,e.data),updateMask:$6(e.fieldMask)};else{if(!(e instanceof Pp))return ae();t={verify:Fp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ec)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ys)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof vs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof tc)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:P6(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae()}(n,e.precondition)),t}function N6(n,e){return n&&n.length>0?(ke(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?xn(i.updateTime):xn(o);return s.isEqual(he.min())&&(s=xn(o)),new Vw(s,i.transformResults||[])}(t,e))):[]}function k6(n,e){return{documents:[uR(n,e.path)]}}function F6(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=uR(n,i);let o=function(u){if(u.length!==0)return pR(dr.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(y){return{field:$a(y.field),direction:U6(y.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Gw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function L6(n){let e=M6(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ke(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(g){let y=fR(g);return y instanceof dr&&HM(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(y=>function(C){return new Ja(Ha(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(g){let y;return y=typeof g=="object"?g.value:g,ku(y)?null:y}(t.limit));let c=null;t.startAt&&(c=function(g){let y=!!g.before,b=g.values||[];return new Za(b,y)}(t.startAt));let u=null;return t.endAt&&(u=function(g){let y=!g.before,b=g.values||[];return new Za(b,y)}(t.endAt)),u6(e,i,s,o,a,"F",c,u)}function V6(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ha(t.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ha(t.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ha(t.unaryFilter.field);return mt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ha(t.unaryFilter.field);return mt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(n):n.fieldFilter!==void 0?function(t){return mt.create(Ha(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return dr.create(t.compositeFilter.filters.map(r=>fR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(t.compositeFilter.op))}(n):ae()}function U6(n){return x6[n]}function B6(n){return D6[n]}function j6(n){return A6[n]}function $a(n){return{fieldPath:n.canonicalString()}}function Ha(n){return Tn.fromServerFormat(n.fieldPath)}function pR(n){return n instanceof mt?function(t){if(t.op==="=="){if(lM(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NAN"}};if(cM(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lM(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NAN"}};if(cM(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(t.field),op:B6(t.op),value:t.value}}}(n):n instanceof dr?function(t){let r=t.getFilters().map(i=>pR(i));return r.length===1?r[0]:{compositeFilter:{op:j6(t.op),filters:r}}}(n):ae()}function $6(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Iu=class n{constructor(e,t,r,i,o=he.min(),s=he.min(),a=Kt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Qw=class{constructor(e){this.ct=e}};function H6(n){let e=L6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Lw(e,e.limit,"L"):e}var Lp=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(nt(e.integerValue));else if("doubleValue"in e){let r=nt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),vu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=xi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(wo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?BM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):UM(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ae()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(nt(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ie.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Lp.vt=new Lp;var Yw=class{constructor(){this.un=new Zw}addToCollectionParentIndex(e,t){return this.un.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(ms.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}},Zw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Gt(Je.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gt(Je.comparator)).toArray()}};var Ere=new Uint8Array(0);var Ur=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(41943040,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);var Cu=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Jw=class{constructor(){this.changes=new bo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Xw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var eb=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&_u(r.mutation,i,jn.empty(),Ft.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=xe()){let i=hs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=fu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=hs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,xe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Di(),s=gu(),a=function(){return gu()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Hr)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),_u(d.mutation,u,d.mutation.getFieldMask(),Ft.now())):s.set(u.key,jn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var g;return a.set(u,new Xw(d,(g=s.get(u))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=gu(),i=new ct((s,a)=>s-a),o=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||jn.empty();d=a.applyToLocalView(u,d),r.set(c,d);let g=(i.get(a.batchId)||xe()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,g=JM();d.forEach(y=>{if(!o.has(y)){let b=iR(t.get(y),r.get(y));b!==null&&g.set(y,b),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,g))}return q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):WM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):q.resolve(hs()),a=-1,c=o;return s.next(u=>q.forEach(u,(d,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(d)?q.resolve():this.remoteDocumentCache.getEntry(e,d).next(y=>{c=c.insert(d,y)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,xe())).next(d=>({batchId:a,changes:ZM(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(r=>{let i=fu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=fu();return this.indexManager.getCollectionParents(e,o).next(a=>q.forEach(a,c=>{let u=function(g,y){return new _s(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((g,y)=>{s=s.insert(g,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Dn.newInvalidDocument(d)))});let a=fu();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&_u(d.mutation,u,jn.empty(),Ft.now()),tm(t,u)&&(a=a.insert(c,u))}),a})}};var tb=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:xn(i.createTime)}}(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:H6(i.bundledQuery),readTime:xn(i.readTime)}}(t)),q.resolve()}};var nb=class{constructor(){this.overlays=new ct(ie.comparator),this.Ir=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=hs();return q.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){let i=hs(),o=t.length+1,s=new ie(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ct((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=hs(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=hs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return q.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new jw(t,r));let o=this.Ir.get(t);o===void 0&&(o=xe(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var rb=class{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}};var Su=class{constructor(){this.Tr=new Gt(pt.Er),this.dr=new Gt(pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new pt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new pt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ie(new Je([])),r=new pt(t,e),i=new pt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ie(new Je([])),r=new pt(t,e),i=new pt(t,e+1),o=xe();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new pt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},pt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ie.comparator(e.key,t.key)||Le(e.wr,t.wr)}static Ar(e,t){return Le(e.wr,t.wr)||ie.comparator(e.key,t.key)}};var ib=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Gt(pt.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Uw(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new pt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(s)}lookupMutationBatch(e,t){return q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new pt(t,0),i=new pt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(Le);return t.forEach(i=>{let o=new pt(i,0),s=new pt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ie.isDocumentKey(o)||(o=o.child(""));let s=new pt(new ie(o),0),a=new Gt(Le);return this.br.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},s),q.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ke(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(t.mutations,i=>{let o=new pt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new pt(t,0),i=this.br.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ob=class{constructor(e){this.Mr=e,this.docs=function(){return new ct(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=Di();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Dn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Di(),s=t.path,a=new ie(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Xz(Jz(d),r)<=0||(i.has(d.key)||tm(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return q.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ae()}Or(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sb(this)}getSize(e){return q.resolve(this.size)}},sb=class extends Jw{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var ab=class{constructor(e){this.persistence=e,this.Nr=new bo(t=>Xb(t),eE),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Su,this.targetCount=0,this.kr=Cu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),q.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Cu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Kn(t),q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(o).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),q.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),q.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Br.containsKey(t))}};var cb=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new LM(0),this.Kr=!1,this.Kr=!0,this.$r=new rb,this.referenceDelegate=e(this),this.Ur=new ab(this),this.indexManager=new Yw,this.remoteDocumentCache=function(i){return new ob(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Qw(t),this.Gr=new tb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new ib(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);let i=new lb(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},lb=class extends Ew{constructor(e){super(),this.currentSequenceNumber=e}},ub=class n{constructor(e){this.persistence=e,this.Jr=new Su,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{let i=ie.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,he.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return q.or([()=>q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var db=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=xe(),i=xe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var hb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fb=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return RP()?8:t6(xt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new hb;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(hu()<=Ee.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",ja(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(hu()<=Ee.DEBUG&&ee("QueryEngine","Query:",ja(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(hu()<=Ee.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",ja(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(t))):q.resolve())}Yi(e,t){if(fM(t))return q.resolve(null);let r=jr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Lw(t,null,"F"),r=jr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=xe(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.ts(t,a);return this.ns(t,u,s,c.readTime)?this.Yi(e,Lw(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return fM(t)||i.isEqual(he.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?q.resolve(null):(hu()<=Ee.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ja(t)),this.rs(e,s,t,Zz(i,-1)).next(a=>a))})}ts(e,t){let r=new Gt(QM(e));return t.forEach((i,o)=>{tm(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return hu()<=Ee.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",ja(t)),this.Ji.getDocumentsMatchingQuery(e,t,ms.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var pb=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ct(Le),this._s=new bo(o=>Xb(o),eE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function z6(n,e,t,r){return new pb(n,e,t,r)}function gR(n,e){return E(this,null,function*(){let t=fe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=xe();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function q6(n,e){let t=fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let g=u.batch,y=g.keys(),b=q.resolve();return y.forEach(C=>{b=b.next(()=>d.getEntry(c,C)).next(O=>{let R=u.docVersions.get(C);ke(R!==null),O.version.compareTo(R)<0&&(g.applyToRemoteDocument(O,u),O.isValidDocument()&&(O.setReadTime(u.commitVersion),d.addEntry(O)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=xe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function _R(n){let e=fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function G6(n,e){let t=fe(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,g)=>{let y=i.get(g);if(!y)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,g)));let b=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(Kt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,r)),i=i.insert(g,b),function(O,R,U){return O.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(y,b,d)&&a.push(t.Ur.updateTargetData(o,b))});let c=Di(),u=xe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(W6(o,s,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(he.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(g=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return q.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.os=i,o))}function W6(n,e,t){let r=xe(),i=xe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Di();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function K6(n,e){let t=fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Q6(n,e){let t=fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,q.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Iu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function mb(n,e,t){return E(this,null,function*(){let r=fe(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Nu(s))throw s;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function CM(n,e,t){let r=fe(n),i=he.min(),o=xe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let g=fe(c),y=g._s.get(d);return y!==void 0?q.resolve(g.os.get(y)):g.Ur.getTargetData(u,d)}(r,s,jr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:he.min(),t?o:xe())).next(a=>(Y6(r,h6(e),a),{documents:a,Ts:o})))}function Y6(n,e,t){let r=n.us.get(e)||he.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Vp=class{constructor(){this.activeTargetIds=y6()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gb=class{constructor(){this.so=new Vp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Vp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _b=class{_o(e){}shutdown(){}};var Up=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wp=null;function dw(){return wp===null?wp=function(){return 268435456+Math.round(2147483648*Math.random())}():wp++,"0x"+wp.toString(16)}var Z6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var yb=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var qt="WebChannelConnection",vb=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=dw(),c=this.xo(t,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(t,c,u,i).then(d=>(ee("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Wa("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=Z6[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=dw();return new Promise((s,a)=>{let c=new sw;c.setWithCredentials(!0),c.listenOnce(aw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case du.NO_ERROR:let d=c.getResponseJson();ee(qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case du.TIMEOUT:ee(qt,`RPC '${e}' ${o} timed out`),a(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case du.HTTP_ERROR:let g=c.getStatus();if(ee(qt,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);let b=y?.error;if(b&&b.status&&b.message){let C=function(R){let U=R.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(U)>=0?U:F.UNKNOWN}(b.status);a(new Z(C,b.message))}else a(new Z(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Z(F.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{ee(qt,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);ee(qt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){let i=dw(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=uw(),a=lw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");ee(qt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let g=s.createWebChannel(d,c),y=!1,b=!1,C=new yb({Io:R=>{b?ee(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(ee(qt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),ee(qt,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},To:()=>g.close()}),O=(R,U,j)=>{R.listen(U,V=>{try{j(V)}catch(X){setTimeout(()=>{throw X},0)}})};return O(g,Ba.EventType.OPEN,()=>{b||(ee(qt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),O(g,Ba.EventType.CLOSE,()=>{b||(b=!0,ee(qt,`RPC '${e}' stream ${i} transport closed`),C.So())}),O(g,Ba.EventType.ERROR,R=>{b||(b=!0,Wa(qt,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new Z(F.UNAVAILABLE,"The operation could not be completed")))}),O(g,Ba.EventType.MESSAGE,R=>{var U;if(!b){let j=R.data[0];ke(!!j);let V=j,X=V.error||((U=V[0])===null||U===void 0?void 0:U.error);if(X){ee(qt,`RPC '${e}' stream ${i} received error:`,X);let _e=X.status,te=function(S){let D=ft[S];if(D!==void 0)return aR(D)}(_e),x=X.message;te===void 0&&(te=F.INTERNAL,x="Unknown error status: "+_e+" with message "+X.message),b=!0,C.So(new Z(te,x)),g.close()}else ee(qt,`RPC '${e}' stream ${i} received:`,j),C.bo(j)}}),O(a,cw.STAT_EVENT,R=>{R.stat===yp.PROXY?ee(qt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===yp.NOPROXY&&ee(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function hw(){return typeof document<"u"?document:null}function nm(n){return new qw(n,!0)}var Tu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Bp=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return E(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return E(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return E(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(Ti(t.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>E(this,null,function*(){this.state=0,this.start()}))}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},wb=class extends Bp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=O6(this.serializer,e),r=function(o){if(!("targetChange"in o))return he.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?he.min():s.readTime?xn(s.readTime):he.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Kw(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=kw(c)?{documents:k6(o,c)}:{query:F6(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=cR(o,s.resumeToken);let u=Gw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(he.min())>0){a.readTime=kp(o,s.snapshotVersion.toTimestamp());let u=Gw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=V6(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Kw(this.serializer),t.removeTarget=e,this.a_(t)}},bb=class extends Bp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ke(!!e.streamToken),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=N6(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Kw(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>hR(this.serializer,r))};this.a_(t)}};var Eb=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Ww(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(F.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Ww(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(F.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Ib=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ti(t),this.D_=!1):ee("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Cb=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>E(this,null,function*(){Es(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),yield function(c){return E(this,null,function*(){let u=fe(c);u.L_.add(4),yield Fu(u),u.q_.set("Unknown"),u.L_.delete(4),yield rm(u)})}(this))}))}),this.q_=new Ib(r,i)}};function rm(n){return E(this,null,function*(){if(Es(n))for(let e of n.B_)yield e(!0)})}function Fu(n){return E(this,null,function*(){for(let e of n.B_)yield e(!1)})}function yR(n,e){let t=fe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),aE(t)?sE(t):uc(t).r_()&&oE(t,e))}function iE(n,e){let t=fe(n),r=uc(t);t.N_.delete(e),r.r_()&&vR(t,e),t.N_.size===0&&(r.r_()?r.o_():Es(t)&&t.q_.set("Unknown"))}function oE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}uc(n).A_(e)}function vR(n,e){n.Q_.xe(e),uc(n).R_(e)}function sE(n){n.Q_=new zw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),uc(n).start(),n.q_.v_()}function aE(n){return Es(n)&&!uc(n).n_()&&n.N_.size>0}function Es(n){return fe(n).L_.size===0}function wR(n){n.Q_=void 0}function J6(n){return E(this,null,function*(){n.q_.set("Online")})}function X6(n){return E(this,null,function*(){n.N_.forEach((e,t)=>{oE(n,e)})})}function eq(n,e){return E(this,null,function*(){wR(n),aE(n)?(n.q_.M_(e),sE(n)):n.q_.set("Unknown")})}function tq(n,e,t){return E(this,null,function*(){if(n.q_.set("Online"),e instanceof Op&&e.state===2&&e.cause)try{yield function(i,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield jp(n,r)}else if(e instanceof qa?n.Q_.Ke(e):e instanceof Rp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(he.min()))try{let r=yield _R(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.N_.get(u);d&&o.N_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.N_.get(c);if(!d)return;o.N_.set(c,d.withResumeToken(Kt.EMPTY_BYTE_STRING,d.snapshotVersion)),vR(o,c);let g=new Iu(d.target,c,u,d.sequenceNumber);oE(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),yield jp(n,r)}})}function jp(n,e,t){return E(this,null,function*(){if(!Nu(e))throw e;n.L_.add(1),yield Fu(n),n.q_.set("Offline"),t||(t=()=>_R(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){ee("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield rm(n)}))})}function bR(n,e){return e().catch(t=>jp(n,t,e))}function im(n){return E(this,null,function*(){let e=fe(n),t=Eo(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nq(e);)try{let i=yield K6(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,rq(e,i)}catch(i){yield jp(e,i)}ER(e)&&IR(e)})}function nq(n){return Es(n)&&n.O_.length<10}function rq(n,e){n.O_.push(e);let t=Eo(n);t.r_()&&t.V_&&t.m_(e.mutations)}function ER(n){return Es(n)&&!Eo(n).n_()&&n.O_.length>0}function IR(n){Eo(n).start()}function iq(n){return E(this,null,function*(){Eo(n).p_()})}function oq(n){return E(this,null,function*(){let e=Eo(n);for(let t of n.O_)e.m_(t.mutations)})}function sq(n,e,t){return E(this,null,function*(){let r=n.O_.shift(),i=Bw.from(r,e,t);yield bR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield im(n)})}function aq(n,e){return E(this,null,function*(){e&&Eo(n).V_&&(yield function(r,i){return E(this,null,function*(){if(function(s){return sR(s)&&s!==F.ABORTED}(i.code)){let o=r.O_.shift();Eo(r).s_(),yield bR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield im(r)}})}(n,e)),ER(n)&&IR(n)})}function SM(n,e){return E(this,null,function*(){let t=fe(n);t.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");let r=Es(t);t.L_.add(3),yield Fu(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield rm(t)})}function cq(n,e){return E(this,null,function*(){let t=fe(n);e?(t.L_.delete(2),yield rm(t)):e||(t.L_.add(2),yield Fu(t),t.q_.set("Unknown"))})}function uc(n){return n.K_||(n.K_=function(t,r,i){let o=fe(t);return o.w_(),new wb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:J6.bind(null,n),Ro:X6.bind(null,n),mo:eq.bind(null,n),d_:tq.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.K_.s_(),aE(n)?sE(n):n.q_.set("Unknown")):(yield n.K_.stop(),wR(n))}))),n.K_}function Eo(n){return n.U_||(n.U_=function(t,r,i){let o=fe(t);return o.w_(),new bb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iq.bind(null,n),mo:aq.bind(null,n),f_:oq.bind(null,n),g_:sq.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.U_.s_(),yield im(n)):(yield n.U_.stop(),n.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Sb=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cE(n,e){if(Ti("AsyncQueue",`${e}: ${n}`),Nu(n))return new Z(F.UNAVAILABLE,`${e}: ${n}`);throw n}var $p=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ie.comparator(t.key,r.key):(t,r)=>ie.comparator(t.key,r.key),this.keyedMap=fu(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Hp=class{constructor(){this.W_=new ct(ie.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ic=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,$p.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Tb=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},xb=class{constructor(){this.queries=TM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=fe(t),o=i.queries;i.queries=TM(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new Z(F.ABORTED,"Firestore shutting down"))}};function TM(){return new bo(n=>KM(n),em)}function CR(n,e){return E(this,null,function*(){let t=fe(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Tb,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=cE(s,`Initialization of query '${ja(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&lE(t)})}function SR(n,e){return E(this,null,function*(){let t=fe(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function lq(n,e){let t=fe(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&lE(t)}function uq(n,e,t){let r=fe(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function lE(n){n.Y_.forEach(e=>{e.next()})}var Db,xM;(xM=Db||(Db={})).ea="default",xM.Cache="cache";var zp=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Db.Cache}};var qp=class{constructor(e){this.key=e}},Gp=class{constructor(e){this.key=e}},Ab=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=QM(e),this.Ra=new $p(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Hp,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,g)=>{let y=i.get(d),b=tm(this.query,g)?g:null,C=!!y&&this.mutatedKeys.has(y.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),R=!1;y&&b?y.data.isEqual(b.data)?C!==O&&(r.track({type:3,doc:b}),R=!0):this.ga(y,b)||(r.track({type:2,doc:b}),R=!0,(c&&this.Aa(b,c)>0||u&&this.Aa(b,u)<0)&&(a=!0)):!y&&b?(r.track({type:0,doc:b}),R=!0):y&&!b&&(r.track({type:1,doc:y}),R=!0,(c||u)&&(a=!0)),R&&(b?(s=s.add(b),o=O?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,g)=>function(b,C){let O=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return O(b)-O(C)}(d.type,g.type)||this.Aa(d.doc,g.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,s.length!==0||u?{snapshot:new ic(this.query,e.Ra,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=xe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Gp(r))}),this.da.forEach(r=>{e.has(r)||t.push(new qp(r))}),t}ba(e){this.Ta=e.Ts,this.da=xe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ic.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Pb=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Mb=class{constructor(e){this.key=e,this.va=!1}},Rb=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new bo(a=>KM(a),em),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(ie.comparator),this.Na=new Map,this.La=new Su,this.Ba={},this.ka=new Map,this.qa=Cu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function dq(n,e,t=!0){return E(this,null,function*(){let r=MR(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield TR(r,e,t,!0),i})}function hq(n,e){return E(this,null,function*(){let t=MR(n);yield TR(t,e,!0,!1)})}function TR(n,e,t,r){return E(this,null,function*(){let i=yield Q6(n.localStore,jr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield fq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&yR(n.remoteStore,i),a})}function fq(n,e,t,r,i){return E(this,null,function*(){n.Ka=(g,y,b)=>function(O,R,U,j){return E(this,null,function*(){let V=R.view.ma(U);V.ns&&(V=yield CM(O.localStore,R.query,!1).then(({documents:x})=>R.view.ma(x,V)));let X=j&&j.targetChanges.get(R.targetId),_e=j&&j.targetMismatches.get(R.targetId)!=null,te=R.view.applyChanges(V,O.isPrimaryClient,X,_e);return AM(O,R.targetId,te.wa),te.snapshot})}(n,g,y,b);let o=yield CM(n.localStore,e,!0),s=new Ab(e,o.Ts),a=s.ma(o.documents),c=Eu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);AM(n,t,u.wa);let d=new Pb(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function pq(n,e,t){return E(this,null,function*(){let r=fe(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!em(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield mb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&iE(r.remoteStore,i.targetId),Ob(r,i.targetId)}).catch(Ou))):(Ob(r,i.targetId),yield mb(r.localStore,i.targetId,!0))})}function mq(n,e){return E(this,null,function*(){let t=fe(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),iE(t.remoteStore,r.targetId))})}function gq(n,e,t){return E(this,null,function*(){let r=Iq(n);try{let i=yield function(s,a){let c=fe(s),u=Ft.now(),d=a.reduce((b,C)=>b.add(C.key),xe()),g,y;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let C=Di(),O=xe();return c.cs.getEntries(b,d).next(R=>{C=R,C.forEach((U,j)=>{j.isValidDocument()||(O=O.add(U))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,C)).next(R=>{g=R;let U=[];for(let j of a){let V=C6(j,g.get(j.key).overlayedDocument);V!=null&&U.push(new Hr(j.key,V,jM(V.value.mapValue),kt.exists(!0)))}return c.mutationQueue.addMutationBatch(b,u,U,a)}).next(R=>{y=R;let U=R.applyToLocalDocumentSet(g,O);return c.documentOverlayCache.saveOverlays(b,R.batchId,U)})}).then(()=>({batchId:y.batchId,changes:ZM(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ba[s.currentUser.toKey()];u||(u=new ct(Le)),u=u.insert(a,c),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Lu(r,i.changes),yield im(r.remoteStore)}catch(i){let o=cE(i,"Failed to persist write");t.reject(o)}})}function xR(n,e){return E(this,null,function*(){let t=fe(n);try{let r=yield G6(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ke(s.va):i.removedDocuments.size>0&&(ke(s.va),s.va=!1))}),yield Lu(t,r,e)}catch(r){yield Ou(r)}})}function DM(n,e,t){let r=fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=fe(s);c.onlineState=a;let u=!1;c.queries.forEach((d,g)=>{for(let y of g.j_)y.Z_(a)&&(u=!0)}),u&&lE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _q(n,e,t){return E(this,null,function*(){let r=fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new ct(ie.comparator);s=s.insert(o,Dn.newNoDocument(o,he.min()));let a=xe().add(o),c=new Mp(he.min(),new Map,new ct(Le),s,a);yield xR(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),uE(r)}else yield mb(r.localStore,e,!1).then(()=>Ob(r,e,t)).catch(Ou)})}function yq(n,e){return E(this,null,function*(){let t=fe(n),r=e.batch.batchId;try{let i=yield q6(t.localStore,e);AR(t,r,null),DR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Lu(t,i)}catch(i){yield Ou(i)}})}function vq(n,e,t){return E(this,null,function*(){let r=fe(n);try{let i=yield function(s,a){let c=fe(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(g=>(ke(g!==null),d=g.keys(),c.mutationQueue.removeMutationBatch(u,g))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);AR(r,e,t),DR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Lu(r,i)}catch(i){yield Ou(i)}})}function DR(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function AR(n,e,t){let r=fe(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ob(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||PR(n,r)})}function PR(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(iE(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),uE(n))}function AM(n,e,t){for(let r of t)r instanceof qp?(n.La.addReference(r.key,e),wq(n,r)):r instanceof Gp?(ee("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||PR(n,r.key)):ae()}function wq(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ee("SyncEngine","New document in limbo: "+t),n.xa.add(r),uE(n))}function uE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ie(Je.fromString(e)),r=n.qa.next();n.Na.set(r,new Mb(t)),n.Oa=n.Oa.insert(t,r),yR(n.remoteStore,new Iu(jr(tE(t.path)),r,"TargetPurposeLimboResolution",LM.oe))}}function Lu(n,e,t){return E(this,null,function*(){let r=fe(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let g=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(u){i.push(u);let g=db.Wi(c.targetId,u);o.push(g)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,u){return E(this,null,function*(){let d=fe(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>q.forEach(u,y=>q.forEach(y.$i,b=>d.persistence.referenceDelegate.addReference(g,y.targetId,b)).next(()=>q.forEach(y.Ui,b=>d.persistence.referenceDelegate.removeReference(g,y.targetId,b)))))}catch(g){if(!Nu(g))throw g;ee("LocalStore","Failed to update sequence numbers: "+g)}for(let g of u){let y=g.targetId;if(!g.fromCache){let b=d.os.get(y),C=b.snapshotVersion,O=b.withLastLimboFreeSnapshotVersion(C);d.os=d.os.insert(y,O)}}})}(r.localStore,o))})}function bq(n,e){return E(this,null,function*(){let t=fe(n);if(!t.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());let r=yield gR(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new Z(F.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Lu(t,r.hs)}})}function Eq(n,e){let t=fe(n),r=t.Na.get(e);if(r&&r.va)return xe().add(r.key);{let i=xe(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function MR(n){let e=fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Eq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_q.bind(null,e),e.Ca.d_=lq.bind(null,e.eventManager),e.Ca.$a=uq.bind(null,e.eventManager),e}function Iq(n){let e=fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vq.bind(null,e),e}var PM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=nm(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return z6(this.persistence,new fb,t.initialUser,this.serializer)}Ga(t){return new cb(ub.Zr,this.serializer)}Wa(t){return new gb}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Cq=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>DM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bq.bind(null,this.syncEngine),yield cq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new xb}()}createDatastore(t){let r=nm(t.databaseInfo.databaseId),i=function(s){return new vb(s)}(t.databaseInfo);return function(s,a,c,u){return new Eb(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new Cb(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>DM(this.syncEngine,r,0),function(){return Up.D()?new Up:new _b}())}createSyncEngine(t,r){return function(o,s,a,c,u,d,g){let y=new Rb(o,s,a,c,u,d);return g&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield function(o){return E(this,null,function*(){let s=fe(o);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Fu(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Wp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Nb=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Z(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return E(this,null,function*(){let s=fe(i),a={documents:o.map(g=>Fp(s.serializer,g))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Je.emptyPath(),a,o.length),u=new Map;c.forEach(g=>{let y=R6(s.serializer,g);u.set(y.key.toString(),y)});let d=[];return o.forEach(g=>{let y=u.get(g.toString());ke(!!y),d.push(y)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=ie.fromPath(r);this.mutations.push(new Pp(i,this.precondition(i)))}),yield function(r,i){return E(this,null,function*(){let o=fe(r),s={writes:i.map(a=>hR(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Je.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ae();t=he.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Z(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(he.min())?kt.exists(!1):kt.updateTime(t):kt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(he.min()))throw new Z(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kt.updateTime(t)}return kt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var kb=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Tu(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>E(this,null,function*(){let e=new Nb(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!ku(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!sR(t)}return!1}};var Fb=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){ee("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ee("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=cE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function fw(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(this,null,function*(){r.isEqual(i)||(yield gR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function MM(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Sq(n);ee("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>SM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>SM(e.remoteStore,i)),n._onlineComponents=e})}function Sq(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{yield fw(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Wa("Error using user provided cache. Falling back to memory cache: "+t),yield fw(n,new PM)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),yield fw(n,new PM);return n._offlineComponents})}function dE(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),yield MM(n,n._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),yield MM(n,new Cq))),n._onlineComponents})}function Tq(n){return dE(n).then(e=>e.syncEngine)}function xq(n){return dE(n).then(e=>e.datastore)}function RR(n){return E(this,null,function*(){let e=yield dE(n),t=e.eventManager;return t.onListen=dq.bind(null,e.syncEngine),t.onUnlisten=pq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mq.bind(null,e.syncEngine),t})}function Dq(n,e,t={}){let r=new $n;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(o,s,a,c,u){let d=new Wp({next:y=>{d.Za(),s.enqueueAndForget(()=>SR(o,g));let b=y.docs.has(a);!b&&y.fromCache?u.reject(new Z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&c&&c.source==="server"?u.reject(new Z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),g=new zp(tE(a.path),d,{includeMetadataChanges:!0,_a:!0});return CR(o,g)}(yield RR(n),n.asyncQueue,e,t,r)})),r.promise}function Aq(n,e,t={}){let r=new $n;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(o,s,a,c,u){let d=new Wp({next:y=>{d.Za(),s.enqueueAndForget(()=>SR(o,g)),y.fromCache&&c.source==="server"?u.reject(new Z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),g=new zp(a,d,{includeMetadataChanges:!0,_a:!0});return CR(o,g)}(yield RR(n),n.asyncQueue,e,t,r)})),r.promise}function OR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var RM=new Map;function NR(n,e,t){if(!t)throw new Z(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Pq(n,e,t,r){if(e===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function OM(n){if(!ie.isDocumentKey(n))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function NM(n){if(ie.isDocumentKey(n))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function om(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ae()}function Hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=om(n);throw new Z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Kp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},oc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pw;switch(r.type){case"firstParty":return new yw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=RM.get(t);r&&(ee("ComponentProvider","Removing Datastore"),RM.delete(t),r.terminate())}(this),Promise.resolve()}};function kR(n,e,t,r={}){var i;let o=(n=Hn(n,oc))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=At.MOCK_USER;else{a=Na(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new At(u)}n._authCredentials=new mw(new Ip(a,c))}}var sc=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Wt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},vo=class n extends sc{constructor(e,t,r){super(e,t,tE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new ie(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function FR(n,e,...t){if(n=qe(n),NR("collection","path",e),n instanceof oc){let r=Je.fromString(e,...t);return NM(r),new vo(n,null,r)}{if(!(n instanceof Wt||n instanceof vo))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Je.fromString(e,...t));return NM(r),new vo(n.firestore,null,r)}}function hE(n,e,...t){if(n=qe(n),arguments.length===1&&(e=Cp.newId()),NR("doc","path",e),n instanceof oc){let r=Je.fromString(e,...t);return OM(r),new Wt(n,null,new ie(r))}{if(!(n instanceof Wt||n instanceof vo))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Je.fromString(e,...t));return OM(r),new Wt(n.firestore,n instanceof vo?n.converter:null,new ie(r))}}var Qp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tu(this,"async_queue_retry"),this.Vu=()=>{let r=hw();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=hw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=hw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new $n;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return E(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Nu(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ti("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Sb.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ae()}verifyOperationInProgress(){}wu(){return E(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var zr=class extends oc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Qp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qp(e),this._firestoreClient=void 0,yield e}})}};function LR(n,e){let t=typeof n=="object"?n:Rr(),r=typeof n=="string"?n:e||"(default)",i=vi(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Oa("firestore");o&&kR(i,...o)}return i}function Vu(n){if(n._terminated)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Mq(n),n._firestoreClient}function Mq(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,d){return new Iw(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,OR(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Fb(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var ac=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Kt.fromBase64String(e))}catch(t){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Io=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var xu=class{constructor(e){this._methodName=e}};var Du=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}};var Au=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var Rq=/^__.*__$/,Lb=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ws(e,this.data,t,this.fieldTransforms)}},Yp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function VR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}var Vb=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(VR(this.Cu)&&Rq.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Ub=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nm(e)}Qu(e,t,r,i=!1){return new Vb({Cu:e,methodName:t,qu:r,path:Tn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dc(n){let e=n._freezeSettings(),t=nm(n._databaseId);return new Ub(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sm(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);mE("Data must be an object, but it was:",s,r);let a=UR(r,s),c,u;if(o.merge)c=new jn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let g of o.mergeFields){let y=Bb(e,g,t);if(!s.contains(y))throw new Z(F.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);jR(d,y)||d.push(y)}c=new jn(d),u=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,u=s.fieldTransforms;return new Lb(new dn(a),c,u)}var Zp=class n extends xu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function fE(n,e,t,r){let i=n.Qu(1,e,t);mE("Data must be an object, but it was:",i,r);let o=[],s=dn.empty();bs(r,(c,u)=>{let d=gE(e,c,t);u=qe(u);let g=i.Nu(d);if(u instanceof Zp)o.push(d);else{let y=Uu(u,g);y!=null&&(o.push(d),s.set(d,y))}});let a=new jn(o);return new Yp(s,a,i.fieldTransforms)}function pE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Bb(e,r,t)],c=[i];if(o.length%2!=0)throw new Z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)a.push(Bb(e,o[y])),c.push(o[y+1]);let u=[],d=dn.empty();for(let y=a.length-1;y>=0;--y)if(!jR(u,a[y])){let b=a[y],C=c[y];C=qe(C);let O=s.Nu(b);if(C instanceof Zp)u.push(b);else{let R=Uu(C,O);R!=null&&(u.push(b),d.set(b,R))}}let g=new jn(u);return new Yp(d,g,s.fieldTransforms)}function Oq(n,e,t,r=!1){return Uu(t,n.Qu(r?4:3,e))}function Uu(n,e){if(BR(n=qe(n)))return mE("Unsupported field value:",e,n),UR(n,e);if(n instanceof xu)return function(r,i){if(!VR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Uu(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return v6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ft.fromDate(r);return{timestampValue:kp(i.serializer,o)}}if(r instanceof Ft){let o=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kp(i.serializer,o)}}if(r instanceof Du)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ac)return{bytesValue:cR(i.serializer,r._byteString)};if(r instanceof Wt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:rE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Au)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return nE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${om(r)}`)}(n,e)}function UR(n,e){let t={};return VM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(n,(r,i)=>{let o=Uu(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function BR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof Du||n instanceof ac||n instanceof Wt||n instanceof xu||n instanceof Au)}function mE(n,e,t){if(!BR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=om(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Bb(n,e,t){if((e=qe(e))instanceof Io)return e._internalPath;if(typeof e=="string")return gE(n,e);throw Jp("Field path arguments must be of type string or ",n,!1,void 0,t)}var Nq=new RegExp("[~\\*/\\[\\]]");function gE(n,e,t){if(e.search(Nq)>=0)throw Jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Io(...e.split("."))._internalPath}catch{throw Jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Z(F.INVALID_ARGUMENT,a+n+c)}function jR(n,e){return n.some(t=>t.isEqual(e))}var cc=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($R("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},jb=class extends cc{data(){return super.data()}};function $R(n,e){return typeof e=="string"?gE(n,e):e instanceof Io?e._internalPath:e._delegate._internalPath}function kq(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Pu=class{},$b=class extends Pu{};function HR(n,e,...t){let r=[];e instanceof Pu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof zb).length,a=o.filter(c=>c instanceof Hb).length;if(s>1||s>0&&a>0)throw new Z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Hb=class n extends $b{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return zR(e._query,t),new sc(e.firestore,e.converter,Fw(e._query,t))}_parse(e){let t=dc(e.firestore);return function(o,s,a,c,u,d,g){let y;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){FM(g,d);let b=[];for(let C of g)b.push(kM(c,o,C));y={arrayValue:{values:b}}}else y=kM(c,o,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||FM(g,d),y=Oq(a,s,g,d==="in"||d==="not-in");return mt.create(u,d,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var zb=class n extends Pu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:dr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)zR(s,c),s=Fw(s,c)}(e._query,t),new sc(e.firestore,e.converter,Fw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function kM(n,e,t){if(typeof(t=qe(t))=="string"){if(t==="")throw new Z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WM(e)&&t.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Je.fromString(t));if(!ie.isDocumentKey(r))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return aM(n,new ie(r))}if(t instanceof Wt)return aM(n,t._key);throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${om(t)}.`)}function FM(n,e){if(!Array.isArray(n)||n.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Xp=class{convertValue(e,t="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return bs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>nt(s.doubleValue));return new Au(o)}convertGeoPoint(e){return new Du(nt(e.latitude),nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Zb(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wu(e));default:return null}}convertTimestamp(e){let t=xi(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Je.fromString(e);ke(mR(r));let i=new Dp(r.get(1),r.get(3)),o=new ie(r.popFirst(5));return i.isEqual(t)||Ti(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function am(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var qb=class extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}};var yo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Mu=class extends cc{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ga(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field($R("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ga=class extends Mu{data(e={}){return super.data(e)}},Gb=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ga(this._firestore,this._userDataWriter,r.key,r,new yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ga(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ga(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Fq(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Fq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}function qR(n){n=Hn(n,Wt);let e=Hn(n.firestore,zr);return Dq(Vu(e),n._key).then(t=>Lq(e,n,t))}var Ru=class extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}};function GR(n){n=Hn(n,sc);let e=Hn(n.firestore,zr),t=Vu(e),r=new Ru(e);return kq(n._query),Aq(t,n._query).then(i=>new Gb(e,r,n,i))}function WR(n,e,t){n=Hn(n,Wt);let r=Hn(n.firestore,zr),i=am(n.converter,e,t);return cm(r,[sm(dc(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,kt.none())])}function KR(n,e,t,...r){n=Hn(n,Wt);let i=Hn(n.firestore,zr),o=dc(i),s;return s=typeof(e=qe(e))=="string"||e instanceof Io?pE(o,"updateDoc",n._key,e,t,r):fE(o,"updateDoc",n._key,e),cm(i,[s.toMutation(n._key,kt.exists(!0))])}function QR(n,e){let t=Hn(n.firestore,zr),r=hE(n),i=am(n.converter,e);return cm(t,[sm(dc(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,kt.exists(!1))]).then(()=>r)}function cm(n,e){return function(r,i){let o=new $n;return r.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return gq(yield Tq(r),i,o)})),o.promise}(Vu(n),e)}function Lq(n,e,t){let r=t.docs.get(e._key),i=new Ru(n);return new Mu(n,i,e._key,r,new yo(t.hasPendingWrites,t.fromCache),e.converter)}var Vq={maxAttempts:5};var Wb=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dc(e)}set(e,t,r){this._verifyNotCommitted();let i=_o(e,this._firestore),o=am(i.converter,t,r),s=sm(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,kt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=_o(e,this._firestore),s;return s=typeof(t=qe(t))=="string"||t instanceof Io?pE(this._dataReader,"WriteBatch.update",o._key,t,r,i):fE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,kt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=_o(e,this._firestore);return this._mutations=this._mutations.concat(new rc(t._key,kt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function _o(n,e){if((n=qe(n)).firestore!==e)throw new Z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Kb=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=dc(t)}get(t){let r=_o(t,this._firestore),i=new qb(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return ae();let s=o[0];if(s.isFoundDocument())return new cc(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new cc(this._firestore,i,r._key,null,r.converter);throw ae()})}set(t,r,i){let o=_o(t,this._firestore),s=am(o.converter,r,i),a=sm(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=_o(t,this._firestore),a;return a=typeof(r=qe(r))=="string"||r instanceof Io?pE(this._dataReader,"Transaction.update",s._key,r,i,o):fE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=_o(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=_o(e,this._firestore),r=new Ru(this._firestore);return super.get(e).then(i=>new Mu(this._firestore,r,t._key,i._document,new yo(!1,!1),t.converter))}};function YR(n,e,t){n=Hn(n,zr);let r=Object.assign(Object.assign({},Vq),t);return function(o){if(o.maxAttempts<1)throw new Z(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new $n;return o.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let u=yield xq(o);new kb(o.asyncQueue,u,a,s,c).au()})),c.promise}(Vu(n),i=>e(new Kb(n,i)),r)}function ZR(n){return Vu(n=Hn(n,zr)),new Wb(n,e=>cm(n,e))}(function(e,t=!0){(function(i){lc=i})(Bn),Un(new zt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new zr(new gw(r.getProvider("auth-internal")),new ww(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dp(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Be(rM,"4.7.3",e),Be(rM,"4.7.3","esm2017")})();var dt=class{constructor(e){return e}},JR="firestore",_E=class{constructor(){return wi(JR)}};var yE=new ne("angularfire2.firestore-instances");function Uq(n,e){let t=ho(JR,n,e);return t&&new dt(t)}function Bq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new dt(r)}}var jq={provide:_E,deps:[[new Ye,yE]]},$q={provide:dt,useFactory:Uq,deps:[[new Ye,yE],Sn]};function XR(n,...e){return Be("angularfire",lr.full,"fst"),an([$q,jq,{provide:yE,useFactory:Bq(n),multi:!0,deps:[Ve,bt,Nr,ur,[new Ye,Ci],[new Ye,Or],...e]}])}var eO=tt(QR,!0);var Ge=tt(FR,!0);var je=tt(hE,!0);var rt=tt(qR,!0);var We=tt(GR,!0);var tO=tt(LR,!0);var hc=tt(HR,!0);var nO=tt(YR,!0);var lm=tt(WR,!0);var vE=tt(KR,!0);var rO=tt(ZR,!0);var Qt=class n{setUserId(e){sessionStorage.setItem("userUID",e)}getUserId(){return sessionStorage.getItem("userUID")}setUserEmail(e){sessionStorage.setItem("userEmail",e)}getUserEmail(){return sessionStorage.getItem("userEmail")}setUserRole(e){sessionStorage.setItem("userRole",e)}getUserRole(){return sessionStorage.getItem("userRole")}clearUserData(){sessionStorage.removeItem("userUID"),sessionStorage.removeItem("userEmail"),sessionStorage.removeItem("userRole")}isAuthenticated(){return!!this.getUserId()&&!!this.getUserEmail()}logout(){sessionStorage.clear()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};function Hq(n,e){n&1&&J(0,"div",25)}function zq(n,e){n&1&&(p(0,"small"),m(1," Please enter a valid email. "),h())}function qq(n,e){n&1&&(p(0,"small",26),m(1," Password must be at least 6 characters. "),h())}function Gq(n,e){n&1&&(p(0,"small"),m(1," Please select a role. "),h())}var um=class n{constructor(e,t,r,i,o){this.fb=e;this.router=t;this.firestore=r;this.authService=i;this.auth=o;this.loginForm=this.fb.group({email:["",[be.required,be.email]],password:["",[be.required,be.minLength(6)]],role:["",[be.required]]})}loginForm;showPassword=!1;showPasswordDescription=!1;isPasswordValid=!1;isLoading=!1;togglePasswordVisibility(){this.showPassword=!this.showPassword}onPasswordFocus(){this.showPasswordDescription=!0}onPasswordInput(){let e=this.loginForm.get("password")?.value||"";this.isPasswordValid=e.length>=6,this.showPasswordDescription=!this.isPasswordValid}onPasswordBlur(){this.showPasswordDescription=!this.isPasswordValid}onSubmit(){return E(this,null,function*(){if(this.isLoading=!0,this.loginForm.valid){let{email:e,password:t,role:r}=this.loginForm.value;try{let o=(yield mp(this.auth,e,t)).user.uid,s=r==="Auctioner"?"auctioneers":r==="Bidder"?"bidders":r==="Admin"?"admins":"";if(!s){alert("Invalid role selected.");return}let a=je(this.firestore,`${s}/${o}`);(yield rt(a)).exists()?(this.authService.setUserId(o),this.authService.setUserEmail(e),this.authService.setUserRole(r),alert("Login successful!"),setTimeout(()=>{r==="Auctioner"?this.router.navigate(["/auctioner"]):r==="Bidder"?this.router.navigate(["/bidder"]):r==="Admin"&&this.router.navigate(["/admin"])},100)):alert("User not found in Firestore. Please register again.")}catch(i){console.error("Login error:",i),alert(i.message||"Login failed. Please check your credentials.")}}else alert("Please fill out all fields correctly.");this.isLoading=!1})}navigateToRegister(){console.log("Navigating to registration page..."),this.router.navigate(["/registration"])}navigateToPasswordRecovery(){this.router.navigate(["/password-recovery"])}static \u0275fac=function(t){return new(t||n)(z(Vn),z(Tt),z(dt),z(Qt),z(Nt))};static \u0275cmp=at({type:n,selectors:[["app-login"]],decls:47,vars:8,consts:[["class","loading-bar",4,"ngIf"],[1,"title"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],[1,"input-icon"],[1,"fa","fa-envelope"],["id","email","type","email","formControlName","email","placeholder","Enter your email","required",""],[4,"ngIf"],["for","password"],[1,"fa","fa-lock"],["id","password","formControlName","password","placeholder","Enter your password","required","",3,"focus","input","blur","type"],[1,"toggle-icon",3,"click"],[1,"fa",3,"ngClass"],["class","password-description",4,"ngIf"],["for","role"],[1,"fas","fa-user-tag"],["id","role","formControlName","role","required",""],["value","Auctioner"],["value","Bidder"],["value","Admin"],["type","submit",3,"disabled"],[1,"links"],[3,"click"],[1,"loading-bar"],[1,"password-description"]],template:function(t,r){if(t&1&&(p(0,"body"),Y(1,Hq,1,0,"div",0),p(2,"p",1),m(3,"AUCTION BAZAAR"),h(),p(4,"div",2)(5,"h2"),m(6,"Login"),h(),p(7,"form",3),B("ngSubmit",function(){return r.onSubmit()}),p(8,"div",4)(9,"label",5),m(10,"Email"),h(),p(11,"div",6),J(12,"i",7)(13,"input",8),h(),Y(14,zq,2,0,"small",9),h(),p(15,"div",4)(16,"label",10),m(17,"Password"),h(),p(18,"div",6),J(19,"i",11),p(20,"input",12),B("focus",function(){return r.onPasswordFocus()})("input",function(){return r.onPasswordInput()})("blur",function(){return r.onPasswordBlur()}),h(),p(21,"span",13),B("click",function(){return r.togglePasswordVisibility()}),J(22,"i",14),h()(),Y(23,qq,2,0,"small",15),h(),p(24,"div",4)(25,"label",16),m(26,"User Role"),h(),p(27,"div",6),J(28,"i",17),p(29,"select",18)(30,"option",19),m(31,"Auctioner"),h(),p(32,"option",20),m(33,"Bidder"),h(),p(34,"option",21),m(35,"Admin"),h()()(),Y(36,Gq,2,0,"small",9),h(),p(37,"button",22),m(38,"Login"),h(),p(39,"div",23)(40,"a",24),B("click",function(){return r.navigateToPasswordRecovery()}),m(41,"Forgot Password?"),h()(),p(42,"div",23)(43,"span"),m(44,"Don't have an account?"),h(),p(45,"a",24),B("click",function(){return r.navigateToRegister()}),m(46,"Register here"),h()()()()()),t&2){let i,o;v(),k("ngIf",r.isLoading),v(6),k("formGroup",r.loginForm),v(7),k("ngIf",((i=r.loginForm.get("email"))==null?null:i.invalid)&&((i=r.loginForm.get("email"))==null?null:i.touched)),v(6),k("type",r.showPassword?"text":"password"),v(2),k("ngClass",r.showPassword?"fa-eye-slash":"fa-eye"),v(),k("ngIf",r.showPasswordDescription&&!r.isPasswordValid),v(13),k("ngIf",((o=r.loginForm.get("role"))==null?null:o.invalid)&&((o=r.loginForm.get("role"))==null?null:o.touched)),v(),k("disabled",r.loginForm.invalid)}},dependencies:[un,Cr,Tr,xr,ln,Sr,Ln,Ir,Wl,sr,ar,Et,wr,St],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:linear-gradient(150deg,#6a11cb,#8c0b8e,#7b0eac);min-height:100vh;width:100%;margin:0;top:0;left:0;display:flex;position:fixed;justify-content:center;align-items:center}.title[_ngcontent-%COMP%]{width:100%;text-align:center;background:linear-gradient(150deg,#6a11cb,#8c0b8e,#7b0eac);color:#00fff7;font-size:1.8em;font-style:normal;padding:10px;position:fixed;top:0;left:0;z-index:1}.header-title[_ngcontent-%COMP%]{margin:0;font-weight:700;letter-spacing:2px}.form-container[_ngcontent-%COMP%]{max-width:400px;width:100%;background:#ffffff26;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:15px;box-shadow:0 4px 30px #0000004d;padding:20px;margin-top:60px;text-align:center;color:#fff;@keyframes fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}}.form-container[_ngcontent-%COMP%]   .animate-fadein[_ngcontent-%COMP%]{animation:fadeIn 1s ease-out}.form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2em;color:#fff;margin-bottom:20px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px;padding-right:33px;position:relative}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;text-align:left;color:#e0e0e0}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-description[_ngcontent-%COMP%]{color:#ffc107;font-size:.9em;margin-top:5px;transition:opacity .3s ease-in-out}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:relative}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:40px;transform:translateY(-50%);cursor:pointer;color:#000;font-size:18px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff80;transition:box-shadow .3s ease-in-out}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:50%;left:10px;transform:translateY(-50%);color:#00fff7;pointer-events:none}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 10px 10px 35px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f0f0f0cc;font-weight:300}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   :is(input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]){width:100%;padding:10px 10px 10px 35px;background:#fff3;color:#000;border:1px solid rgba(255,255,255,.3);border-radius:5px;box-sizing:border-box;transition:all .3s ease-in-out}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   :is(input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus){border-color:#00fff7;box-shadow:0 0 10px #00fff799;transform:scale(1.02);outline:none}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#ffc107;font-size:.9em;margin-top:5px;text-align:left;display:block}.form-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:700;color:#fff;background:linear-gradient(to right,#007bff,#00c6ff);border:none;border-radius:8px;cursor:pointer;transition:all .3s ease-in-out}.form-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#0056b3,#007bff);transform:translateY(-2px);box-shadow:0 4px 8px #0000004d}.form-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed;box-shadow:none}.form-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;margin-top:10px;color:#007bff;text-decoration:none}.form-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px;font-size:.9em}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00fff7;text-decoration:none;cursor:pointer}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.links[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:right;margin:0;font-size:1em;color:#000}@media (max-width: 480px){.title[_ngcontent-%COMP%]{font-size:1.2em;padding:8px}.form-container[_ngcontent-%COMP%]{padding:15px;margin:50px 10px 0;max-width:100%;border-radius:12px}.form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5em}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding-right:20px}.form-container[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{right:20px}.links[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}}@media (min-width: 481px) and (max-width: 1024px){.title[_ngcontent-%COMP%]{font-size:1.5em;padding:10px}.form-container[_ngcontent-%COMP%]{padding:20px;max-width:90%;margin:60px auto 0;border-radius:15px}.form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.7em}.form-container[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{right:25px}.links[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}}.loading-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:4px;width:100%;background:linear-gradient(to right,#2196f3,#42a5f5,#64b5f6);z-index:10000;animation:_ngcontent-%COMP%_loadingSlide 1.5s infinite ease-in-out;box-shadow:0 2px 5px #00000026}@keyframes _ngcontent-%COMP%_loadingSlide{0%{transform:scaleX(0);transform-origin:left}50%{transform:scaleX(.5);transform-origin:center}to{transform:scaleX(1);transform-origin:right}}"]})};function Wq(n,e){n&1&&J(0,"div",31)}function Kq(n,e){n&1&&(p(0,"div",32),m(1," Username must be at least 3 characters long. "),h())}function Qq(n,e){n&1&&(p(0,"div",32),m(1," Please provide a valid email address. "),h())}function Yq(n,e){n&1&&(p(0,"div",32),m(1," Password must be at least 6 characters long. "),h())}function Zq(n,e){n&1&&(p(0,"div",32),m(1," Address is required. "),h())}function Jq(n,e){n&1&&(p(0,"div",32),m(1," Profile image is required. "),h())}function Xq(n,e){n&1&&(p(0,"div",32),m(1," Phone number is required. "),h())}var dm=class n{constructor(e,t,r,i,o){this.fb=e;this.router=t;this.firestore=r;this.authService=i;this.auth=o;this.registrationForm=this.fb.group({username:["",[be.required,be.minLength(3)]],email:["",[be.required,be.email]],password:["",[be.required,be.minLength(6)]],address:["",be.required],phoneNumber:["",[be.required,be.pattern("^[0-9]{10}$")]],role:["",be.required],profileImage:["",be.required]})}registrationForm;selectedProfileImage=null;isSubmitDisabled=!0;isLoading=!1;ngOnInit(){this.checkAuthentication()}checkAuthentication(){this.authService.getUserEmail()&&this.router.navigate(["/dashboard"])}onSelectProfileImage(e){let t=e.target.files[0];if(t){let r=new FileReader;r.onload=i=>{let o=i.target.result;this.registrationForm.get("profileImage")?.setValue(o),this.selectedProfileImage=o,this.checkFormValidity()},r.readAsDataURL(t)}}encryptImage(e){return btoa(e)}decryptImage(e){return atob(e)}onSubmit(){return E(this,null,function*(){if(this.isLoading=!0,this.registrationForm.valid){let{username:e,email:t,password:r,address:i,phoneNumber:o,role:s,profileImage:a}=this.registrationForm.value;try{let u=(yield J1(this.auth,t,r)).user.uid,d=s==="Auctioner"?"auctioneers":s==="Bidder"?"bidders":"admins",g=je(this.firestore,`${d}/${u}`);yield lm(g,{username:e,email:t,password:r,address:i,phoneNumber:o,role:s,profileImage:this.encryptImage(a),uid:u,createdAt:new Date}),alert("Registration successful!"),this.router.navigate(["/login"])}catch(c){console.error("Registration failed:",c),alert(c.message||"An error occurred during registration.")}}else alert("Please fill all fields correctly.");this.isLoading=!1})}checkFormValidity(){this.isSubmitDisabled=!this.registrationForm.valid||!this.selectedProfileImage}navigateToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(z(Vn),z(Tt),z(dt),z(Qt),z(Nt))};static \u0275cmp=at({type:n,selectors:[["app-registration"]],decls:64,vars:9,consts:[["class","loading-bar",4,"ngIf"],[1,"form-wrapper"],[3,"ngSubmit","formGroup"],["for","username"],[1,"input-icon"],[1,"fas","fa-user"],["id","username","type","text","formControlName","username","placeholder","Enter your username"],["class","error",4,"ngIf"],["for","email"],[1,"fas","fa-envelope"],["id","email","type","email","formControlName","email","placeholder","Enter your email"],["for","password"],[1,"fas","fa-lock"],["id","password","type","password","formControlName","password","placeholder","Enter your password"],["for","address"],[1,"fas","fa-map-marker-alt"],["id","address","formControlName","address","placeholder","Enter your address"],["for","profileImage"],[1,"fas","fa-image"],["id","profileImage","type","file","formControlName","profileImage",3,"change"],["for","phoneNumber"],[1,"fas","fa-phone"],["id","phoneNumber","type","text","formControlName","phoneNumber","placeholder","Enter your phone number"],["for","role"],[1,"fas","fa-user-tag"],["id","role","formControlName","role"],["value","Auctioner"],["value","Bidder"],["value","Admin"],["type","submit",3,"disabled"],[3,"click"],[1,"loading-bar"],[1,"error"]],template:function(t,r){if(t&1&&(p(0,"body"),Y(1,Wq,1,0,"div",0),p(2,"div",1)(3,"form",2),B("ngSubmit",function(){return r.onSubmit()}),p(4,"div")(5,"label",3),m(6,"Username"),h(),p(7,"div",4),J(8,"i",5)(9,"input",6),h(),Y(10,Kq,2,0,"div",7),h(),p(11,"div")(12,"label",8),m(13,"Email"),h(),p(14,"div",4),J(15,"i",9)(16,"input",10),h(),Y(17,Qq,2,0,"div",7),h(),p(18,"div")(19,"label",11),m(20,"Password"),h(),p(21,"div",4),J(22,"i",12)(23,"input",13),h(),Y(24,Yq,2,0,"div",7),h(),p(25,"div")(26,"label",14),m(27,"Address"),h(),p(28,"div",4),J(29,"i",15)(30,"textarea",16),h(),Y(31,Zq,2,0,"div",7),h(),p(32,"div")(33,"label",17),m(34,"Profile Image"),h(),p(35,"div",4),J(36,"i",18),p(37,"input",19),B("change",function(o){return r.onSelectProfileImage(o)}),h()(),Y(38,Jq,2,0,"div",7),h(),p(39,"div")(40,"label",20),m(41,"Phone Number"),h(),p(42,"div",4),J(43,"i",21)(44,"input",22),h(),Y(45,Xq,2,0,"div",7),h(),p(46,"div")(47,"label",23),m(48,"Role"),h(),p(49,"div",4),J(50,"i",24),p(51,"select",25)(52,"option",26),m(53,"Auctioner"),h(),p(54,"option",27),m(55,"Bidder"),h(),p(56,"option",28),m(57,"Admin"),h()()()(),p(58,"button",29),m(59,"Register"),h(),p(60,"p"),m(61," Already have an account? "),p(62,"a",30),B("click",function(){return r.navigateToLogin()}),m(63,"Login here"),h()()()()()),t&2){let i,o,s,a,c,u;v(),k("ngIf",r.isLoading),v(2),k("formGroup",r.registrationForm),v(7),k("ngIf",((i=r.registrationForm.get("username"))==null?null:i.invalid)&&((i=r.registrationForm.get("username"))==null?null:i.touched)),v(7),k("ngIf",((o=r.registrationForm.get("email"))==null?null:o.invalid)&&((o=r.registrationForm.get("email"))==null?null:o.touched)),v(7),k("ngIf",((s=r.registrationForm.get("password"))==null?null:s.invalid)&&((s=r.registrationForm.get("password"))==null?null:s.touched)),v(7),k("ngIf",((a=r.registrationForm.get("address"))==null?null:a.invalid)&&((a=r.registrationForm.get("address"))==null?null:a.touched)),v(7),k("ngIf",((c=r.registrationForm.get("profileImage"))==null?null:c.invalid)&&((c=r.registrationForm.get("profileImage"))==null?null:c.touched)),v(7),k("ngIf",((u=r.registrationForm.get("phoneNumber"))==null?null:u.invalid)&&((u=r.registrationForm.get("phoneNumber"))==null?null:u.touched)),v(13),k("disabled",!r.registrationForm.valid)}},dependencies:[un,Cr,Tr,xr,ln,Sr,Ln,Ir,sr,ar,Et,St],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:linear-gradient(150deg,#6a11cb,#8c0b8e,#7b0eac);min-height:100vh;width:100%;margin:0;top:0;left:0;display:flex;position:fixed;justify-content:center;align-items:center}.form-wrapper[_ngcontent-%COMP%]{width:100%;max-width:100%;height:100vh;overflow-y:auto;padding:20px 0;display:flex;justify-content:center;align-items:flex-start}form[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0 auto;padding:30px;border-radius:15px;background:#ffffff26;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);box-shadow:0 4px 30px #0000004d;border:1px solid rgba(255,255,255,.2);animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700;font-size:14px;color:#fff}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:15px;border:none;border-radius:5px;border:1px solid rgba(255,255,255,.3);font-size:14px;background:#fff3;color:#000;transition:all .3s ease-in-out}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border:2px solid #00c6ff;box-shadow:0 0 5px #00c6ffb3}.input-icon[_ngcontent-%COMP%]{position:relative}.input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:10px;top:35%;transform:translateY(-50%);font-size:16px;color:#00fff7}.input-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-icon[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-icon[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding-left:35px;box-sizing:border-box}input[_ngcontent-%COMP%]::placeholder{color:#f0f0f0cc;font-weight:300}textarea[_ngcontent-%COMP%]::placeholder{color:#f0f0f0cc;font-weight:300}button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:700;color:#fff;background:linear-gradient(to right,#007bff,#00c6ff);border:none;border-radius:8px;cursor:pointer;transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#0056b3,#007bff);transform:translateY(-2px);box-shadow:0 4px 8px #0000004d}button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed;box-shadow:none}.error[_ngcontent-%COMP%]{color:#ffc107;font-size:.9em;margin-top:-10px;margin-bottom:10px}a[_ngcontent-%COMP%]{color:#00fff7;text-decoration:none;cursor:pointer}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.loading-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:4px;width:100%;background:linear-gradient(to right,#2196f3,#42a5f5,#64b5f6);z-index:10000;animation:_ngcontent-%COMP%_loadingSlide 1.5s infinite ease-in-out;box-shadow:0 2px 5px #00000026}@keyframes _ngcontent-%COMP%_loadingSlide{0%{transform:scaleX(0);transform-origin:left}50%{transform:scaleX(.5);transform-origin:center}to{transform:scaleX(1);transform-origin:right}}@media (max-width: 480px){.form-wrapper[_ngcontent-%COMP%]{height:100vh;overflow-y:auto;padding:10px 0}form[_ngcontent-%COMP%]{padding:20px;max-width:95%;margin:20px auto;border-radius:12px}label[_ngcontent-%COMP%]{font-size:13px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:13px;padding:10px 10px 10px 30px}.input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;top:30%}button[_ngcontent-%COMP%]{padding:10px;font-size:14px}.error[_ngcontent-%COMP%]{font-size:.8em}}@media (min-width: 481px) and (max-width: 1024px){.form-wrapper[_ngcontent-%COMP%]{height:100vh;overflow-y:auto;padding:15px 0}form[_ngcontent-%COMP%]{padding:25px;max-width:85%;margin:30px auto;border-radius:14px}label[_ngcontent-%COMP%]{font-size:14px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:14px;padding:10px 10px 10px 32px}.input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:15px;top:33%}button[_ngcontent-%COMP%]{padding:12px;font-size:15px}}"]})};function e8(n,e){n&1&&J(0,"div",10)}function t8(n,e){n&1&&(p(0,"div",11),m(1," Please enter a valid email address. "),h())}var hm=class n{constructor(e,t){this.fb=e;this.router=t;this.recoveryForm=this.fb.group({email:["",[be.required,be.email]]})}recoveryForm;auth=K(Nt);firestore=K(dt);isLoading=!1;onSubmit(){return E(this,null,function*(){if(this.isLoading=!0,!this.recoveryForm.valid)return;let e=this.recoveryForm.get("email")?.value.trim(),t=["bidders","admins","auctioneers"],r=null,i="";try{for(let a of t){let c=je(this.firestore,`${a}/${e}`),u=yield rt(c);if(u.exists()){r=u.data(),i=a;break}}if(!r){alert(`No user found with the email: ${e}`);return}let o=r.username||"User";if(!(yield this.checkEmailInFirebaseAuth(e))){alert(`Email ${e} is not registered in the system. Please contact support.`);return}yield eM(this.auth,e),alert(`Hi ${o}, a recovery email was sent to ${e} (${i}).`),this.router.navigate(["/login"])}catch(o){alert(`Error sending recovery email: ${o.message}`)}finally{this.isLoading=!1}})}checkEmailInFirebaseAuth(e){return E(this,null,function*(){this.isLoading=!0;try{return yield mp(this.auth,e,"dummy_wrong_password"),!0}catch(t){return t.code!=="auth/user-not-found"}finally{this.isLoading=!1}})}navigateToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(z(Vn),z(Tt))};static \u0275cmp=at({type:n,selectors:[["app-password-recovery"]],decls:19,vars:4,consts:[["class","loading-bar",4,"ngIf"],[1,"recovery-container"],[3,"ngSubmit","formGroup"],["for","email"],[1,"input-icon"],[1,"fas","fa-envelope"],["id","email","type","email","formControlName","email","placeholder","Enter your email"],["class","error",4,"ngIf"],["type","submit",3,"disabled"],[3,"click"],[1,"loading-bar"],[1,"error"]],template:function(t,r){if(t&1&&(p(0,"body"),Y(1,e8,1,0,"div",0),p(2,"div",1)(3,"h2"),m(4,"Password Recovery"),h(),p(5,"form",2),B("ngSubmit",function(){return r.onSubmit()}),p(6,"div")(7,"label",3),m(8,"Enter Your Registered Email"),h(),p(9,"div",4),J(10,"i",5)(11,"input",6),h(),Y(12,t8,2,0,"div",7),h(),p(13,"button",8),m(14,"Send Recovery Email"),h(),p(15,"p"),m(16," Remember your password? "),p(17,"a",9),B("click",function(){return r.navigateToLogin()}),m(18,"Login here"),h()()()()()),t&2){let i;v(),k("ngIf",r.isLoading),v(4),k("formGroup",r.recoveryForm),v(7),k("ngIf",((i=r.recoveryForm.get("email"))==null?null:i.invalid)&&((i=r.recoveryForm.get("email"))==null?null:i.touched)),v(),k("disabled",!r.recoveryForm.valid)}},dependencies:[Et,St,un,Cr,ln,Ln,Ir,sr,ar],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:linear-gradient(150deg,#6a11cb,#8c0b8e,#7b0eac);min-height:100vh;width:100%;margin:0;top:0;left:0;display:flex;position:fixed;justify-content:center;align-items:center}.recovery-container[_ngcontent-%COMP%]{background:#ffffff26;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:15px;box-shadow:0 4px 30px #0000004d;padding:20px;width:350px;text-align:center;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out}h2[_ngcontent-%COMP%]{font-size:1.5em;color:#fff;margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;text-align:left;color:#e0e0e0}input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:15px;border:none;border-radius:5px;border:1px solid rgba(255,255,255,.3);font-size:14px;background:#fff3;color:#000;transition:all .3s ease-in-out}.input-icon[_ngcontent-%COMP%]{position:relative;margin-bottom:15px}.input-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff80;transition:box-shadow .3s ease-in-out}.input-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 30px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box}.input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:10px;top:35%;transform:translateY(-50%);color:#00fff7}input[_ngcontent-%COMP%]::placeholder{color:#f0f0f0cc;font-weight:300}button[_ngcontent-%COMP%]{padding:12px;font-size:16px;font-weight:700;color:#fff;background:linear-gradient(to right,#007bff,#00c6ff);border:none;border-radius:8px;cursor:pointer;transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#0056b3,#007bff);transform:translateY(-2px);box-shadow:0 4px 8px #0000004d}button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed;box-shadow:none}p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00fff7;text-decoration:none;cursor:pointer}p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error[_ngcontent-%COMP%]{color:#ffc107;font-size:.9em;margin-top:-10px;margin-bottom:10px}@media (max-width: 480px){.recovery-container[_ngcontent-%COMP%]{width:90%;padding:16px;border-radius:12px;box-shadow:0 2px 20px #00000040;margin:20px auto}h2[_ngcontent-%COMP%]{font-size:1.3em}input[_ngcontent-%COMP%], .input-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:13px;padding:10px 25px}.input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:30%;font-size:16px}button[_ngcontent-%COMP%]{padding:10px;font-size:14px}}@media (min-width: 481px) and (max-width: 1024px){.recovery-container[_ngcontent-%COMP%]{width:75%;padding:20px;border-radius:14px;margin:30px auto}h2[_ngcontent-%COMP%]{font-size:1.4em}input[_ngcontent-%COMP%], .input-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px;padding:10px 28px}.input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:33%;font-size:17px}button[_ngcontent-%COMP%]{padding:12px;font-size:15px}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.loading-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:4px;width:100%;background:linear-gradient(to right,#2196f3,#42a5f5,#64b5f6);z-index:10000;animation:_ngcontent-%COMP%_loadingSlide 1.5s infinite ease-in-out;box-shadow:0 2px 5px #00000026}@keyframes _ngcontent-%COMP%_loadingSlide{0%{transform:scaleX(0);transform-origin:left}50%{transform:scaleX(.5);transform-origin:center}to{transform:scaleX(1);transform-origin:right}}"]})};var Lt=[];for(let n=0;n<256;++n)Lt.push((n+256).toString(16).slice(1));function iO(n,e=0){return(Lt[n[e+0]]+Lt[n[e+1]]+Lt[n[e+2]]+Lt[n[e+3]]+"-"+Lt[n[e+4]]+Lt[n[e+5]]+"-"+Lt[n[e+6]]+Lt[n[e+7]]+"-"+Lt[n[e+8]]+Lt[n[e+9]]+"-"+Lt[n[e+10]]+Lt[n[e+11]]+Lt[n[e+12]]+Lt[n[e+13]]+Lt[n[e+14]]+Lt[n[e+15]]).toLowerCase()}var wE,n8=new Uint8Array(16);function bE(){if(!wE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");wE=crypto.getRandomValues.bind(crypto)}return wE(n8)}var r8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),EE={randomUUID:r8};function i8(n,e,t){if(EE.randomUUID&&!e&&!n)return EE.randomUUID();n=n||{};let r=n.random??n.rng?.()??bE();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=r[i];return e}return iO(r)}var IE=i8;var o8=["products"],s8=n=>({active:n}),a8=(n,e)=>({"slide-in":n,"slide-out":e}),c8=()=>["Active","Sold"];function l8(n,e){n&1&&J(0,"div",71)}function u8(n,e){if(n&1&&J(0,"img",72),n&2){let t=G();k("src",t.profileImageUrl,et)}}function d8(n,e){n&1&&(p(0,"div",73)(1,"p"),m(2,"Loading products..."),h()())}function h8(n,e){if(n&1&&(p(0,"div")(1,"p")(2,"strong"),m(3,"Current Highest Bid:"),h(),m(4),h(),p(5,"p")(6,"strong"),m(7,"By:"),h(),m(8),h()()),n&2){let t=G().$implicit;v(4),L(" \u20B9",t.currentHighestBid,""),v(4),L(" ",t.currentHighestBidderName||"N/A","")}}function f8(n,e){if(n&1){let t=Ct();p(0,"div",74),B("click",function(){let i=ue(t).$implicit,o=G();return de(o.viewProductDetails(i))}),J(1,"img",75),p(2,"h4"),m(3),h(),p(4,"p"),m(5),h(),Y(6,h8,9,2,"div",76),p(7,"button",77),m(8),h()()}if(n&2){let t=e.$implicit,r=G();v(),k("src",t.productImage,et),v(2),$(t.productName),v(2),L("Starting Price: \u20B9",t.minimumPrice,""),v(),k("ngIf",OD(6,c8).includes(r.getProductStatus(t))&&t.currentHighestBid),v(),k("ngClass",r.getStatusClass(t)),v(),L(" ",r.getProductStatus(t)," ")}}function p8(n,e){if(n&1&&(p(0,"div",82)(1,"h3"),m(2,"Highest Bidder Details"),h(),p(3,"p")(4,"strong"),m(5,"Name:"),h(),m(6),h(),p(7,"p")(8,"strong"),m(9,"Email:"),h(),m(10),h(),p(11,"p")(12,"strong"),m(13,"Phone:"),h(),m(14),h(),p(15,"p")(16,"strong"),m(17,"Bidded Amount:"),h(),m(18),h()()),n&2){let t=G(2);v(6),L(" ",t.selectedProduct.currentHighestBidderName,""),v(4),L(" ",t.selectedProduct.currentHighestBidderEmail,""),v(4),L(" ",t.selectedProduct.currentHighestBidderPhone,""),v(4),L(" \u20B9",t.selectedProduct.currentHighestBid,"")}}function m8(n,e){if(n&1){let t=Ct();p(0,"div",78)(1,"div",79)(2,"span",80),B("click",function(){ue(t);let i=G();return de(i.closeProductDetails())}),m(3,"\xD7"),h(),p(4,"h2"),m(5),h(),J(6,"img",75),p(7,"p")(8,"strong"),m(9,"Category:"),h(),m(10),h(),p(11,"p")(12,"strong"),m(13,"Starting Price:"),h(),m(14),h(),p(15,"p")(16,"strong"),m(17,"Quantity:"),h(),m(18),h(),p(19,"p")(20,"strong"),m(21,"Condition:"),h(),m(22),h(),p(23,"p")(24,"strong"),m(25,"Warranty:"),h(),m(26),h(),p(27,"p")(28,"strong"),m(29,"Description:"),h(),m(30),h(),p(31,"p")(32,"strong"),m(33,"Auction Date:"),h(),m(34),h(),p(35,"p")(36,"strong"),m(37,"Auction Time:"),h(),m(38),h(),p(39,"p")(40,"strong"),m(41,"Auction End Date:"),h(),m(42),h(),p(43,"p")(44,"strong"),m(45,"Auction End Time:"),h(),m(46),h(),Y(47,p8,19,4,"div",81),h()()}if(n&2){let t=G();v(5),$(t.selectedProduct.productName),v(),k("src",t.selectedProduct.productImage,et),v(4),L(" ",t.selectedProduct.productCategory,""),v(4),L(" \u20B9",t.selectedProduct.minimumPrice,""),v(4),L(" ",t.selectedProduct.quantity,""),v(4),L(" ",t.selectedProduct.condition,""),v(4),L(" ",t.selectedProduct.warranty||"N/A",""),v(4),L(" ",t.selectedProduct.description,""),v(4),L(" ",t.selectedProduct.sessionDate,""),v(4),L(" ",t.formatTime(t.selectedProduct.sessionTime),""),v(4),L(" ",t.selectedProduct.endDate,""),v(4),L(" ",t.formatTime(t.selectedProduct.endTime),""),v(),k("ngIf",t.selectedProduct.currentHighestBidderName)}}function g8(n,e){n&1&&(p(0,"div",83),m(1," Product Name is required. "),h())}function _8(n,e){n&1&&(p(0,"div",83),m(1," Product Category is required. "),h())}function y8(n,e){n&1&&(p(0,"div",83),m(1," Minimum Price is required and must be greater than 0. "),h())}function v8(n,e){n&1&&(p(0,"div",83),m(1," Quantity is required and must be greater than 0. "),h())}function w8(n,e){n&1&&(p(0,"div",83),m(1," Product Condition is required. "),h())}function b8(n,e){n&1&&(p(0,"div",83),m(1," Auction Date is required. "),h())}function E8(n,e){n&1&&(p(0,"div",83),m(1," Auction Time is required. "),h())}function I8(n,e){n&1&&(p(0,"div",83),m(1," Auction End Date is required. "),h())}function C8(n,e){n&1&&(p(0,"div",83),m(1," Auction End Time is required. "),h())}function S8(n,e){n&1&&(p(0,"div",83),m(1," Product Image is required. "),h())}function T8(n,e){if(n&1&&J(0,"img",84),n&2){let t=G();k("src",t.selectedImage,et)}}function x8(n,e){if(n&1&&(p(0,"div",85),m(1),h()),n&2){let t=G();v(),L(" ",t.successMessage," ")}}var fm=class n{constructor(e,t,r,i){this.fb=e;this.router=t;this.firestore=r;this.authService=i;this.auctionForm=this.fb.group({productName:["",be.required],minimumPrice:["",[be.required,be.min(1)]],productCategory:["",be.required],quantity:["",[be.required,be.min(1)]],condition:["",be.required],warranty:[""],description:[""],sessionDate:["",be.required],sessionTime:["",be.required],endDate:["",be.required],endTime:["",be.required]})}auctionForm;selectedImage=null;showAddProduct=!1;isSubmitDisabled=!0;isAuthenticated=!1;products=[];auctioneerEmail=null;auctioneerUsername=null;successMessage="";filteredProducts=[...this.products];profileImageUrl=null;selectedProduct=null;isDashboardVisible=!1;totalProducts=0;activeAuctions=0;upcomingAuctions=0;soldProducts=0;auctioneerUID=null;isMenuOpen=!1;isSubMenuOpen=!1;searchTerm="";selectedStatus="all";selectedCategory="all";isLoading=!1;noProductsFound=!1;productsSection;isProductSubmitted;uid;ngOnInit(){this.checkAuthentication(),setInterval(()=>this.updateProductStatuses(),6e4)}formatTime(e){let[t,r]=e.split(":").map(Number),i=t>=12?"PM":"AM";return`${t%12||12}:${r.toString().padStart(2,"0")} ${i}`}getProductStatus(e){let t=new Date,r=new Date(e.sessionDate+"T"+e.sessionTime),i=new Date(e.sessionDate+"T"+e.endTime);if(t>=r&&t<=i)return"Active";if(t<r&&t.toDateString()===r.toDateString()){let o=Math.ceil((r.getTime()-t.getTime())/6e4);return o<=60?`Upcoming: ${o} minutes remaining`:`Upcoming: In ${Math.ceil(o/60)} hours`}return t<r?r.getDate()===t.getDate()+1?"Upcoming: Tomorrow":`Upcoming: In ${Math.ceil((r.getTime()-t.getTime())/(1e3*60*60*24))} days`:t>i?"Sold":"Unknown Status"}filterProductsByStatus(e){this.isLoading=!0;let t=e.target.value,r=new Date;setTimeout(()=>{this.filteredProducts=this.products.filter(i=>{let o=new Date(i.sessionDate+"T"+i.sessionTime),s=new Date(i.endDate+"T"+i.endTime);return t==="active"?r>=o&&r<=s:t==="upcoming"?r<o:t==="sold-out"?r>s:!0}),this.noProductsFound=this.filteredProducts.length===0,this.isLoading=!1},500)}getStatusClass(e){let t=this.getProductStatus(e).toLowerCase();return t.startsWith("upcoming")?"upcoming":t.includes("active")?"active":t.includes("sold")?"sold":"unknown"}checkAuthentication(){return E(this,null,function*(){let e=this.authService.getUserId();e?(this.isAuthenticated=!0,this.auctioneerUID=e,yield this.loadAuctioneerProfile(e),yield this.loadProducts(e)):(this.isAuthenticated=!1,this.router.navigate(["/login"]))})}loadAuctioneerProfile(e){return E(this,null,function*(){try{let t=je(this.firestore,`auctioneers/${e}`),r=yield rt(t);if(r.exists()){let i=r.data();this.auctioneerUsername=i.username,this.profileImageUrl=atob(i.profileImage)}}catch(t){console.error("Error loading profile:",t)}})}onSelect(e){let t=e.target.files[0];if(t){let r=new FileReader;r.onload=i=>{this.selectedImage=i.target.result,this.checkFormValidity()},r.readAsDataURL(t)}}encryptImage(e){return btoa(e)}decryptImage(e){return atob(e)}filterCategory(e){this.isLoading=!0,setTimeout(()=>{e==="all"?this.filteredProducts=[...this.products]:this.filteredProducts=this.products.filter(t=>t.productCategory===e),this.noProductsFound=this.filteredProducts.length===0,this.isLoading=!1,this.isSubMenuOpen=!1},500)}searchProducts(e){this.isLoading=!0;let t=e.target.value.toLowerCase();setTimeout(()=>{t?this.filteredProducts=this.products.filter(r=>r.productName.toLowerCase().includes(t)):this.filteredProducts=[...this.products],this.noProductsFound=this.filteredProducts.length===0,this.isLoading=!1},500)}scrollToSection(e){let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}toggleAddProduct(){this.showAddProduct=!this.showAddProduct}submitProduct(){return E(this,null,function*(){if(this.isLoading=!0,this.auctionForm.valid&&this.selectedImage&&this.auctioneerUID){let{productName:e,minimumPrice:t,productCategory:r,quantity:i,condition:o,warranty:s,description:a,sessionDate:c,sessionTime:u,endDate:d,endTime:g}=this.auctionForm.value,y=this.encryptImage(this.selectedImage),b=IE(),C=new Date,O=new Date(c+"T"+u),R=new Date(d+"T"+g),U;C<O?U="Upcoming":C>=O&&C<=R?U="Active":U="Sold";try{yield lm(je(this.firestore,`auctioneers/${this.auctioneerUID}/products`,b),{productId:b,productName:e,minimumPrice:t,productCategory:r,quantity:i,condition:o,warranty:s,description:a,sessionDate:c,sessionTime:u,endDate:d,endTime:g,productImage:y,status:U}),this.successMessage="Product added successfully!",setTimeout(()=>this.successMessage="",3e3),this.auctionForm.reset(),this.selectedImage=null,this.isSubmitDisabled=!0,this.loadProducts(this.auctioneerUID)}catch(j){console.error("Error storing product:",j)}finally{this.isLoading=!1}}})}updateProductStatuses(){return E(this,null,function*(){if(this.auctioneerUID)try{let e=hc(Ge(this.firestore,`auctioneers/${this.auctioneerUID}/products`)),t=yield We(e),r=rO(this.firestore),i=new Date;t.forEach(o=>{let s=o.data(),a=je(this.firestore,`auctioneers/${this.auctioneerUID}/products/${o.id}`),c=new Date(s.sessionDate+"T"+s.sessionTime),u=new Date(s.endDate+"T"+s.endTime),d=s.status;i<c?d="Upcoming":i>=c&&i<=u?d="Active":i>u&&(d="Sold"),d!==s.status&&r.update(a,{status:d})}),yield r.commit(),this.loadProducts(this.auctioneerUID)}catch(e){console.error("Error updating product statuses:",e)}})}loadProducts(e){return E(this,null,function*(){this.isLoading=!0,this.noProductsFound=!1;try{let t=Ge(this.firestore,`auctioneers/${e}/products`),r=yield We(t);this.products=[],r.forEach(i=>{let o=i.data();o.productImage&&(o.productImage=this.decryptImage(o.productImage)),this.products.push(o)}),this.filteredProducts=[...this.products],this.totalProducts=this.products.length}catch(t){console.error("Error loading products:",t)}finally{this.isLoading=!1}})}viewProductDetails(e){return E(this,null,function*(){this.selectedProduct=e})}closeProductDetails(){this.selectedProduct=null}checkFormValidity(){this.isSubmitDisabled=!this.auctionForm.valid||!this.selectedImage}navigateToDashboard(){this.router.navigate(["/dashboard"])}loadDashboardStats(){this.activeAuctions=this.products.filter(e=>{let t=new Date,r=new Date(e.sessionDate+"T"+e.sessionTime),i=new Date(e.endDate+"T"+e.endTime);return t>=r&&t<=i}).length,this.upcomingAuctions=this.products.filter(e=>{let t=new Date,r=new Date(e.sessionDate+"T"+e.sessionTime);return t<r}).length,this.soldProducts=this.products.filter(e=>{let t=new Date,r=new Date(e.endDate+"T"+e.endTime);return t>r}).length}oncancel(){this.auctionForm.reset(),this.showAddProduct=!1,this.selectedImage=null,this.isSubmitDisabled=!0}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}toggleSubMenu(){this.isSubMenuOpen=!this.isSubMenuOpen}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(z(Vn),z(Tt),z(dt),z(Qt))};static \u0275cmp=at({type:n,selectors:[["app-auctioner"]],viewQuery:function(t,r){if(t&1&&MD(o8,5),t&2){let i;Oy(i=Ny())&&(r.productsSection=i.first)}},decls:144,vars:32,consts:[[1,"main-background"],["class","loading-bar",4,"ngIf"],[1,"navbar"],[1,"navbar-brand"],[1,"hamburger",3,"click"],[1,"navbar-menu",3,"ngClass"],[1,"close-btn",3,"click"],[1,"nav-item",3,"click"],[1,"dropdown"],[1,"nav-item","dropdown-toggle",3,"click"],[1,"arrow"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"nav-item","logout",3,"click"],[1,"auctioneer-container"],[1,"auctioneer-sidebar"],["alt","Auctioneer Profile",3,"src",4,"ngIf"],["id","products",1,"main-content"],[1,"filter-bar"],["for","productFilter"],["id","productFilter",3,"change"],["value","all"],["value","active"],["value","upcoming"],["value","sold-out"],[1,"search-bar"],["type","text","placeholder","Search Products...",3,"input"],["class","loading-spinner",4,"ngIf"],[1,"product-grid"],["class","product-card",3,"click",4,"ngFor","ngForOf"],["class","product-details-modal",4,"ngIf"],[1,"add-product",3,"ngClass"],[3,"ngSubmit","formGroup"],["for","productName"],["id","productName","formControlName","productName","type","text","required",""],["class","error-message",4,"ngIf"],["for","productCategory"],["id","productCategory","formControlName","productCategory","required",""],["value","","disabled","","selected",""],["value","electronics"],["value","fashion"],["value","books"],["value","furniture"],["value","vehicles"],["value","others"],["for","minimumPrice"],["id","minimumPrice","formControlName","minimumPrice","type","number","required",""],["for","quantity"],["id","quantity","formControlName","quantity","type","number","required",""],["for","condition"],["id","condition","formControlName","condition","required",""],["value","new"],["value","used"],["for","warranty"],["id","warranty","formControlName","warranty","type","text"],["for","sessionDate"],["id","sessionDate","formControlName","sessionDate","type","date","required",""],["for","sessionTime"],["id","sessionTime","formControlName","sessionTime","type","time","required",""],["for","endDate"],["id","endDate","formControlName","endDate","type","date","required",""],["for","endTime"],["id","endTime","formControlName","endTime","type","time","required",""],["for","description"],["id","description","formControlName","description"],["for","productImage"],["id","productImage","type","file","required","",3,"change"],["alt","Preview","class","image-preview",3,"src",4,"ngIf"],["type","submit",3,"disabled"],["type","button",3,"click"],["class","success-message",4,"ngIf"],[1,"loading-bar"],["alt","Auctioneer Profile",3,"src"],[1,"loading-spinner"],[1,"product-card",3,"click"],["alt","Product Image",3,"src"],[4,"ngIf"],[1,"status-button",3,"ngClass"],[1,"product-details-modal"],[1,"modal-content"],[1,"close-button",3,"click"],["class","bidder-details",4,"ngIf"],[1,"bidder-details"],[1,"error-message"],["alt","Preview",1,"image-preview",3,"src"],[1,"success-message"]],template:function(t,r){if(t&1&&(p(0,"body",0),Y(1,l8,1,0,"div",1),p(2,"nav",2)(3,"div",3)(4,"h2"),m(5,"Auction Bazaar"),h()(),p(6,"div",4),B("click",function(){return r.toggleMenu()}),J(7,"span")(8,"span")(9,"span"),h(),p(10,"div",5)(11,"span",6),B("click",function(){return r.toggleMenu()}),m(12,"\xD7"),h(),p(13,"a",7),B("click",function(){return r.navigateToDashboard()}),m(14,"Dashboard"),h(),p(15,"a",7),B("click",function(){return r.toggleAddProduct()}),m(16,"Add Product"),h(),m(17,"\\ "),p(18,"div",8)(19,"a",9),B("click",function(){return r.toggleSubMenu()}),m(20," Products Categories "),p(21,"span",10),m(22,"\u25BC"),h()(),p(23,"div",11)(24,"a",12),B("click",function(){return r.filterCategory("electronics")}),m(25,"Electronics"),h(),p(26,"a",12),B("click",function(){return r.filterCategory("fashion")}),m(27,"Fashion"),h(),p(28,"a",12),B("click",function(){return r.filterCategory("books")}),m(29,"Books"),h(),p(30,"a",12),B("click",function(){return r.filterCategory("furniture")}),m(31,"Furniture"),h(),p(32,"a",12),B("click",function(){return r.filterCategory("vehicles")}),m(33,"Vehicles"),h(),p(34,"a",12),B("click",function(){return r.filterCategory("others")}),m(35,"Others"),h(),p(36,"a",12),B("click",function(){return r.filterCategory("all")}),m(37,"All"),h()()(),p(38,"a",13),B("click",function(){return r.logout()}),m(39,"Logout"),h()()(),p(40,"div",14)(41,"aside",15),Y(42,u8,1,1,"img",16),p(43,"h1"),m(44),h(),p(45,"p"),m(46),h()(),p(47,"div",17)(48,"h2"),m(49,"Your Products"),h(),p(50,"div",18)(51,"label",19),m(52,"Filter:"),h(),p(53,"select",20),B("change",function(o){return r.filterProductsByStatus(o)}),p(54,"option",21),m(55,"All"),h(),p(56,"option",22),m(57,"Active"),h(),p(58,"option",23),m(59,"Upcoming"),h(),p(60,"option",24),m(61,"Sold Out"),h()()(),p(62,"div",25)(63,"input",26),B("input",function(o){return r.searchProducts(o)}),h()(),Y(64,d8,3,0,"div",27),p(65,"section",28),Y(66,f8,9,7,"div",29),h(),Y(67,m8,48,13,"div",30),h(),p(68,"div",31)(69,"h3"),m(70,"Add New Product"),h(),p(71,"form",32),B("ngSubmit",function(){return r.submitProduct()}),p(72,"label",33),m(73,"Product Name:"),h(),J(74,"input",34),Y(75,g8,2,0,"div",35),p(76,"label",36),m(77,"Product Category:"),h(),p(78,"select",37)(79,"option",38),m(80,"Select a Category"),h(),p(81,"option",39),m(82,"Electronics"),h(),p(83,"option",40),m(84,"Fashion"),h(),p(85,"option",41),m(86,"Books"),h(),p(87,"option",42),m(88,"Furniture"),h(),p(89,"option",43),m(90,"Vehicles"),h(),p(91,"option",44),m(92,"Others"),h()(),Y(93,_8,2,0,"div",35),p(94,"label",45),m(95,"Minimum Price:"),h(),J(96,"input",46),Y(97,y8,2,0,"div",35),p(98,"label",47),m(99,"Quantity Available:"),h(),J(100,"input",48),Y(101,v8,2,0,"div",35),p(102,"label",49),m(103,"Product Condition:"),h(),p(104,"select",50)(105,"option",38),m(106,"Select Condition"),h(),p(107,"option",51),m(108,"New"),h(),p(109,"option",52),m(110,"Used"),h()(),Y(111,w8,2,0,"div",35),p(112,"label",53),m(113,"Warranty Period (if any):"),h(),J(114,"input",54),p(115,"label",55),m(116,"Auction Date:"),h(),J(117,"input",56),Y(118,b8,2,0,"div",35),p(119,"label",57),m(120,"Auction Time:"),h(),J(121,"input",58),Y(122,E8,2,0,"div",35),p(123,"label",59),m(124,"Auction End Date:"),h(),J(125,"input",60),Y(126,I8,2,0,"div",35),p(127,"label",61),m(128,"Auction End Time:"),h(),J(129,"input",62),Y(130,C8,2,0,"div",35),p(131,"label",63),m(132,"Product Description:"),h(),J(133,"textarea",64),p(134,"label",65),m(135,"Product Image:"),h(),p(136,"input",66),B("change",function(o){return r.onSelect(o)}),h(),Y(137,S8,2,0,"div",35)(138,T8,1,1,"img",67),p(139,"button",68),m(140,"Submit Product"),h(),p(141,"button",69),B("click",function(){return r.oncancel()}),m(142,"Cancel"),h()(),Y(143,x8,2,1,"div",70),h()()()),t&2){let i,o,s,a,c,u,d,g,y,b;v(),k("ngIf",r.isLoading),v(9),k("ngClass",ir(27,s8,r.isMenuOpen)),v(11),cn("rotate",r.isSubMenuOpen),v(2),cn("show",r.isSubMenuOpen),v(19),k("ngIf",r.profileImageUrl),v(2),$(r.auctioneerUsername),v(2),L("Auctioneer ",r.auctioneerEmail,""),v(18),k("ngIf",r.isLoading),v(2),k("ngForOf",r.filteredProducts),v(),k("ngIf",r.selectedProduct),v(),k("ngClass",ef(29,a8,r.showAddProduct,!r.showAddProduct)),v(3),k("formGroup",r.auctionForm),v(4),k("ngIf",((i=r.auctionForm.get("productName"))==null?null:i.touched)&&((i=r.auctionForm.get("productName"))==null?null:i.invalid)),v(18),k("ngIf",((o=r.auctionForm.get("productCategory"))==null?null:o.touched)&&((o=r.auctionForm.get("productCategory"))==null?null:o.invalid)),v(4),k("ngIf",((s=r.auctionForm.get("minimumPrice"))==null?null:s.touched)&&((s=r.auctionForm.get("minimumPrice"))==null?null:s.invalid)),v(4),k("ngIf",((a=r.auctionForm.get("quantity"))==null?null:a.touched)&&((a=r.auctionForm.get("quantity"))==null?null:a.invalid)),v(10),k("ngIf",((c=r.auctionForm.get("condition"))==null?null:c.touched)&&((c=r.auctionForm.get("condition"))==null?null:c.invalid)),v(7),k("ngIf",((u=r.auctionForm.get("sessionDate"))==null?null:u.touched)&&((u=r.auctionForm.get("sessionDate"))==null?null:u.invalid)),v(4),k("ngIf",((d=r.auctionForm.get("sessionTime"))==null?null:d.touched)&&((d=r.auctionForm.get("sessionTime"))==null?null:d.invalid)),v(4),k("ngIf",((g=r.auctionForm.get("endDate"))==null?null:g.touched)&&((g=r.auctionForm.get("endDate"))==null?null:g.invalid)),v(4),k("ngIf",((y=r.auctionForm.get("endTime"))==null?null:y.touched)&&((y=r.auctionForm.get("endTime"))==null?null:y.invalid)),v(7),k("ngIf",!r.selectedImage&&((b=r.auctionForm.get("productImage"))==null?null:b.touched)),v(),k("ngIf",r.selectedImage),v(),k("disabled",r.isSubmitDisabled),v(4),k("ngIf",r.successMessage)}},dependencies:[un,Cr,Tr,xr,ln,Wv,Sr,Ln,Ir,Wl,sr,ar,Et,wr,br,St],styles:["body.main-background[_ngcontent-%COMP%]{background:linear-gradient(150deg,#6a11cb,#8c0b8e,#7b0eac);width:100%;min-height:100vh;padding-right:20px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-family:Arial,sans-serif;color:#fff;margin:-8px;overflow-x:hidden}.navbar[_ngcontent-%COMP%]{width:100%;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;background:#ffffff14;backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);border-bottom:1px solid rgba(255,255,255,.1);z-index:1000;position:relative}.navbar-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ffd9ec;font-size:1.8rem;font-weight:700;letter-spacing:1.2px;text-shadow:0 2px 4px rgba(0,0,0,.2)}.hamburger[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:5px;cursor:pointer;z-index:1100}.hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:25px;height:3px;background:#fff;border-radius:2px;transition:.3s ease}.navbar-menu[_ngcontent-%COMP%]{display:flex;gap:1.2rem;align-items:center;transition:transform .4s ease}.nav-item[_ngcontent-%COMP%]{color:#fff;font-size:1rem;font-weight:500;text-decoration:none;padding:.5rem .9rem;border-radius:6px;cursor:pointer;transition:all .3s ease,transform .3s ease}.nav-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);background:#ffffff26;color:#ffdefa}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;cursor:pointer}.arrow[_ngcontent-%COMP%]{transition:transform .3s ease}.arrow.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown-menu[_ngcontent-%COMP%]{display:none;flex-direction:column;position:absolute;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:10px;margin-top:.5rem;z-index:999;box-shadow:0 4px 12px #00000040;max-height:150px;overflow-y:auto;width:200px;opacity:0;visibility:hidden;transform:translateY(-10px);transition:opacity .3s ease,transform .3s ease;scrollbar-width:thin;scrollbar-color:#fff transparent}.dropdown-menu.show[_ngcontent-%COMP%]{display:flex;opacity:1;visibility:visible;transform:translateY(0)}.dropdown-item[_ngcontent-%COMP%]{padding:.7rem 1.2rem;color:#fff;text-decoration:none;transition:background .3s ease,transform .3s ease}.dropdown-item[_ngcontent-%COMP%]:hover{transform:translate(5px);background:#ffffff1a;color:#ffd9ec}.close-btn[_ngcontent-%COMP%]{display:none;font-size:2rem;font-weight:700;color:#fff;cursor:pointer;align-self:flex-end;margin-bottom:1rem;background:transparent;border:none}@media (max-width: 992px){.hamburger[_ngcontent-%COMP%]{display:flex}.hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:all .3s ease,transform .3s ease}.hamburger[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{transform:translateY(-2px) scale(1.05)}.navbar-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;flex-direction:column;align-items:flex-start;width:260px;height:95vh;background:#1e003cf7;padding:2rem 1.5rem;gap:1rem;transition:left .4s ease}.navbar-menu.active[_ngcontent-%COMP%]{left:0}.nav-item[_ngcontent-%COMP%]{width:100%;padding:1rem;box-sizing:border-box;font-size:1.1rem;border-bottom:1px solid rgba(255,255,255,.1);transition:all .3s ease,transform .3s ease}.nav-item[_ngcontent-%COMP%]:hover{padding:1rem 1.6rem;transform:scale(1.03)}.dropdown-menu[_ngcontent-%COMP%]{position:relative;box-shadow:none;padding-left:1rem;margin-top:.5rem;text-decoration:none}.dropdown-toggle[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;font-size:1.1rem}.dropdown-menu.show[_ngcontent-%COMP%]{display:flex}.dropdown-item[_ngcontent-%COMP%]{cursor:pointer;font-size:1rem;padding:.5rem 1rem}.close-btn[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;transition:all .3s ease,transform .3s ease}.close-btn[_ngcontent-%COMP%]:hover{color:#ffc107;transform:scale(1.1)}}@media screen and (max-width: 576px){.hamburger[_ngcontent-%COMP%]{display:flex;margin-left:auto;margin-top:-35px}.navbar-menu[_ngcontent-%COMP%]{height:160vh}}.auctioneer-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;width:100%;padding:2rem;gap:2rem;margin-top:20px;flex-wrap:wrap}.auctioneer-sidebar[_ngcontent-%COMP%]{width:280px;background:#ffffff14;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border-radius:18px;padding:2rem 1.5rem;text-align:center;box-shadow:0 8px 24px #0006;transition:all .3s ease-in-out;position:relative;overflow:hidden;border:1px solid rgba(255,255,255,.2);z-index:10}.auctioneer-sidebar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;border-radius:50%;border:3px solid #00fff7;box-shadow:0 0 15px #00fff7;margin-bottom:1rem;transition:transform .3s ease}.auctioneer-sidebar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.auctioneer-sidebar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;margin-bottom:.5rem;background:linear-gradient(90deg,#00fff7,#ffb6f9);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:1px}.auctioneer-sidebar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#fff;background:#00fff71a;padding:.4rem 1rem;border-radius:12px;border:1px solid rgba(0,255,247,.3);display:inline-block;transition:background .3s ease}.auctioneer-sidebar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background:#00fff733}@media screen and (max-width: 768px){.auctioneer-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center;padding:1.5rem}.auctioneer-sidebar[_ngcontent-%COMP%]{align-items:center;width:90%;max-width:390px}}@media screen and (max-width: 576px){.auctioneer-container[_ngcontent-%COMP%]{align-items:center}.auctioneer-sidebar[_ngcontent-%COMP%]{align-items:center;width:90%;max-width:300px}.auctioneer-sidebar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px}.auctioneer-sidebar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem}.auctioneer-sidebar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}.main-content[_ngcontent-%COMP%]{flex-grow:1;background-color:#9c27b0;padding:20px;border-radius:10px;box-shadow:0 4px 8px #0003}.main-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#fff}.filter-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:15px;background:#fff3;border:1px solid #ccc;border-radius:8px;padding:10px 20px;margin-bottom:20px;box-shadow:0 4px 6px #0000001a}.filter-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;color:#fff}.filter-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:180px;padding:8px 12px;border:1px solid rgba(255,255,255,.2);border-radius:8px;font-size:14px;color:#000;background:#ffffff1a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);cursor:pointer;transition:border-color .3s ease,box-shadow .3s ease,background-color .3s ease}.filter-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#00ffccb3;box-shadow:0 0 4px #00ffccb3;background:#ffffff26}.filter-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:8px 16px;text-decoration:none;display:block;color:#000;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);transition:background .3s ease,color .3s ease}.filter-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background:#fff3;color:#0fc;border-radius:5px}.filter-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled{color:#999;background:#ffffff0d;cursor:not-allowed}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:20px;border:none;box-sizing:border-box;border-radius:5px}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;max-height:350px;overflow-y:auto;scrollbar-width:none;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.product-card[_ngcontent-%COMP%]{background:#fff3;padding:10px;border-radius:10px;text-align:center;transition:transform .3s ease-in-out}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:70%;height:100px;border-radius:10px}.product-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.status-button[_ngcontent-%COMP%]{margin-top:10px;padding:6px 12px;border-radius:10px;font-size:.9rem;font-weight:700;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.2);color:#fff;background:linear-gradient(135deg,#7b0eac,#6a11cb);transition:all .3s ease-in-out}.status-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);background:linear-gradient(135deg,#8c0b8e,#7b0eac)}.status-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6a11cb,#00c9ff)}.status-button.sold[_ngcontent-%COMP%]{background:#aaa;color:#eee}.status-button.upcoming[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffcc70,#ffb347);color:#333}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{width:90%;margin-top:10px;padding:15px}.filter-bar[_ngcontent-%COMP%]{padding:10px;flex-direction:column;align-items:stretch}.filter-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .filter-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:14px;width:100%}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px;padding:8px}.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:15px}.product-card[_ngcontent-%COMP%]{padding:8px}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;max-width:100%}.product-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem}.product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 576px){.main-content[_ngcontent-%COMP%]{width:90%;margin-left:10px;padding:10px;border-radius:8px}.filter-bar[_ngcontent-%COMP%]{padding:10px;flex-direction:column;align-items:stretch}.filter-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .filter-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:14px;width:100%}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px;padding:8px}.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:15px}.product-card[_ngcontent-%COMP%]{padding:8px}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;max-width:100%}.status-button[_ngcontent-%COMP%]{padding:6px 10px;font-size:.8rem}}.add-product[_ngcontent-%COMP%]{position:fixed;top:52%;right:-100%;transform:translateY(-50%);width:90%;max-width:420px;background:#ffffff1f;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);padding:25px;border-radius:15px 0 0 15px;box-shadow:0 10px 30px #00000059;z-index:1000;transition:transform .7s ease-in-out,right .7s ease-in-out,opacity .5s ease-in-out;max-height:85vh;overflow-y:auto;opacity:0}.add-product.slide-in[_ngcontent-%COMP%]{right:0;opacity:1}.add-product.slide-out[_ngcontent-%COMP%]{right:-100%;opacity:0}.add-product[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#ffdefa;margin-bottom:20px;font-size:1.6rem;letter-spacing:.5px}.add-product[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;color:#fff;margin-bottom:6px;display:block;font-weight:500}.add-product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-product[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-product[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;margin-bottom:15px;font-size:.95rem;border-radius:8px;box-sizing:border-box;background:#ffffff26;color:#000;border:1px solid rgba(255,255,255,.2);transition:all .3s ease-in-out}.add-product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-product[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .add-product[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#0fc;box-shadow:0 0 10px #0fc6}.add-product[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:90px}.add-product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .add-product[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#f0f0f0bf}.add-product[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{background:transparent;border:none;padding:4px 0;color:#eee}.image-preview[_ngcontent-%COMP%]{width:100%;max-width:300px;margin:12px auto 20px;display:block;border-radius:10px;border:2px solid rgba(255,255,255,.3);box-shadow:0 6px 18px #0003}.add-product[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:12px;margin-top:12px;font-size:1rem;font-weight:700;color:#fff;background:linear-gradient(to right,#6a11cb,#8e2de2);border:none;border-radius:8px;cursor:pointer;transition:all .3s ease-in-out}.add-product[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#a94acb,#4c0f99);transform:translateY(-2px);box-shadow:0 4px 8px #00000040}.add-product[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background:#aaa;cursor:not-allowed;box-shadow:none}.error-message[_ngcontent-%COMP%]{color:#ffc107;font-size:.85rem;margin-top:-8px;margin-bottom:12px}.success-message[_ngcontent-%COMP%]{margin-top:20px;color:#0fc;background:#00ffcc1a;padding:12px;border-radius:10px;font-weight:600;text-align:center;border:1px solid rgba(0,255,204,.3)}.add-product[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.add-product[_ngcontent-%COMP%]{scrollbar-width:none}@media screen and (max-width: 768px){.add-product[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.add-product[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.95rem}.add-product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-product[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-product[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:.9rem}.image-preview[_ngcontent-%COMP%]{max-width:100%}}@media screen and (max-width: 480px){.add-product[_ngcontent-%COMP%]{top:53%}.add-product[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:16px}.add-product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-product[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-product[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:9px;font-size:.85rem}.add-product[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.9rem;padding:10px}.success-message[_ngcontent-%COMP%]{font-size:.95rem}.error-message[_ngcontent-%COMP%]{font-size:.8rem}.image-preview[_ngcontent-%COMP%]{max-width:100%;height:auto}}.product-details-modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) rotateY(180deg);transform-style:preserve-3d;animation:_ngcontent-%COMP%_flipInModal .6s ease forwards;background:#1e003c59;border-radius:20px;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);box-shadow:0 10px 40px #0009,inset 0 0 10px #ffffff0d;color:#fff;width:90%;max-width:400px;max-height:88vh;padding:24px;z-index:9999;overflow:hidden;display:flex;flex-direction:column;align-items:center;perspective:1000px}@keyframes _ngcontent-%COMP%_flipInModal{0%{transform:translate(-50%,-50%) rotateY(180deg);opacity:0}to{transform:translate(-50%,-50%) rotateY(0);opacity:1}}.product-details-modal[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{position:absolute;top:12px;right:18px;font-size:1.5rem;background:transparent;border:none;color:#ffd6f0;cursor:pointer;z-index:10;transition:transform .3s ease,color .3s ease}.product-details-modal[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{color:#ffc107;transform:scale(1.2)}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#ffffff0f;border-radius:16px;padding:20px;backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);overflow-y:auto;max-height:60vh;color:#fff;width:100%;box-shadow:inset 0 0 15px #ffffff0d;text-align:left;scrollbar-width:none}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.product-details-modal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:200px;object-fit:contain;border-radius:12px;margin-bottom:18px;border:2px solid rgba(255,255,255,.15);background-color:#ffffff0d;box-shadow:0 10px 24px #ffffff1a}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:600;color:#ffdefa;text-align:center;margin-bottom:14px}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#f4eaff;margin:6px 0;line-height:1.5}.bidder-details[_ngcontent-%COMP%]{margin-top:20px;padding-top:15px;border-top:1px solid rgba(255,255,255,.15)}.bidder-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;color:#0fc;margin-bottom:10px}@media screen and (max-width: 768px){.product-details-modal[_ngcontent-%COMP%]{width:95%;max-width:65vw;max-height:100vh;padding:16px;border-radius:16px}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:16px;max-width:60vw;max-height:75vh}.product-details-modal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:160px;border-radius:10px;margin-bottom:14px}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:12px}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.4}.bidder-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.product-details-modal[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{font-size:1.3rem;top:10px;right:14px}}@media screen and (max-width: 480px){.product-details-modal[_ngcontent-%COMP%]{padding:12px;max-width:80vw;margin-left:-5px}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:14px;max-width:75vw;max-height:70vh}.product-details-modal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:140px}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.bidder-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.05rem}}.loading-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:4px;width:100%;background:linear-gradient(to right,#2196f3,#42a5f5,#64b5f6);z-index:10000;animation:_ngcontent-%COMP%_loadingSlide 1.5s infinite ease-in-out;box-shadow:0 2px 5px #00000026}@keyframes _ngcontent-%COMP%_loadingSlide{0%{transform:scaleX(0);transform-origin:left}50%{transform:scaleX(.5);transform-origin:center}to{transform:scaleX(1);transform-origin:right}}"]})};function D8(n,e){n&1&&J(0,"div",20)}function A8(n,e){if(n&1&&J(0,"img",21),n&2){let t=G();k("src",t.profileImageUrl,et)}}function P8(n,e){if(n&1&&(p(0,"span"),m(1),h()),n&2){let t=G();v(),$(t.auctioneerPassword)}}function M8(n,e){n&1&&(p(0,"span"),m(1,"********"),h())}function R8(n,e){if(n&1&&(p(0,"small"),m(1),h()),n&2){let t=G().$implicit;v(),L("By: ",t.currentHighestBidderName,"")}}function O8(n,e){if(n&1&&(p(0,"tr")(1,"td",22)(2,"div"),m(3),h()(),p(4,"td",23),J(5,"img",24),h(),p(6,"td",25),m(7),J(8,"br"),m(9),h(),p(10,"td",26),m(11),J(12,"br"),m(13),h(),p(14,"td",27),m(15),h(),p(16,"td",28),m(17),J(18,"br"),Y(19,R8,2,1,"small",7),h(),p(20,"td",29),m(21),h(),p(22,"td",30),m(23),h()()),n&2){let t=e.$implicit,r=G();v(3),$(t.productName),v(2),k("src",t.productImage,et),v(2),L(" ",t.sessionDate," "),v(2),L(" ",t.sessionTime," "),v(2),L(" ",t.endDate," "),v(2),L(" ",t.endTime," "),v(2),L(" \u20B9",t.minimumPrice," "),v(2),L(" \u20B9",t.currentHighestBid||"-",""),v(2),k("ngIf",t.currentHighestBidderName),v(2),L(" ",r.calculateProfit(t.minimumPrice,t.currentHighestBid),"% "),v(2),L(" ",r.getProductStatus(t)," ")}}var pm=class n{constructor(e,t,r,i,o){this.firestore=e;this.authService=t;this.router=r;this.location=i;this.auth=o}auctioneerEmail=null;auctioneerUsername=null;auctioneerPassword=null;auctioneerAddress=null;profileImageUrl=null;products=[];filteredProducts=[];totalProducts=0;activeProducts=0;soldProducts=0;upcomingProducts=0;auctionProgress=0;passwordVisible=!1;uid=null;isLoading=!1;ngOnInit(){this.checkAuthentication()}checkAuthentication(){return E(this,null,function*(){let e=this.authService.getUserId(),t=this.authService.getUserRole();e&&t==="Auctioner"?(this.auctioneerEmail=this.authService.getUserEmail(),yield this.loadAuctioneerProfile(e),yield this.loadProducts(e)):this.router.navigate(["/login"])})}loadAuctioneerProfile(e){return E(this,null,function*(){this.isLoading=!0;try{let t=je(this.firestore,`auctioneers/${e}`),r=yield rt(t);if(r.exists()){let i=r.data();this.auctioneerUsername=i?.username||"Auctioneer",this.auctioneerPassword=i?.password||"********",this.auctioneerAddress=i?.address||"Not Provided";let o=i?.profileImage||null;o&&(this.profileImageUrl=this.decryptImage(o))}else console.log("No such document!")}catch(t){console.error("Error getting auctioneer profile:",t)}this.isLoading=!1})}loadProducts(e){return E(this,null,function*(){this.isLoading=!0;try{let t=hc(Ge(this.firestore,`auctioneers/${e}/products`)),r=yield We(t);this.products=r.docs.map(i=>{let o=i.data();return oe(H({},o),{productImage:this.decryptImage(o.productImage),currentHighestBid:o.currentHighestBid||null,currentHighestBidderName:o.currentHighestBidderName||null})}),this.filteredProducts=[...this.products],this.totalProducts=this.filteredProducts.length,this.activeProducts=this.filteredProducts.filter(i=>this.getProductStatus(i)==="Active").length,this.soldProducts=this.filteredProducts.filter(i=>this.getProductStatus(i)==="Sold").length,this.upcomingProducts=this.filteredProducts.filter(i=>this.getProductStatus(i)==="Upcoming").length,this.auctionProgress=this.soldProducts/this.totalProducts*100}catch(t){console.error("Error loading products:",t)}this.isLoading=!1})}calculateProfit(e,t){return!t||!e||t<=e?"0":((t-e)/e*100).toFixed(1)}decryptImage(e){return atob(e)}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}getProductStatus(e){let t=new Date,r=new Date(e.sessionDate+"T"+e.sessionTime),i=new Date(e.endDate+"T"+e.endTime);return t>=r&&t<=i?"Active":t>i?"Sold":t<r?"Upcoming":"Not Started"}viewProductDetails(e){console.log(e)}scrollToSection(e){let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}scrollTable(e){let t=document.querySelector(".table-scroll-wrapper");t&&t.scrollBy({left:e==="left"?-300:300,behavior:"smooth"})}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||n)(z(dt),z(Qt),z(Tt),z(hi),z(Nt))};static \u0275cmp=at({type:n,selectors:[["app-dashboard"]],decls:94,vars:16,consts:[["class","loading-bar",4,"ngIf"],[1,"dashboard-container"],[1,"section-header"],[1,"section","auctioneer-details"],[1,"details"],["alt","Auctioneer Profile","class","profile-img",3,"src",4,"ngIf"],[1,"details-info"],[4,"ngIf"],[3,"click"],[1,"auction-info-grid"],[1,"stat-box"],[1,"progress-container"],[1,"progress-bar"],[1,"table-scroll-wrapper"],[4,"ngFor","ngForOf"],[1,"scroll-buttons"],[1,"scroll-left",3,"click"],[1,"scroll-right",3,"click"],[1,"back-button-wrapper"],[1,"back-button",3,"click"],[1,"loading-bar"],["alt","Auctioneer Profile",1,"profile-img",3,"src"],["data-label","Product"],["data-label","Image"],["alt","Product",2,"width","60px","height","60px","object-fit","cover","border-radius","8px",3,"src"],["data-label","Start"],["data-label","End"],["data-label","Starting Price"],["data-label","Bidded Price"],["data-label","Profit"],["data-label","Status"]],template:function(t,r){t&1&&(p(0,"body"),Y(1,D8,1,0,"div",0),p(2,"div",1)(3,"div",2)(4,"h2"),m(5,"Auctioneer Dashboard"),h()(),p(6,"div",3)(7,"h3"),m(8,"Auctioneer Details"),h(),p(9,"div",4),Y(10,A8,1,1,"img",5),p(11,"div",6)(12,"p")(13,"strong"),m(14,"Username:"),h(),m(15),h(),p(16,"p")(17,"strong"),m(18,"Email:"),h(),m(19),h(),p(20,"p")(21,"strong"),m(22,"Password:"),h(),Y(23,P8,2,1,"span",7)(24,M8,2,0,"span",7),p(25,"button",8),B("click",function(){return r.togglePasswordVisibility()}),m(26),h()(),p(27,"p")(28,"strong"),m(29,"Address:"),h(),m(30),h()()()(),p(31,"div",3)(32,"h3"),m(33,"Auction Summary"),h(),p(34,"div",9)(35,"div",10)(36,"p"),m(37,"Total Products"),h(),p(38,"span"),m(39),h()(),p(40,"div",10)(41,"p"),m(42,"Active Products"),h(),p(43,"span"),m(44),h()(),p(45,"div",10)(46,"p"),m(47,"Sold Products"),h(),p(48,"span"),m(49),h()(),p(50,"div",10)(51,"p"),m(52,"Upcoming Products"),h(),p(53,"span"),m(54),h()()()(),p(55,"div",3)(56,"h3"),m(57,"Auction Progress Status"),h(),p(58,"div",11),J(59,"div",12),p(60,"p"),m(61),h()(),p(62,"h4"),m(63,"Overall Auction Details"),h(),p(64,"div",13)(65,"table")(66,"thead")(67,"tr")(68,"th"),m(69,"Product"),h(),p(70,"th"),m(71,"Image"),h(),p(72,"th"),m(73,"Start"),h(),p(74,"th"),m(75,"End"),h(),p(76,"th"),m(77,"Starting Price (\u20B9)"),h(),p(78,"th"),m(79,"Bidded Price (\u20B9)"),h(),p(80,"th"),m(81,"Profit (%)"),h(),p(82,"th"),m(83,"Status"),h()()(),p(84,"tbody"),Y(85,O8,24,11,"tr",14),h()()(),p(86,"div",15)(87,"button",16),B("click",function(){return r.scrollTable("left")}),m(88,"\u2190"),h(),p(89,"button",17),B("click",function(){return r.scrollTable("right")}),m(90,"\u2192"),h()()(),p(91,"div",18)(92,"button",19),B("click",function(){return r.goBack()}),m(93,"\u2190 Back"),h()()()()),t&2&&(v(),k("ngIf",r.isLoading),v(9),k("ngIf",r.profileImageUrl),v(5),L(" ",r.auctioneerUsername,""),v(4),L(" ",r.auctioneerEmail,""),v(4),k("ngIf",r.passwordVisible),v(),k("ngIf",!r.passwordVisible),v(2),L(" ",r.passwordVisible?"Hide":"Show"," Password "),v(4),L(" ",r.auctioneerAddress,""),v(9),$(r.totalProducts),v(5),$(r.activeProducts),v(5),$(r.soldProducts),v(5),$(r.upcomingProducts),v(5),ma("width",r.auctionProgress+"%"),v(2),L("Progress: ",r.auctionProgress,"%"),v(24),k("ngForOf",r.filteredProducts))},dependencies:[un,Et,br,St],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:linear-gradient(150deg,#6a11cb,#8c0b8e,#7b0eac);min-height:100vh;width:100%;margin:0;top:0;left:0;display:flex;position:absolute;justify-content:center;align-items:center}.dashboard-container[_ngcontent-%COMP%]{width:95%;max-width:1200px;background:#ffffff1a;backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);border-radius:15px;box-shadow:0 8px 32px #00000040;color:#fff;padding:30px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;font-weight:700;color:#ffdefa;margin-bottom:30px;text-transform:uppercase;letter-spacing:1px}.section[_ngcontent-%COMP%]{background:#ffffff1f;border-radius:12px;padding:20px;margin-bottom:25px;box-shadow:0 6px 18px #ffffff14;transition:transform .3s ease}.section[_ngcontent-%COMP%]:hover{transform:scale(1.015)}.auctioneer-details[_ngcontent-%COMP%]{background:#ffffff09;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:15px;box-shadow:0 8px 24px #00000040;padding:25px;transition:all .3s ease-in-out}.auctioneer-details[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 10px 28px #ffffff26}.auctioneer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:1.8rem;color:#ffd6f0;margin-bottom:20px;text-transform:uppercase;letter-spacing:1px}.details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:20px}.profile-img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:50%;border:3px solid rgba(255,255,255,.5);box-shadow:0 4px 12px #0000004d}.details-info[_ngcontent-%COMP%]{flex:1}.details-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:1rem;margin:10px 0}.details-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#ffdefa;font-weight:700}.details-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;padding:6px 12px;font-size:.85rem;color:#fff;background:#fff3;border:1px solid rgba(255,255,255,.3);border-radius:8px;cursor:pointer;transition:.3s ease}.details-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.05)}.auction-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:20px;margin-top:10px}.stat-box[_ngcontent-%COMP%]{background:#ffffff1f;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);padding:15px;border-radius:12px;text-align:center;box-shadow:0 8px 24px #00000040;transition:transform .3s ease,box-shadow .3s ease}.stat-box[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 10px 28px #ffffff26}.stat-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:8px;color:#ffb3ec}.stat-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff}.auction-status[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;border-radius:15px;background:#ffffff1f;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);box-shadow:0 4px 16px #00000026;transition:.3s ease-in-out}.auction-status[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 8px 22px #fff3}.progress-container[_ngcontent-%COMP%]{margin:15px 0;background:#fff3;border-radius:10px;overflow:hidden;padding:8px;box-shadow:inset 0 1px 4px #0003}.progress-bar[_ngcontent-%COMP%]{height:22px;background:linear-gradient(to right,#6a11cb,#ff8cc6);border-radius:10px;transition:width 1.8s ease;width:0%}.progress-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-top:10px;color:#ffb3ec;font-size:1rem;font-weight:600;letter-spacing:.5px}.table-scroll-wrapper[_ngcontent-%COMP%]{max-height:350px;overflow-y:auto;overflow-x:auto;border:1px solid rgba(255,255,255,.15);border-radius:10px;padding:10px;margin-top:20px;background:#ffffff12;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);scrollbar-width:none;-ms-overflow-style:none}.table-scroll-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.table-scroll-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:960px;border-collapse:collapse;color:#fff;font-size:.95rem}.table-scroll-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-scroll-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px;border:1px solid rgba(255,255,255,.12);text-align:center;vertical-align:middle}.table-scroll-wrapper[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#ffffff26}.table-scroll-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#ffdefa;font-size:1rem;font-weight:700}.table-scroll-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:cover;border-radius:10px;border:2px solid rgba(255,255,255,.25)}.table-scroll-wrapper[_ngcontent-%COMP%]   td[data-label=Profit][_ngcontent-%COMP%]{font-weight:700}.scroll-buttons[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;margin-top:15px}.scroll-left[_ngcontent-%COMP%], .scroll-right[_ngcontent-%COMP%]{padding:8px 16px;font-size:1.2rem;background:linear-gradient(135deg,#8e2de2,#6a11cb);border:none;border-radius:6px;color:#fff;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #0003}.scroll-left[_ngcontent-%COMP%]:hover, .scroll-right[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#a94acb,#4c0f99);transform:scale(1.08)}button[_ngcontent-%COMP%]{padding:8px 15px;font-size:1rem;background:linear-gradient(135deg,#c471ed,#6a11cb);border:none;border-radius:6px;color:#fff;cursor:pointer;transition:background .3s ease,transform .3s ease}button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#a94acb,#3b0f80);transform:scale(1.05)}.back-button-wrapper[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.back-button[_ngcontent-%COMP%]{padding:10px 18px;background:linear-gradient(135deg,#ff8cc6,#8e2de2);border-radius:6px;font-weight:700}.back-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e75cb1,#6a11cb)}@media screen and (max-width: 991px){.dashboard-container[_ngcontent-%COMP%]{padding:20px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.auctioneer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.4rem}.details[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.details-info[_ngcontent-%COMP%]{width:100%}.profile-img[_ngcontent-%COMP%]{width:90px;height:90px}.auction-info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}.table-scroll-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:.85rem;min-width:800px}.scroll-left[_ngcontent-%COMP%], .scroll-right[_ngcontent-%COMP%]{font-size:1rem;padding:6px 12px}.stat-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.4rem}.stat-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}}@media screen and (max-width: 767px){.dashboard-container[_ngcontent-%COMP%]{padding:15px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.auctioneer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2rem}.details[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:15px}.details-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.profile-img[_ngcontent-%COMP%]{width:75px;height:75px}.auction-info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:15px}.stat-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem}.stat-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}.progress-bar[_ngcontent-%COMP%]{height:18px}.table-scroll-wrapper[_ngcontent-%COMP%]{padding:8px;margin-top:15px}.table-scroll-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:.8rem;min-width:680px}.scroll-buttons[_ngcontent-%COMP%]{justify-content:center;gap:15px;flex-direction:row}.scroll-left[_ngcontent-%COMP%], .scroll-right[_ngcontent-%COMP%]{padding:6px 10px;font-size:1rem}.back-button[_ngcontent-%COMP%]{font-size:.9rem;padding:8px 14px}button[_ngcontent-%COMP%]{font-size:.9rem;padding:7px 12px}}.loading-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:4px;width:100%;background:linear-gradient(to right,#2196f3,#42a5f5,#64b5f6);z-index:10000;animation:_ngcontent-%COMP%_loadingSlide 1.5s infinite ease-in-out;box-shadow:0 2px 5px #00000026}@keyframes _ngcontent-%COMP%_loadingSlide{0%{transform:scaleX(0);transform-origin:left}50%{transform:scaleX(.5);transform-origin:center}to{transform:scaleX(1);transform-origin:right}}"]})};var N8=(n,e,t,r)=>({"sold-button":n,"active-button":e,"upcoming-button":t,"already-bidded-button":r}),k8=(n,e)=>({"won-status":n,"outbid-status":e});function F8(n,e){n&1&&J(0,"div",20)}function L8(n,e){if(n&1&&J(0,"img",21),n&2){let t=G();k("src",t.bidderProfileImage,et)}}function V8(n,e){if(n&1&&(p(0,"p"),m(1),h()),n&2){let t=G();v(),L("Bidder | ",t.bidderEmail,"")}}function U8(n,e){n&1&&(p(0,"div",35)(1,"p"),m(2,"No products available for bidding."),h()())}function B8(n,e){if(n&1&&(p(0,"div",41),m(1),h()),n&2){let t=G().$implicit;v(),L(" Current Highest Bid: \u20B9",t.currentHighestBid," ")}}function j8(n,e){if(n&1){let t=Ct();p(0,"div",36),J(1,"img",37),p(2,"h4"),m(3),h(),p(4,"p"),m(5),h(),p(6,"p"),m(7),h(),Y(8,B8,2,1,"div",38),p(9,"button",39),B("click",function(){let i=ue(t).$implicit,o=G(2);return de(o.viewProductDetails(i))}),m(10,"View Details"),h(),p(11,"button",40),B("click",function(){let i=ue(t).$implicit,o=G(2);return de(o.handleBidButtonClick(i))}),m(12),h()()}if(n&2){let t=e.$implicit,r=G(2);v(),Ry("alt",t.productName),k("src",t.productImage,et),v(2),$(t.productName),v(2),L("Starting Price: $",t.minimumPrice,""),v(2),L("Auctioneer: ",t.auctioneerName,""),v(),k("ngIf",t.isAlreadyBid),v(3),k("ngClass",kD(9,N8,r.getProductStatus(t)==="sold",r.getProductStatus(t)==="active",r.getProductStatus(t)==="upcoming",t.alreadyBidded))("disabled",t.alreadyBidded||r.getProductStatus(t)!=="active"),v(),L(" ",t.alreadyBidded?"Already Bidded":r.getButtonLabel(t)," ")}}function $8(n,e){if(n&1){let t=Ct();p(0,"div",22)(1,"h2"),m(2,"Bid on Products"),h(),p(3,"div",23)(4,"input",24),B("input",function(i){ue(t);let o=G();return de(o.searchProducts(i))}),h()(),p(5,"div",25)(6,"label",26),m(7,"Filter:"),h(),p(8,"select",27),B("change",function(i){ue(t);let o=G();return de(o.filterByStatus(i))}),p(9,"option",28),m(10,"All"),h(),p(11,"option",29),m(12,"Active"),h(),p(13,"option",30),m(14,"Sold"),h(),p(15,"option",31),m(16,"Upcoming"),h()()(),p(17,"div",32),Y(18,U8,3,0,"div",33)(19,j8,13,14,"div",34),h()()}if(n&2){let t=G();v(18),k("ngIf",t.filteredProducts.length===0),v(),k("ngForOf",t.filteredProducts)}}function H8(n,e){n&1&&(p(0,"div",53)(1,"p"),m(2,"You have not placed any bids yet."),h()())}function z8(n,e){if(n&1){let t=Ct();p(0,"button",62),B("click",function(i){ue(t);let o=G().$implicit;return G(2).placeBid(o),de(i.stopPropagation())}),m(1,"Update Bid"),h()}}function q8(n,e){if(n&1&&(p(0,"span",63),m(1),h()),n&2){let t=G().$implicit,r=G(2);k("ngClass",ef(2,k8,r.getBidStatusLabel(t)==="Won",r.getBidStatusLabel(t)==="Outbid")),v(),$(r.getBidStatusLabel(t))}}function G8(n,e){if(n&1&&(p(0,"div",64)(1,"h4"),m(2,"Auctioneer Details:"),h(),p(3,"p")(4,"strong"),m(5,"Name:"),h(),m(6),h(),p(7,"p")(8,"strong"),m(9,"Email:"),h(),m(10),h(),p(11,"p")(12,"strong"),m(13,"Phone:"),h(),m(14),h(),p(15,"p")(16,"strong"),m(17,"Start Time:"),h(),m(18),h(),p(19,"p")(20,"strong"),m(21,"End Time:"),h(),m(22),h(),p(23,"p")(24,"strong"),m(25,"Left:"),h(),m(26),h(),p(27,"p")(28,"strong"),m(29,"Status:"),h(),m(30),h()()),n&2){let t=G().$implicit;v(6),L(" ",t.auctioneerName,""),v(4),L(" ",t.auctioneerEmail,""),v(4),L(" ",t.auctioneerPhone,""),v(4),L(" ",t.startTime,""),v(4),L(" ",t.endTime,""),v(4),L(" ",t.remainingTime,""),v(4),L(" ",t.statusMessage,"")}}function W8(n,e){if(n&1){let t=Ct();p(0,"div",54)(1,"div",55),B("click",function(){let i=ue(t).index,o=G(2);return de(o.toggleBidDetails(i))}),J(2,"img",56),p(3,"div",57)(4,"p")(5,"strong"),m(6),h()(),p(7,"p"),m(8),h(),p(9,"p"),m(10),h(),p(11,"p"),m(12),h(),Y(13,z8,2,0,"button",58)(14,q8,2,5,"span",59),h(),p(15,"button",60),B("click",function(i){let o=ue(t).index;return G(2).toggleBidDetails(o),de(i.stopPropagation())}),m(16),h()(),Y(17,G8,31,7,"div",61),h()}if(n&2){let t=e.$implicit,r=G(2);v(2),k("src",t.productImage,et),v(4),$(t.productName),v(2),L("Bid: \u20B9",t.amount,""),v(2),L("Time Left: ",t.remainingTime,""),v(2),L("Status: ",t.statusMessage,""),v(),k("ngIf",r.getBidStatusLabel(t)==="Update Bid"),v(),k("ngIf",r.getBidStatusLabel(t)!=="Update Bid"),v(2),L(" ",t.showDetails?"\u25B2":"\u25BC"," "),v(),k("ngIf",t.showDetails)}}function K8(n,e){if(n&1){let t=Ct();p(0,"div",42)(1,"button",43),B("click",function(){ue(t);let i=G();return de(i.goBackToProducts())}),m(2,"\u2190 Back to Products"),h(),p(3,"h2"),m(4,"Your Bids"),h(),Y(5,H8,3,0,"div",44),p(6,"div",45)(7,"label",46),m(8,"Filter Status:"),h(),p(9,"select",47),B("change",function(i){ue(t);let o=G();return de(o.filterYourBids(i))}),p(10,"option",28),m(11,"All"),h(),p(12,"option",48),m(13,"Pending"),h(),p(14,"option",49),m(15,"Won"),h(),p(16,"option",50),m(17,"Outbid"),h()()(),p(18,"div",51),Y(19,W8,18,9,"div",52),h()()}if(n&2){let t=G();v(5),k("ngIf",t.yourBids.length===0),v(14),k("ngForOf",t.filteredBids)}}function Q8(n,e){if(n&1&&(p(0,"div")(1,"p")(2,"strong"),m(3,"Status:"),h(),m(4," Active"),h(),p(5,"p")(6,"strong"),m(7,"Time Remaining:"),h(),m(8),h()()),n&2){let t=G(2);v(8),L(" ",t.timeRemaining,"")}}function Y8(n,e){if(n&1&&(p(0,"div")(1,"p")(2,"strong"),m(3,"Status:"),h(),m(4," Upcoming"),h(),p(5,"p")(6,"strong"),m(7,"Auction Starts At:"),h(),m(8),h()()),n&2){let t=G(2);v(8),io(" ",t.selectedProduct.sessionDate," ",t.formatTime(t.selectedProduct.sessionTime),"")}}function Z8(n,e){n&1&&(p(0,"div")(1,"p")(2,"strong"),m(3,"Status:"),h(),m(4," Sold"),h()())}function J8(n,e){if(n&1){let t=Ct();p(0,"div",65)(1,"div",66),ga(2,67),Y(3,Q8,9,1,"div",68)(4,Y8,9,2,"div",68)(5,Z8,5,0,"div",68),_a(),h(),p(6,"div",69)(7,"span",70),B("click",function(){ue(t);let i=G();return de(i.closeProductDetails())}),m(8,"\xD7"),h(),p(9,"h2"),m(10),h(),J(11,"img",71),p(12,"p")(13,"strong"),m(14,"Auctioneer Username:"),h(),m(15),h(),p(16,"p")(17,"strong"),m(18,"Email:"),h(),m(19),h(),p(20,"p")(21,"strong"),m(22,"Phone:"),h(),m(23),h(),p(24,"p")(25,"strong"),m(26,"Category:"),h(),m(27),h(),p(28,"p")(29,"strong"),m(30,"Starting Price:"),h(),m(31),h(),p(32,"p")(33,"strong"),m(34,"Quantity:"),h(),m(35),h(),p(36,"p")(37,"strong"),m(38,"Condition:"),h(),m(39),h(),p(40,"p")(41,"strong"),m(42,"Warranty:"),h(),m(43),h(),p(44,"p")(45,"strong"),m(46,"Description:"),h(),m(47),h(),p(48,"p")(49,"strong"),m(50,"Auction Start:"),h(),m(51),h(),p(52,"p")(53,"strong"),m(54,"Auction End:"),h(),m(55),h()()()}if(n&2){let t=G();v(2),k("ngSwitch",t.selectedProductStatus),v(),k("ngSwitchCase","active"),v(),k("ngSwitchCase","upcoming"),v(),k("ngSwitchCase","sold"),v(5),$(t.selectedProduct.productName),v(),k("src",t.selectedProduct.productImage,et),v(4),L(" ",t.selectedProduct.auctioneerName,""),v(4),L(" ",t.selectedProduct.auctioneerEmail,""),v(4),L(" ",t.selectedProduct.auctioneerPhone,""),v(4),L(" ",t.selectedProduct.productCategory,""),v(4),L(" ",t.selectedProduct.minimumPrice,""),v(4),L(" ",t.selectedProduct.quantity,""),v(4),L(" ",t.selectedProduct.condition,""),v(4),L(" ",t.selectedProduct.warranty||"N/A",""),v(4),L(" ",t.selectedProduct.description,""),v(4),io(" ",t.selectedProduct.sessionDate," at ",t.formatTime(t.selectedProduct.sessionTime),""),v(4),io(" ",t.selectedProduct.endDate," at ",t.formatTime(t.selectedProduct.endTime),"")}}var mm=class n{constructor(e,t,r,i){this.fb=e;this.router=t;this.firestore=r;this.authService=i}products=[];filteredProducts=[];yourBids=[];showProducts=!0;showBids=!1;selectedProduct=null;selectedProductStatus="";timeRemaining="";bidderEmail=null;bidderUID=null;isAuthenticated=!1;bidderUsername=null;bidderProfileImage=null;mobileMenuOpen=!1;isDropdownOpen=!1;allBids=[];filteredBids=[];bidCountdownIntervals={};isLoading=!1;ngOnInit(){this.checkAuthentication(),this.loadProducts()}checkAuthentication(){return E(this,null,function*(){let e=this.authService.getUserId();e?(this.bidderUID=e,this.isAuthenticated=!0,yield this.loadBidderProfile(),yield this.loadYourBids(),yield this.loadProducts()):(this.isAuthenticated=!1,this.router.navigate(["/login"]))})}loadBidderProfile(){return E(this,null,function*(){if(this.bidderUID)try{let e=je(this.firestore,`bidders/${this.bidderUID}`),t=yield rt(e);if(t.exists()){let r=t.data();this.bidderUsername=r?.username||"Bidder";let i=r?.profileImage||null;i&&(this.bidderProfileImage=this.decryptImage(i))}else console.log("No such bidder document!")}catch(e){console.error("Error fetching bidder profile:",e)}})}filterCategory(e){e==="all"?this.filteredProducts=[...this.products]:this.filteredProducts=this.products.filter(t=>t.productCategory===e)}formatTime(e){let[t,r]=e.split(":").map(Number),i=t>=12?"PM":"AM";return`${t%12||12}:${r.toString().padStart(2,"0")} ${i}`}encryptImage(e){return btoa(e)}decryptImage(e){return atob(e)}loadProducts(){return E(this,null,function*(){this.isLoading=!0;try{this.products=[];let e=Ge(this.firestore,"auctioneers"),t=yield We(e);for(let r of t.docs){let i=r.id,o=r.data(),s=o?.username||"Unknown",a=o?.email||"N/A",c=o?.phoneNumber||"N/A",u=hc(Ge(this.firestore,`auctioneers/${i}/products`)),d=yield We(u);for(let g of d.docs){let y=g.data(),b=g.id,C=this.yourBids.some(O=>O.productId===b);this.products.push(oe(H({},y),{productId:b,auctioneer:i,auctioneerName:s,auctioneerEmail:a,auctioneerPhone:c,productImage:this.decryptImage(y.productImage),currentHighestBid:y.currentHighestBid||y.minimumPrice,alreadyBidded:C}))}}this.filteredProducts=[...this.products]}catch(e){console.error("Error loading products:",e)}finally{this.isLoading=!1}})}searchProducts(e){let t=e.target.value.toLowerCase();this.filteredProducts=this.products.filter(r=>r.productName?.toLowerCase().includes(t))}viewProductDetails(e){this.selectedProduct=e,this.updateProductStatus()}closeProductDetails(){this.selectedProduct=null,this.selectedProductStatus="",this.timeRemaining=""}updateProductStatus(){if(!this.selectedProduct)return;let e=new Date,t=new Date(`${this.selectedProduct.sessionDate}T${this.selectedProduct.sessionTime}`),r=new Date(`${this.selectedProduct.endDate}T${this.selectedProduct.endTime}`);e>r?this.selectedProductStatus="sold":e<t?this.selectedProductStatus="upcoming":(this.selectedProductStatus="active",this.calculateTimeRemaining(r))}calculateTimeRemaining(e){let t=new Date,r=e.getTime()-t.getTime();if(r<=0){this.timeRemaining="00:00:00";return}let i=Math.floor(r/(1e3*60*60)),o=Math.floor(r%(1e3*60*60)/(1e3*60)),s=Math.floor(r%(1e3*60)/1e3);this.timeRemaining=`${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`,setTimeout(()=>this.calculateTimeRemaining(e),1e3)}filterByStatus(e){let t=e.target.value;t===""?this.filteredProducts=[...this.products]:this.filteredProducts=this.products.filter(r=>{let i=new Date,o=new Date(`${r.sessionDate}T${r.sessionTime}`),s=new Date(`${r.endDate}T${r.endTime}`),a="";return i>s?a="sold":i<o?a="upcoming":a="active",a===t})}getProductStatus(e){let t=new Date,r=new Date(`${e.sessionDate}T${e.sessionTime}`),i=new Date(`${e.endDate}T${e.endTime}`);return t>i?"sold":t<r?"upcoming":"active"}getBidStatusForProduct(e){let t=this.yourBids.find(r=>r.productId===e);return t?{status:t.status,message:t.statusMessage}:{status:"NotBidded",message:""}}getButtonLabel(e){let t=this.getProductStatus(e);return t==="sold"?"Sold Out":t==="upcoming"?"Coming Soon":e.alreadyBidded?"Already Bidded":"Place Bid"}getBidStatusLabel(e){return e.status==="Pending"?"Update Bid":e.status==="Won"?"Won":e.status==="Outbid"?"Outbid":""}handleBidButtonClick(e){let t=this.getProductStatus(e),r=this.yourBids.some(i=>i.productId===e.productId);if(e.alreadyBidded){alert("The selected product is already bidded. Please visit your Bids section to place the bid again.");return}if(t==="sold")alert("This product is sold out!");else if(t==="upcoming"){let i=new Date(`${e.sessionDate}T${e.sessionTime}`),o=new Date,s=Math.max(0,i.getTime()-o.getTime()),a=Math.floor(s/(1e3*60*60)),c=Math.floor(s%(1e3*60*60)/(1e3*60)),u=Math.floor(s%(1e3*60)/1e3);alert(`This product is not active yet. Time remaining: ${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`)}else t==="active"&&this.placeBid(e)}placeBid(e){return E(this,null,function*(){if(this.isLoading=!0,!e.auctioneer){alert("Internal error: Product data is incomplete.");return}if(!this.bidderUID){alert("User not authenticated.");return}let t=this.getProductStatus(e);if(t!=="active"){alert(`Bidding not allowed. Product is ${t}.`);return}let r=je(this.firestore,`auctioneers/${e.auctioneer}/products/${e.productId}`),i=yield rt(r);if(!i.exists()){alert("Product does not exist.");return}let o=i.data(),s=parseFloat(o?.currentHighestBid||e.minimumPrice),a=Ge(this.firestore,`bidders/${this.bidderUID}/bids`),u=(yield We(a)).docs.find(C=>C.data().productId===e.productId),d="",g=0;u?(g=parseFloat(u.data()?.bidAmount||"0"),d=`Current Highest Bid: \u20B9${s}. Your Previous Bid: \u20B9${g}
Enter a new bid:`):s>e.minimumPrice?d=`Current Highest Bid: \u20B9${s}
Enter your bid for ${e.productName}:`:d=`Enter your bid for ${e.productName} (Minimum: \u20B9${e.minimumPrice}):`;let y=prompt(d);if(!y)return;let b=parseFloat(y);if(isNaN(b)){alert("Invalid bid amount.");return}if(b<e.minimumPrice){alert(`Bid must be at least the minimum price of \u20B9${e.minimumPrice}`);return}if(b<=s){alert(`Your bid must be higher than the current highest bid of \u20B9${s}`);return}if(u&&b<=g){alert(`New bid must be higher than your previous bid of \u20B9${g}`);return}try{if(u)yield vE(u.ref,{bidAmount:b,timestamp:new Date,status:"Pending"});else{let V={productId:e.productId,productName:e.productName,auctioneerUID:e.auctioneer,bidAmount:b,timestamp:new Date,status:"Pending"};yield eO(a,V)}let C=je(this.firestore,`bidders/${this.bidderUID}`),O=yield rt(C),R="Unknown",U="N/A",j="N/A";if(O.exists()){let V=O.data();R=V.username||"Unknown",U=V.email||"N/A",j=V.phoneNumber||"N/A"}yield nO(this.firestore,V=>E(this,null,function*(){let X=yield V.get(r);if(!X.exists())throw new Error("Product not found.");let _e=X.data(),te=parseFloat(_e?.currentHighestBid||"0");b>te&&V.update(r,{currentHighestBid:b,currentHighestBidder:this.bidderUID,currentHighestBidderName:R,currentHighestBidderEmail:U,currentHighestBidderPhone:j})})),alert(u?"Your bid has been updated successfully!":"Your bid has been placed successfully!"),yield this.loadYourBids(),this.products=this.products.map(V=>V.productId===e.productId?oe(H({},V),{alreadyBidded:!0}):V),this.filteredProducts=[...this.products]}catch(C){console.error("Error placing/updating bid:",C),alert("Failed to place or update the bid. Please try again.")}finally{this.isLoading=!1}})}loadYourBids(){return E(this,null,function*(){if(this.isLoading=!0,!!this.bidderUID)try{let e=Ge(this.firestore,`bidders/${this.bidderUID}/bids`),t=yield We(e),r=[];for(let i of t.docs){let o=i.data(),s=o.productId,a=o.auctioneerUID,c=je(this.firestore,`auctioneers/${a}/products/${s}`),u=yield rt(c),d=o.status||"Pending",g=d,y="",b="",C="";if(u.exists()){let j=u.data(),V=new Date,X=new Date(`${j.sessionDate}T${j.sessionTime}`),_e=new Date(`${j.endDate}T${j.endTime}`);if(y=this.formatTime(j.sessionTime),b=this.formatTime(j.endTime),V>_e)(j.currentHighestBidder||null)===this.bidderUID?(g="You won the bid! The product is yours.",d="Won"):(g="Thanks for bidding. Product won by another bidder.",d="Outbid"),yield vE(i.ref,{status:d,statusMessage:g}),C="Auction Finished";else{let te=_e.getTime()-V.getTime();if(te>0){let x=Math.floor(te/36e5),I=Math.floor(te%(1e3*60*60)/(1e3*60)),S=Math.floor(te%(1e3*60)/1e3);C=`${x.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}`}else C="Auction Finished"}}let O="Unknown",R="N/A",U="N/A";try{let j=je(this.firestore,`auctioneers/${a}`),V=yield rt(j);if(V.exists()){let X=V.data();O=X?.username||"Unknown",R=X?.email||"N/A",U=X?.phoneNumber||"N/A"}}catch(j){console.error(`Error fetching auctioneer data for UID ${a}`,j)}if(r.push({productImage:u.exists()?this.decryptImage(u.data().productImage):null,productId:s,productName:o.productName,amount:Number(o.bidAmount).toFixed(2),status:d,statusMessage:g,auctioneerName:O,auctioneerEmail:R,auctioneerPhone:U,startTime:y,endTime:b,remainingTime:C,auctioneer:a,showDetails:!1}),d==="Pending"&&u.exists()){let j=new Date(`${u.data().endDate}T${u.data().endTime}`);this.startCountdown(s,j)}}this.yourBids=r,this.allBids=r,this.filteredBids=[...r]}catch(e){console.error("Error loading your bids:",e)}finally{this.isLoading=!1}})}startCountdown(e,t){this.bidCountdownIntervals[e]&&clearInterval(this.bidCountdownIntervals[e]),this.bidCountdownIntervals[e]=setInterval(()=>{let r=new Date().getTime(),i=t.getTime()-r;if(i<=0){clearInterval(this.bidCountdownIntervals[e]);let o=this.yourBids.find(s=>s.productId===e);o&&(o.remainingTime="Auction Finished")}else{let o=Math.floor(i/36e5),s=Math.floor(i%(1e3*60*60)/(1e3*60)),a=Math.floor(i%(1e3*60)/1e3),c=this.yourBids.find(u=>u.productId===e);c&&(c.remainingTime=`${o.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`)}},1e3)}filterYourBids(e){let t=e.target.value;t===""?this.filteredBids=[...this.allBids]:this.filteredBids=this.allBids.filter(r=>r.status===t)}viewProducts(){this.showProducts=!0,this.showBids=!1}viewYourBids(){this.showProducts=!1,this.showBids=!0}navigateToDashboard(){this.router.navigate(["/bidder-dashboard"])}toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}goBackToProducts(){this.showBids=!1,this.showProducts=!0}toggleBidDetails(e){this.filteredBids.forEach((t,r)=>{t.showDetails=r===e?!t.showDetails:!1})}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(z(Vn),z(Tt),z(dt),z(Qt))};static \u0275cmp=at({type:n,selectors:[["app-bidder-page"]],decls:48,vars:13,consts:[["class","loading-bar",4,"ngIf"],[1,"navbar"],[1,"navbar-brand"],[1,"hamburger",3,"click"],[1,"navbar-menu"],[1,"close-btn",3,"click"],["href","javascript:void(0)",1,"nav-item",3,"click"],[1,"dropdown"],["href","javascript:void(0)",1,"nav-item","dropdown-toggle",3,"click"],[1,"arrow"],[1,"dropdown-menu"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],["href","javascript:void(0)",1,"nav-item","logout",3,"click"],[1,"bidder-container"],[1,"sidebar"],["alt","Bidder Profile",3,"src",4,"ngIf"],[4,"ngIf"],["class","main-content","id","products",4,"ngIf"],["class","main-content","id","bids",4,"ngIf"],["class","product-details-modal",4,"ngIf"],[1,"loading-bar"],["alt","Bidder Profile",3,"src"],["id","products",1,"main-content"],[1,"search-bar"],["type","text","placeholder","Search Products...",3,"input"],[1,"filter-section"],["for","productFilter"],[3,"change"],["value",""],["value","active"],["value","sold"],["value","upcoming"],[1,"product-grid"],["class","no-products",4,"ngIf"],["class","product-card",4,"ngFor","ngForOf"],[1,"no-products"],[1,"product-card"],[1,"product-image",3,"src","alt"],["class","bid-label",4,"ngIf"],[1,"details-button",3,"click"],[1,"bid-button",3,"click","ngClass","disabled"],[1,"bid-label"],["id","bids",1,"main-content"],[1,"back-button",3,"click"],["class","no-bids",4,"ngIf"],[1,"filter-section","bid-filter"],["for","bidStatus"],["id","bidStatus",3,"change"],["value","Pending"],["value","Won"],["value","Outbid"],[1,"bid-history"],["class","bid-card",4,"ngFor","ngForOf"],[1,"no-bids"],[1,"bid-card"],[1,"bid-summary",3,"click"],["alt","Product Image",1,"bid-product-image",3,"src"],[1,"bid-info"],["class","update-bid-button",3,"click",4,"ngIf"],["class","bid-status-label",3,"ngClass",4,"ngIf"],[1,"toggle-details-button",3,"click"],["class","bid-details",4,"ngIf"],[1,"update-bid-button",3,"click"],[1,"bid-status-label",3,"ngClass"],[1,"bid-details"],[1,"product-details-modal"],[1,"auction-status-info"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"modal-content"],[1,"close-button",3,"click"],["alt","Product Image",3,"src"]],template:function(t,r){t&1&&(p(0,"body"),Y(1,F8,1,0,"div",0),p(2,"div",1)(3,"div",2)(4,"h2"),m(5,"Auction Bazaar"),h()(),p(6,"div",3),B("click",function(){return r.toggleMobileMenu()}),J(7,"span")(8,"span")(9,"span"),h(),p(10,"div",4)(11,"span",5),B("click",function(){return r.toggleMobileMenu()}),m(12,"\xD7"),h(),p(13,"a",6),B("click",function(){return r.navigateToDashboard()}),m(14,"Dashboard"),h(),p(15,"div",7)(16,"a",8),B("click",function(){return r.toggleDropdown()}),m(17," Product Categories "),p(18,"span",9),m(19,"\u25BC"),h()(),p(20,"div",10)(21,"a",11),B("click",function(){return r.filterCategory("electronics")}),m(22,"Electronics"),h(),p(23,"a",11),B("click",function(){return r.filterCategory("fashion")}),m(24,"Fashion"),h(),p(25,"a",11),B("click",function(){return r.filterCategory("books")}),m(26,"Books"),h(),p(27,"a",11),B("click",function(){return r.filterCategory("furniture")}),m(28,"Furniture"),h(),p(29,"a",11),B("click",function(){return r.filterCategory("vehicles")}),m(30,"Vehicles"),h(),p(31,"a",11),B("click",function(){return r.filterCategory("others")}),m(32,"Others"),h(),p(33,"a",11),B("click",function(){return r.filterCategory("all")}),m(34,"All"),h()()(),p(35,"a",6),B("click",function(){return r.viewYourBids()}),m(36,"Your Bids"),h(),p(37,"a",12),B("click",function(){return r.logout()}),m(38,"Logout"),h()()(),p(39,"div",13)(40,"div",14),Y(41,L8,1,1,"img",15),p(42,"h1"),m(43),h(),Y(44,V8,2,1,"p",16),h(),Y(45,$8,20,2,"div",17)(46,K8,20,2,"div",18)(47,J8,56,19,"div",19),h()()),t&2&&(v(),k("ngIf",r.isLoading),v(9),cn("active",r.mobileMenuOpen),v(8),cn("rotate",r.isDropdownOpen),v(2),cn("show",r.isDropdownOpen),v(21),k("ngIf",r.bidderProfileImage),v(2),L("Welcome, ",r.bidderUsername,""),v(),k("ngIf",r.bidderEmail),v(),k("ngIf",r.showProducts),v(),k("ngIf",r.showBids),v(),k("ngIf",r.selectedProduct))},dependencies:[Et,wr,br,St,$y,JD,Ma,Tr,xr],styles:["body[_ngcontent-%COMP%]{background:linear-gradient(150deg,#6a11cb,#8c0b8e,#7b0eac);width:100%;min-height:100vh;padding-right:20px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-family:Arial,sans-serif;color:#fff;margin:-8px;overflow-x:hidden}.navbar[_ngcontent-%COMP%]{width:100%;background:#ffffff14;backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;z-index:1000;position:relative;border-bottom:1px solid rgba(255,255,255,.1)}.navbar-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ffd9ec;font-size:1.8rem;font-weight:700;letter-spacing:1.2px}.hamburger[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:5px;cursor:pointer;z-index:1100}.hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:25px;height:3px;background:#fff;border-radius:2px}.navbar-menu[_ngcontent-%COMP%]{display:flex;gap:1.2rem;align-items:center;transition:transform .4s ease}.nav-item[_ngcontent-%COMP%]{color:#fff;font-size:1rem;font-weight:500;text-decoration:none;padding:.5rem .9rem;border-radius:6px;box-sizing:border-box;transition:all .3s ease,transform .3s ease}.nav-item[_ngcontent-%COMP%]:hover{background:#ffffff26;color:#ffdefa;transform:translateY(-2px) scale(1.05)}.dropdown-menu[_ngcontent-%COMP%]{display:none;flex-direction:column;position:absolute;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:10px;margin-top:.5rem;z-index:999;box-shadow:0 4px 12px #00000040;max-height:150px;overflow-y:auto;width:200px;opacity:0;visibility:hidden;transform:translateY(-10px);transition:opacity .3s ease,transform .3s ease;scrollbar-width:thin;scrollbar-color:#fff transparent}.dropdown-toggle[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:pointer;text-decoration:none;width:100%}.dropdown-menu.show[_ngcontent-%COMP%]{display:flex;opacity:1;visibility:visible;transform:translateY(0)}.dropdown-item[_ngcontent-%COMP%]{padding:.7rem 1.2rem;color:#fff;text-decoration:none;transition:background .3s ease,transform .3s ease}.dropdown-item[_ngcontent-%COMP%]:hover{background:#ffffff1f;color:#ffdefa;transform:translate(5px)}.arrow[_ngcontent-%COMP%]{margin-left:8px;transition:transform .3s ease}.arrow.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.close-btn[_ngcontent-%COMP%]{display:none;font-size:2rem;font-weight:700;color:#fff;cursor:pointer;align-self:flex-end}.nav-item[_ngcontent-%COMP%]:hover, .dropdown-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 6px #ffffff26}@media (max-width: 992px){.hamburger[_ngcontent-%COMP%]{display:flex;margin-left:auto;margin-top:-30px}.hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:all .3s ease,transform .3s ease}.hamburger[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{transform:translateY(-2px) scale(1.05)}.navbar[_ngcontent-%COMP%]{flex-wrap:wrap}.navbar-brand[_ngcontent-%COMP%]{flex-grow:1}.navbar-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;height:124vh;width:250px;background:#1e003cf7;flex-direction:column;align-items:flex-start;padding:2rem 1.5rem;gap:1.5rem;transform:translate(-100%);transition:transform .4s ease}.navbar-menu.active[_ngcontent-%COMP%]{transform:translate(0);left:0}.nav-item[_ngcontent-%COMP%]{width:100%;font-size:1.1rem;padding:1rem;border-bottom:1px solid rgba(255,255,255,.1);transition:all .3s ease,transform .3s ease}.nav-item[_ngcontent-%COMP%]:hover{padding:1rem 1.6rem;transform:scale(1.03)}.dropdown-menu[_ngcontent-%COMP%]{position:relative;box-shadow:none;padding-left:1rem;margin-top:.5rem;text-decoration:none}.dropdown-toggle[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;text-decoration:none}.dropdown-item[_ngcontent-%COMP%]{transition:all .3s ease}.dropdown-item[_ngcontent-%COMP%]:hover{transform:translate(8px)}.close-btn[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;transition:all .3s ease,transform .3s ease}.close-btn[_ngcontent-%COMP%]:hover{color:#ffc107;transform:scale(1.1)}}.bidder-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;width:100%;padding:2rem;gap:2rem;margin-top:20px;flex-wrap:wrap}.sidebar[_ngcontent-%COMP%]{width:280px;background:#ffffff14;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border-radius:18px;padding:2rem 1.5rem;box-shadow:0 8px 24px #0006;text-align:center;transition:all .3s ease-in-out;position:relative;z-index:10;overflow:hidden;border:1px solid rgba(255,255,255,.2)}.sidebar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;border:3px solid #00fff7;object-fit:cover;margin-bottom:1rem;box-shadow:0 0 15px #00fff7;transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.sidebar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;margin-bottom:.5rem;background:linear-gradient(90deg,#00fff7,#ffb6f9);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:1px}.sidebar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#fff;background:#00fff71a;padding:.4rem 1rem;border-radius:12px;border:1px solid rgba(0,255,247,.3);display:inline-block}@media screen and (max-width: 768px){.bidder-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center;padding:1.5rem}.sidebar[_ngcontent-%COMP%]{align-items:center;width:90%;max-width:390px}.sidebar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.4rem}.sidebar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}}@media screen and (max-width: 576px){.bidder-container[_ngcontent-%COMP%]{align-items:center}.sidebar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px}.sidebar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem}.sidebar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}.main-content[_ngcontent-%COMP%]{flex-grow:1;background-color:#9c27b0;padding:20px;border-radius:10px;box-shadow:0 4px 8px #0003}.main-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#fff}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:20px;border:none;box-sizing:border-box;border-radius:5px}.filter-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:15px;background:#fff3;border:1px solid #ccc;border-radius:8px;padding:10px 20px;margin-bottom:20px;box-shadow:0 4px 6px #0000001a}.filter-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;color:#fff}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:180px;padding:8px 12px;border:1px solid rgba(255,255,255,.2);border-radius:8px;font-size:14px;color:#000;background:#ffffff1a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);cursor:pointer;transition:border-color .3s ease,box-shadow .3s ease,background-color .3s ease}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#00ffccb3;box-shadow:0 0 4px #00ffccb3;background:#ffffff26}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:8px 16px;text-decoration:none;display:block;color:#000;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);transition:background .3s ease,color .3s ease}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background:#fff3;color:#0fc;border-radius:5px}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled{color:#999;background:#ffffff0d;cursor:not-allowed}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;max-height:350px;overflow-y:auto;scrollbar-width:none;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.product-card[_ngcontent-%COMP%]{background:#fff3;padding:10px;border-radius:10px;text-align:center;transition:transform .3s ease-in-out}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:70%;height:100px;border-radius:10px}.product-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.details-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7b0eac,#6a11cb);color:#fff;padding:10px 16px;font-size:14px;border-radius:8px;border:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026}.details-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#8c0b8e,#7b0eac);transform:translateY(-2px);box-shadow:0 6px 14px #00000040;color:#fff}.bid-button[_ngcontent-%COMP%]{padding:10px 20px;margin-top:10px;font-size:14px;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;font-weight:600;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(255,255,255,.15)}.bid-button.active-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6a11cb,#2575fc);color:#fff}.bid-button.sold-button[_ngcontent-%COMP%]{background:#a0a0a04d;color:#eee;cursor:not-allowed;text-decoration:line-through}.bid-button.upcoming-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffb347,#fc3);color:#222}.bid-button[_ngcontent-%COMP%]:hover:not(.sold-button){transform:translateY(-2px);box-shadow:0 4px 10px #00000040;opacity:.95}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{width:90%;margin-top:10px;padding:15px}.filter-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.filter-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:90px}.details-button[_ngcontent-%COMP%], .bid-button[_ngcontent-%COMP%]{width:100%;font-size:13px;padding:8px 12px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px}.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:15px}}@media (max-width: 576px){.main-content[_ngcontent-%COMP%]{width:90%;margin-left:auto;padding:10px;border-radius:8px}.filter-section[_ngcontent-%COMP%]{padding:10px;flex-direction:column;align-items:stretch}.filter-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:14px;width:100%}.product-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.product-card[_ngcontent-%COMP%]{padding:8px}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;max-width:100%}.details-button[_ngcontent-%COMP%], .bid-button[_ngcontent-%COMP%]{width:100%;font-size:12px;padding:8px 10px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px;padding:8px}}.product-details-modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) rotateY(180deg);transform-style:preserve-3d;animation:_ngcontent-%COMP%_flipInModal .6s ease forwards;background:#1e003c59;border-radius:20px;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);box-shadow:0 10px 40px #0009,inset 0 0 10px #ffffff0d;color:#fff;width:90%;max-width:400px;max-height:88vh;padding:24px;z-index:9999;overflow:hidden;display:flex;flex-direction:column;align-items:center;perspective:1000px}@keyframes _ngcontent-%COMP%_flipInModal{0%{transform:translate(-50%,-50%) rotateY(180deg);opacity:0}to{transform:translate(-50%,-50%) rotateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_flipOutModal{0%{transform:translate(-50%,-50%) rotateY(0);opacity:1}to{transform:translate(-50%,-50%) rotateY(180deg);opacity:0}}.product-details-modal[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:14px;background:transparent;border:none;color:#ffd9ec;font-size:24px;font-weight:700;cursor:pointer;z-index:10;transition:transform .3s,color .3s ease}.product-details-modal.flip-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_flipOutModal .6s ease forwards}.product-details-modal[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{color:#ffc107;transform:scale(1.2)}.product-details-modal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%;max-height:200px;object-fit:contain;border-radius:15px;margin-bottom:18px;box-shadow:0 10px 24px #ffffff26;border:2px solid rgba(255,255,255,.15);background-color:#ffffff0d}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#ffffff0f;border-radius:16px;padding:20px;backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);overflow-y:auto;max-height:60vh;color:#fff;width:100%;box-shadow:inset 0 0 15px #ffffff0d;text-align:left;scrollbar-width:none}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:600;color:#ffdefa;margin-bottom:12px;text-shadow:1px 1px 3px rgba(0,0,0,.3)}.product-details-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;color:#f4eaff;margin:6px 0}@media (max-width: 750px){.navbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:15px}.navbar-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin-bottom:10px}.navbar-menu[_ngcontent-%COMP%]{flex-direction:column;gap:10px;align-items:flex-start}.bidder-container[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch;margin-top:20px}.sidebar[_ngcontent-%COMP%]{width:100%;margin:0;text-align:center}.sidebar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px}.sidebar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}.sidebar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.main-content[_ngcontent-%COMP%]{padding:15px;font-size:14px}.filter-section[_ngcontent-%COMP%]{flex-direction:column;gap:10px;align-items:stretch}.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:80px}.product-details-modal[_ngcontent-%COMP%]{width:90%;padding:15px}.modal-content[_ngcontent-%COMP%]{padding:15px;font-size:14px}}@media (max-width: 480px){.navbar-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.navbar-menu[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{font-size:14px}.sidebar[_ngcontent-%COMP%]{padding:10px}.sidebar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px}.sidebar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px}.sidebar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%]{font-size:12px}.filter-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:12px;padding:6px}.product-card[_ngcontent-%COMP%]{padding:8px}.product-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.details-button[_ngcontent-%COMP%], .bid-button[_ngcontent-%COMP%]{margin-right:10px;padding:8px 10px;font-size:12px}}#bids.main-content[_ngcontent-%COMP%]{padding:2rem;background:#ffffff12;border-radius:15px;box-shadow:0 8px 32px #1f26875e;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.18);color:#fff;overflow:hidden}.no-bids[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-size:1.1rem;color:#eee;padding:2rem 0}.bid-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:1rem 0 2rem}.bid-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;color:#fff}.bid-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 14px;font-size:1rem;background:#ffffff26;border:1px solid rgba(255,255,255,.3);color:#fff;border-radius:10px;outline:none;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);transition:.3s ease}.bid-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{background:#ffffff40}.bid-history[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(330px,1fr));gap:1rem;max-height:620px;overflow:visible auto;padding:1.5rem;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.2) transparent}.bid-card[_ngcontent-%COMP%]{position:relative;background:#ffffff21;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border-radius:16px;border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 24px #00000026;overflow:hidden;transform-origin:center;transition:.3s ease-in-out}.bid-card[_ngcontent-%COMP%]:hover{transform:scale(1.015);box-shadow:0 12px 32px #00000040}.bid-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.8rem;position:relative}.bid-product-image[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:cover;border-radius:10px;border:2px solid #ddd}.bid-info[_ngcontent-%COMP%]{flex-grow:1}.bid-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:.85rem;color:#f8f8f8}.bid-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.update-bid-button[_ngcontent-%COMP%]{margin-top:.6rem;padding:4px 10px;background:linear-gradient(to right,#007bff,#00c6ff);color:#fff;border:none;border-radius:8px;font-size:.75rem;cursor:pointer;transition:.3s ease}.update-bid-button[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#0056b3,#007bff)}.bid-status-label[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;margin-top:8px;font-size:.85rem;font-weight:700;color:#fff}.won-status[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3fe078,#46d6e0);color:#000}.outbid-status[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff4b5c,#ff758f);color:#fff}.toggle-details-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#ffffff20;color:#fff;font-size:.9rem;border:none;border-radius:50%;width:26px;height:26px;cursor:pointer;transition:all .3s ease}.toggle-details-button[_ngcontent-%COMP%]:hover{background:#ffffff40}.bid-details[_ngcontent-%COMP%]{padding:1rem 1.2rem;background:#ffffff14;border-top:1px solid rgba(255,255,255,.15);font-size:.85rem;color:#f0f0f0;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.bid-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px;color:#fff;font-size:1 rem}.bid-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;color:#eee}.back-button[_ngcontent-%COMP%]{background-color:#fff3;color:#fff;border:none;padding:.6rem 1.2rem;font-size:.9rem;border-radius:6px;cursor:pointer;margin:1rem 0;transition:background .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#fff6}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){#bids.main-content[_ngcontent-%COMP%]{padding:1rem}.bid-filter[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.bid-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .bid-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.95rem;width:100%}.bid-history[_ngcontent-%COMP%]{grid-template-columns:1fr;max-height:550px;padding:1rem}.bid-summary[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.bid-product-image[_ngcontent-%COMP%]{width:50px;height:50px}.update-bid-button[_ngcontent-%COMP%], .toggle-details-button[_ngcontent-%COMP%]{font-size:.75rem}.back-button[_ngcontent-%COMP%]{font-size:.85rem;padding:.5rem 1rem}}@media (max-width: 480px){#bids.main-content[_ngcontent-%COMP%]{padding:.8rem}.no-bids[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;padding:1.5rem 0}.bid-filter[_ngcontent-%COMP%]{gap:8px;margin:1rem 0}.bid-history[_ngcontent-%COMP%]{padding:.8rem;gap:.8rem}.bid-card[_ngcontent-%COMP%]{border-radius:12px;padding:.6rem}.bid-summary[_ngcontent-%COMP%]{padding:.6rem}.bid-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}.bid-details[_ngcontent-%COMP%]{font-size:.8rem;padding:.8rem 1rem}.bid-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem}.bid-product-image[_ngcontent-%COMP%]{width:45px;height:45px}.update-bid-button[_ngcontent-%COMP%]{font-size:.75rem;padding:5px 10px}.toggle-details-button[_ngcontent-%COMP%]{font-size:.75rem;width:24px;height:24px}.back-button[_ngcontent-%COMP%]{width:100%;font-size:.85rem;margin-top:1rem;padding:.6rem}}.loading-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:4px;width:100%;background:linear-gradient(to right,#2196f3,#42a5f5,#64b5f6);z-index:10000;animation:_ngcontent-%COMP%_loadingSlide 1.5s infinite ease-in-out;box-shadow:0 2px 5px #00000026}@keyframes _ngcontent-%COMP%_loadingSlide{0%{transform:scaleX(0);transform-origin:left}50%{transform:scaleX(.5);transform-origin:center}to{transform:scaleX(1);transform-origin:right}}"]})};var X8=n=>({hidden:n}),e9=(n,e,t)=>({"status-won":n,"status-outbid":e,"status-pending":t});function t9(n,e){n&1&&J(0,"div",26)}function n9(n,e){if(n&1&&J(0,"img",27),n&2){let t=G();k("src",t.profileImageUrl,et)}}function r9(n,e){if(n&1&&J(0,"img",30),n&2){let t=G().$implicit;k("src",t.productImage,et)}}function i9(n,e){if(n&1&&(p(0,"tr")(1,"td"),Y(2,r9,1,1,"img",28),h(),p(3,"td"),m(4),h(),p(5,"td")(6,"span",29),m(7),h()(),p(8,"td"),m(9),h(),p(10,"td"),m(11),h(),p(12,"td"),m(13),h(),p(14,"td")(15,"div")(16,"strong"),m(17,"You:"),h(),m(18),h(),p(19,"div")(20,"strong"),m(21,"Top:"),h(),m(22),h()(),p(23,"td")(24,"div")(25,"strong"),m(26,"You:"),h(),m(27),h(),p(28,"div")(29,"strong"),m(30,"Top:"),h(),m(31),h()()()),n&2){let t=e.$implicit,r=G();v(2),k("ngIf",t.productImage),v(2),$(t.productName),v(2),k("ngClass",ND(13,e9,r.getBidStatusLabel(t)==="Won",r.getBidStatusLabel(t)==="Outbid",r.getBidStatusLabel(t)==="Update Bid")),v(),L(" ",r.getBidStatusLabel(t)," "),v(2),io("",t.startDate," ",t.startTime,""),v(2),io("",t.endDate," ",t.endTime,""),v(2),L("\u20B9",t.minimumPrice,""),v(5),L(" \u20B9",t.bidderLastBid,""),v(4),L(" \u20B9",t.highestBid,""),v(5),L(" \u20B9",t.profitFromBidderBid,""),v(4),L(" \u20B9",t.profitFromHighestBid,"")}}var gm=class n{constructor(e,t,r,i,o){this.firestore=e;this.authService=t;this.router=r;this.location=i;this.auth=o}bidderEmail=null;bidderUsername=null;bidderPassword=null;bidderAddress=null;profileImageUrl=null;yourBids=[];filteredBids=[];totalBids=0;pendingBids=0;outbidBids=0;wonBids=0;bidProgress=0;passwordVisible=!1;isLoading=!1;ngOnInit(){this.checkAuthentication()}checkAuthentication(){return E(this,null,function*(){let e=this.authService.getUserId(),t=this.authService.getUserRole();e&&t==="Bidder"?(this.bidderEmail=this.authService.getUserEmail(),yield this.loadBidderProfile(e),yield this.loadYourBidsData(e)):this.router.navigate(["/login"])})}loadBidderProfile(e){return E(this,null,function*(){this.isLoading=!0;try{let t=je(this.firestore,`bidders/${e}`),r=yield rt(t);if(r.exists()){let i=r.data();this.bidderUsername=i?.username||"Bidder",this.bidderPassword=i?.password||"********",this.bidderAddress=i?.address||"Not Provided";let o=i?.profileImage;this.profileImageUrl=o?this.decryptImage(o):null}}catch(t){console.error("Error fetching bidder profile:",t)}this.isLoading=!1})}loadYourBidsData(e){return E(this,null,function*(){this.isLoading=!0;let t=Ge(this.firestore,`bidders/${e}/bids`),r=yield We(t),i=[];for(let o of r.docs){let s=o.data(),a=s.auctioneerUID,c=s.productId,u=parseFloat(s.bidAmount)||0,d=je(this.firestore,`auctioneers/${a}/products/${c}`),g=yield rt(d),y="N/A",b="N/A",C="N/A",O="N/A",R="Pending",U=0,j=0,V=null;if(g.exists()){V=g.data(),y=V.sessionDate,b=V.sessionTime,C=V.endDate,O=V.endTime,U=parseFloat(V.minimumPrice)||0,j=parseFloat(V.currentHighestBid)||0;let I=new Date,S=new Date(`${y}T${b}`),D=new Date(`${C}T${O}`);I<S||I>=S&&I<=D?R="Pending":I>D&&V.currentHighestBidder===e?R="Won":R="Outbid"}let X=u.toFixed(2),_e=j.toFixed(2),te=(u-U).toFixed(2),x=(j-U).toFixed(2);i.push(oe(H({},s),{status:R,productName:s.productName,startDate:y,startTime:b,endDate:C,endTime:O,productImage:V?.productImage?this.decryptImage(V.productImage):null,minimumPrice:U.toFixed(2),bidderLastBid:X,highestBid:_e,profitFromBidderBid:te,profitFromHighestBid:x}))}this.yourBids=i,this.filteredBids=i,this.calculateStats(),this.isLoading=!1})}calculateStats(){this.totalBids=this.yourBids.length,this.pendingBids=this.yourBids.filter(r=>r.status==="Pending").length,this.outbidBids=this.yourBids.filter(r=>r.status==="Outbid").length,this.wonBids=this.yourBids.filter(r=>r.status==="Won").length;let e=this.wonBids,t=this.totalBids;this.bidProgress=t>0?Math.floor(e/t*100):0}getBidStatusLabel(e){return e.status==="Won"?"Won":e.status==="Outbid"?"Outbid":e.status==="Pending"?"Update Bid":"Pending"}scrollTable(e){let t=document.querySelector(".scrollable-table");t&&t.scrollBy({left:e==="left"?-300:300,behavior:"smooth"})}decryptImage(e){return atob(e)}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||n)(z(dt),z(Qt),z(Tt),z(hi),z(Nt))};static \u0275cmp=at({type:n,selectors:[["app-bidder-dashboard"]],decls:97,vars:18,consts:[["scrollableTable",""],["class","loading-bar",4,"ngIf"],[1,"dashboard-container"],[1,"section-header"],[1,"section","bidder-details"],[1,"details"],["alt","Bidder Profile","class","profile-img",3,"src",4,"ngIf"],[1,"details-info"],[3,"ngClass"],[1,"show-password-btn",3,"click"],[1,"section","bid-details"],[1,"bid-info-grid"],[1,"stat-box"],[1,"section","bid-status"],[1,"progress-container"],[1,"progress-bar"],[1,"bid-table-wrapper"],[1,"table-scroll-container"],[1,"scrollable-table"],[1,"bid-table"],[4,"ngFor","ngForOf"],[1,"scroll-buttons"],[1,"scroll-button","left",3,"click"],[1,"scroll-button","right",3,"click"],[1,"back-button-wrapper"],[1,"back-button",3,"click"],[1,"loading-bar"],["alt","Bidder Profile",1,"profile-img",3,"src"],["class","product-thumbnail",3,"src",4,"ngIf"],[1,"status-badge",3,"ngClass"],[1,"product-thumbnail",3,"src"]],template:function(t,r){if(t&1){let i=Ct();p(0,"body"),Y(1,t9,1,0,"div",1),p(2,"div",2)(3,"div",3)(4,"h2"),m(5,"Bidder Dashboard"),h()(),p(6,"div",4)(7,"h3"),m(8,"Bidder Details"),h(),p(9,"div",5),Y(10,n9,1,1,"img",6),p(11,"div",7)(12,"p")(13,"strong"),m(14,"Username:"),h(),m(15),h(),p(16,"p")(17,"strong"),m(18,"Email:"),h(),m(19),h(),p(20,"p")(21,"strong"),m(22,"Password:"),h(),p(23,"span",8),m(24),h(),p(25,"button",9),B("click",function(){return ue(i),de(r.togglePasswordVisibility())}),m(26),h()(),p(27,"p")(28,"strong"),m(29,"Address:"),h(),m(30),h()()()(),p(31,"div",10)(32,"h3"),m(33,"Bid Summary"),h(),p(34,"div",11)(35,"div",12)(36,"p"),m(37,"Total Products"),h(),p(38,"span"),m(39),h()(),p(40,"div",12)(41,"p"),m(42,"Pending"),h(),p(43,"span"),m(44),h()(),p(45,"div",12)(46,"p"),m(47,"Outbid"),h(),p(48,"span"),m(49),h()(),p(50,"div",12)(51,"p"),m(52,"Won"),h(),p(53,"span"),m(54),h()()()(),p(55,"div",13)(56,"h3"),m(57,"Bid Progress Status"),h(),p(58,"div",14),J(59,"div",15),p(60,"p"),m(61),h()(),p(62,"h4"),m(63,"Overall Bid Details"),h(),p(64,"div",16)(65,"div",17)(66,"div",18,0)(68,"table",19)(69,"thead")(70,"tr")(71,"th"),m(72,"Image"),h(),p(73,"th"),m(74,"Product"),h(),p(75,"th"),m(76,"Status"),h(),p(77,"th"),m(78,"Start"),h(),p(79,"th"),m(80,"End"),h(),p(81,"th"),m(82,"Basic Price"),h(),p(83,"th"),m(84,"Last Bid"),h(),p(85,"th"),m(86,"Profit"),h()()(),p(87,"tbody"),Y(88,i9,32,17,"tr",20),h()()()(),p(89,"div",21)(90,"button",22),B("click",function(){return ue(i),de(r.scrollTable("left"))}),m(91,"\u2190"),h(),p(92,"button",23),B("click",function(){return ue(i),de(r.scrollTable("right"))}),m(93,"\u2192"),h()()()(),p(94,"div",24)(95,"button",25),B("click",function(){return ue(i),de(r.goBack())}),m(96,"\u2190 Back"),h()()()()}t&2&&(v(),k("ngIf",r.isLoading),v(9),k("ngIf",r.profileImageUrl),v(5),L(" ",r.bidderUsername,""),v(4),L(" ",r.bidderEmail,""),v(4),k("ngClass",ir(16,X8,!r.passwordVisible)),v(),$(r.bidderPassword),v(2),L(" ",r.passwordVisible?"Hide":"Show"," Password "),v(4),L(" ",r.bidderAddress,""),v(9),$(r.totalBids),v(5),$(r.pendingBids),v(5),$(r.outbidBids),v(5),$(r.wonBids),v(5),ma("width",r.bidProgress+"%"),v(2),L("Progress: ",r.bidProgress,"%"),v(27),k("ngForOf",r.yourBids))},dependencies:[Et,wr,br,St,Ma],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:linear-gradient(150deg,#6a11cb,#8c0b8e,#7b0eac);min-height:100vh;width:100%;margin:0;top:0;left:0;display:flex;position:absolute;justify-content:center;align-items:center}.dashboard-container[_ngcontent-%COMP%]{width:90%;max-width:1200px;background:#ffffff1a;border-radius:15px;padding:25px;backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);box-shadow:0 8px 32px #00000040;color:#fff}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;font-weight:700;margin-bottom:20px;color:#ffdefa;text-shadow:1px 1px 2px rgba(0,0,0,.4);letter-spacing:1.5px;text-transform:uppercase}.section[_ngcontent-%COMP%]{position:relative;margin-bottom:30px;padding:20px;border-radius:12px;background:#ffffff1f;box-shadow:0 4px 10px #00000026;transition:transform .3s ease,box-shadow .3s ease}.section[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 8px 18px #ffffff26}h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{font-size:1.8rem;color:#ffd6f0;margin-bottom:15px;text-align:center;text-transform:capitalize}p[_ngcontent-%COMP%]{color:#fff;font-size:1rem;margin:8px 0}.profile-img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:50%;border:3px solid rgba(255,255,255,.5);margin-right:20px}.details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;flex-wrap:wrap}.details-info[_ngcontent-%COMP%]{flex:1}.show-password-btn[_ngcontent-%COMP%]{margin-left:10px;padding:5px 10px;background:#fff3;border:1px solid rgba(255,255,255,.3);border-radius:6px;font-size:.85rem;color:#fff;cursor:pointer;transition:.3s ease}.show-password-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.hidden[_ngcontent-%COMP%]{display:none}.bid-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:20px;margin-top:10px}.stat-box[_ngcontent-%COMP%]{background:#ffffff1f;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);padding:15px;border-radius:12px;text-align:center;box-shadow:0 4px 15px #ffffff26;transition:transform .3s ease,box-shadow .3s ease}.stat-box[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 24px #ffffff40}.stat-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:8px;color:#ffb3ec}.stat-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff}.progress-container[_ngcontent-%COMP%]{background:#ffffff26;border-radius:5px;padding:10px;margin-bottom:15px}.progress-bar[_ngcontent-%COMP%]{height:20px;background:linear-gradient(90deg,#8e2de2,#c471ed);transition:width 2s ease;border-radius:5px;width:0}.bid-table-wrapper[_ngcontent-%COMP%]{max-height:350px;overflow-y:auto;overflow-x:auto;margin-top:1rem;border:1px solid rgba(255,255,255,.2);border-radius:10px;scrollbar-width:none;-ms-overflow-style:none}.bid-table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.bid-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:900px;background:#ffffff14;border-radius:8px;color:#fff}.bid-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#ffffff26}.bid-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bid-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;border:1px solid rgba(255,255,255,.1);text-align:center}.bid-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#ffffff26;color:#fff}.product-thumbnail[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:8px;border:1px solid #ccc}.status-badge[_ngcontent-%COMP%]{padding:6px 14px;border-radius:20px;font-size:.8rem;font-weight:600;display:inline-block;color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 2px 6px #00000026;transition:all .3s ease;letter-spacing:.3px}.status-won[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3fe078,#46d6e0);color:#000}.status-outbid[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff4b5c,#ff758f);color:#fff}.status-pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd166,#f9c74f);color:#222}.table-scroll-container[_ngcontent-%COMP%]{position:relative;max-height:320px;padding:8px 8px 30px;overflow-y:auto;scrollbar-width:none}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollable-table[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:visible;white-space:nowrap;scrollbar-width:none;-ms-overflow-style:none}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scroll-button[_ngcontent-%COMP%]{position:absolute;bottom:5px;background:linear-gradient(135deg,#8e2de2,#6a11cb);color:#fff;border:none;padding:6px 12px;font-size:1.2rem;border-radius:5px;cursor:pointer;box-shadow:0 2px 6px #0003;transition:all .3s ease;z-index:10}.scroll-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#a94acb,#4c0f99);transform:scale(1.1)}.scroll-button.left[_ngcontent-%COMP%]{left:5px}.scroll-button.right[_ngcontent-%COMP%]{right:5px}button[_ngcontent-%COMP%]{padding:8px 15px;font-size:1rem;background:linear-gradient(135deg,#c471ed,#6a11cb);border:none;border-radius:6px;color:#fff;cursor:pointer;transition:background .3s ease,transform .3s ease}button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#a94acb,#3b0f80);transform:scale(1.05)}.back-button-wrapper[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.back-button[_ngcontent-%COMP%]{padding:10px 18px;background:linear-gradient(135deg,#ff8cc6,#8e2de2);border-radius:6px;font-weight:700}.back-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e75cb1,#6a11cb)}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{width:95%;padding:15px}.section[_ngcontent-%COMP%]{padding:15px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:15px}.details[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:left}.details-info[_ngcontent-%COMP%]{width:100%}.profile-img[_ngcontent-%COMP%]{margin-right:0;margin-bottom:10px}.bid-info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:15px}.stat-box[_ngcontent-%COMP%]{padding:12px}.stat-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.stat-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.progress-container[_ngcontent-%COMP%]{padding:8px}.progress-bar[_ngcontent-%COMP%]{height:16px}.scroll-button[_ngcontent-%COMP%]{font-size:1rem;padding:5px 10px}.bid-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bid-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;font-size:.9rem}.product-thumbnail[_ngcontent-%COMP%]{width:45px;height:45px}}@media (max-width: 480px){.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.details-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.show-password-btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:.75rem}.bid-info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stat-box[_ngcontent-%COMP%]{padding:10px}.progress-container[_ngcontent-%COMP%]{padding:6px}.progress-bar[_ngcontent-%COMP%]{height:14px}.bid-table[_ngcontent-%COMP%]{min-width:unset;font-size:.8rem}.bid-table-wrapper[_ngcontent-%COMP%]{border-radius:8px}.scroll-button[_ngcontent-%COMP%]{font-size:.95rem;padding:4px 8px}.back-button[_ngcontent-%COMP%]{font-size:.9rem;padding:8px 14px}.product-thumbnail[_ngcontent-%COMP%]{width:40px;height:40px}button[_ngcontent-%COMP%]{font-size:.9rem;padding:6px 12px}}.loading-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:4px;width:100%;background:linear-gradient(to right,#2196f3,#42a5f5,#64b5f6);z-index:10000;animation:_ngcontent-%COMP%_loadingSlide 1.5s infinite ease-in-out;box-shadow:0 2px 5px #00000026}@keyframes _ngcontent-%COMP%_loadingSlide{0%{transform:scaleX(0);transform-origin:left}50%{transform:scaleX(.5);transform-origin:center}to{transform:scaleX(1);transform-origin:right}}"]})};var _m=n=>({"active-link":n}),oO=n=>({expanded:n});function o9(n,e){n&1&&J(0,"div",12)}function s9(n,e){n&1&&(p(0,"h2"),m(1,"Welcome, Admin"),h())}function a9(n,e){if(n&1&&(p(0,"section",13)(1,"div",14)(2,"h3"),m(3,"Admin Details"),h(),J(4,"img",15),p(5,"p")(6,"strong"),m(7,"Name:"),h(),m(8),h(),p(9,"p")(10,"strong"),m(11,"Email:"),h(),m(12),h(),p(13,"p")(14,"strong"),m(15,"Password:"),h(),m(16),h(),p(17,"p")(18,"strong"),m(19,"Address:"),h(),m(20),h(),p(21,"p")(22,"strong"),m(23,"Phone:"),h(),m(24),h()(),p(25,"div",16)(26,"h3"),m(27,"User Details"),h(),p(28,"p")(29,"strong"),m(30,"Total Users:"),h(),m(31),h(),p(32,"p")(33,"strong"),m(34,"Auctioneers:"),h(),m(35),h(),p(36,"p")(37,"strong"),m(38,"Bidders:"),h(),m(39),h()(),p(40,"div",17)(41,"h3"),m(42,"Product Details"),h(),p(43,"p")(44,"strong"),m(45,"Total Products:"),h(),m(46),h(),p(47,"p")(48,"strong"),m(49,"Active:"),h(),m(50),h(),p(51,"p")(52,"strong"),m(53,"Sold:"),h(),m(54),h(),p(55,"p")(56,"strong"),m(57,"Upcoming:"),h(),m(58),h()()()),n&2){let t=G();v(4),k("src",t.adminData==null?null:t.adminData.profileImage,et),v(4),L(" ",t.adminData==null?null:t.adminData.username,""),v(4),L(" ",t.adminData==null?null:t.adminData.email,""),v(4),L(" ",t.adminData==null?null:t.adminData.password,""),v(4),L(" ",t.adminData==null?null:t.adminData.address,""),v(4),L(" ",t.adminData==null?null:t.adminData.phoneNumber,""),v(7),L(" ",t.totalUsers,""),v(4),L(" ",t.totalAuctioneers,""),v(4),L(" ",t.totalBidders,""),v(7),L(" ",t.totalProducts,""),v(4),L(" ",t.activeProducts,""),v(4),L(" ",t.soldProducts,""),v(4),L(" ",t.upcomingProducts,"")}}function c9(n,e){if(n&1&&(p(0,"tr")(1,"td"),m(2),h(),p(3,"td"),J(4,"img",41),h(),p(5,"td"),m(6),h(),p(7,"td"),m(8),h(),p(9,"td"),m(10),h(),p(11,"td"),m(12),h(),p(13,"td"),m(14),h(),p(15,"td"),m(16),h(),p(17,"td"),m(18),h(),p(19,"td"),m(20),h(),p(21,"td"),m(22),h(),p(23,"td"),m(24),h(),p(25,"td"),m(26),h(),p(27,"td"),m(28),h(),p(29,"td"),m(30),h(),p(31,"td"),m(32),h(),p(33,"td"),m(34),h(),p(35,"td"),m(36),h()()),n&2){let t=e.$implicit,r=G(4);v(2),$(t.productId||"N/A"),v(2),k("src",t.productImage,et),v(2),$(t.productName||"N/A"),v(2),$(t.description||"N/A"),v(2),$(t.productCategory||"N/A"),v(2),$(t.condition||"N/A"),v(2),$(r.getProductStatus(t)||"N/A"),v(2),$(t.sessionDate||"N/A"),v(2),$(r.formatTime(t.sessionTime)||"N/A"),v(2),$(t.endDate||"N/A"),v(2),$(r.formatTime(t.endTime)||"N/A"),v(2),L("\u20B9",t.minimumPrice||"N/A",""),v(2),L("\u20B9",t.currentHighestBid||"N/A",""),v(2),$(t.currentHighestBidder||"N/A"),v(2),$(t.currentHighestBidderName||"N/A"),v(2),$(t.currentHighestBidderPhone||"N/A"),v(2),$(t.currentHighestBidderEmail||"N/A"),v(2),L(" \u20B9",t.currentHighestBid&&t.minimumPrice?t.currentHighestBid-t.minimumPrice:"0"," ")}}function l9(n,e){if(n&1&&(p(0,"tr")(1,"td",38)(2,"div",39)(3,"table",40)(4,"thead")(5,"tr")(6,"th"),m(7,"ID"),h(),p(8,"th"),m(9,"Image"),h(),p(10,"th"),m(11,"Name"),h(),p(12,"th"),m(13,"Description"),h(),p(14,"th"),m(15,"Category"),h(),p(16,"th"),m(17,"Condition"),h(),p(18,"th"),m(19,"Status"),h(),p(20,"th"),m(21,"Start Date"),h(),p(22,"th"),m(23,"Start Time"),h(),p(24,"th"),m(25,"End Date"),h(),p(26,"th"),m(27,"End Time"),h(),p(28,"th"),m(29,"Starting Price"),h(),p(30,"th"),m(31,"Bidded Price"),h(),p(32,"th"),m(33,"Bidder ID"),h(),p(34,"th"),m(35,"Bidder Name"),h(),p(36,"th"),m(37,"Phone"),h(),p(38,"th"),m(39,"Email"),h(),p(40,"th"),m(41,"Profit"),h()()(),p(42,"tbody"),Y(43,c9,37,18,"tr",34),h()()()()()),n&2){let t=G().$implicit;v(43),k("ngForOf",t.products)}}function u9(n,e){if(n&1){let t=Ct();ga(0),p(1,"tr")(2,"td"),J(3,"img",35),h(),p(4,"td"),m(5),h(),p(6,"td"),m(7),h(),p(8,"td"),m(9),h(),p(10,"td"),m(11),h(),p(12,"td"),m(13),h(),p(14,"td"),m(15),h(),p(16,"td"),m(17),h(),p(18,"td"),m(19),p(20,"button",36),B("click",function(){let i=ue(t).$implicit,o=G(2);return de(o.toggleProductDetails(i.uid))}),J(21,"span",37),h()()(),Y(22,l9,44,1,"tr",7),_a()}if(n&2){let t=e.$implicit,r=G(2);v(3),k("src",t.profileImage,et),v(2),$(t.name),v(2),$(t.email),v(2),$(t.password),v(2),$(t.phoneNumber),v(2),$(t.address),v(2),$(t.uid),v(2),$(t.createdAt),v(2),L(" ",t.products.length," "),v(),k("ngClass",ir(11,oO,r.expandedAuctioneerUID===t.uid)),v(2),k("ngIf",r.expandedAuctioneerUID===t.uid)}}function d9(n,e){if(n&1){let t=Ct();p(0,"section",18)(1,"h3"),m(2,"Auctioneer Overview"),h(),p(3,"div",19)(4,"input",20),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.searchQuery,i)||(o.searchQuery=i),de(i)}),B("input",function(){ue(t);let i=G();return de(i.applyAuctioneerFilters())}),h(),p(5,"select",21),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.statusFilter,i)||(o.statusFilter=i),de(i)}),B("change",function(){ue(t);let i=G();return de(i.applyAuctioneerFilters())}),p(6,"option",22),m(7,"All Status"),h(),p(8,"option",23),m(9,"Active"),h(),p(10,"option",24),m(11,"Sold"),h(),p(12,"option",25),m(13,"Upcoming"),h()(),p(14,"select",21),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.categoryFilter,i)||(o.categoryFilter=i),de(i)}),B("change",function(){ue(t);let i=G();return de(i.applyAuctioneerFilters())}),p(15,"option",22),m(16,"All Categories"),h(),p(17,"option",26),m(18,"Electronics"),h(),p(19,"option",27),m(20,"Fashion"),h(),p(21,"option",28),m(22,"Books"),h(),p(23,"option",29),m(24,"Furniture"),h(),p(25,"option",30),m(26,"Vehicles"),h(),p(27,"option",31),m(28,"Others"),h()()(),p(29,"div",32)(30,"table",33)(31,"thead")(32,"tr")(33,"th"),m(34,"Profile"),h(),p(35,"th"),m(36,"Name"),h(),p(37,"th"),m(38,"Email"),h(),p(39,"th"),m(40,"Password"),h(),p(41,"th"),m(42,"Phone"),h(),p(43,"th"),m(44,"Address"),h(),p(45,"th"),m(46,"UID"),h(),p(47,"th"),m(48,"Created At"),h(),p(49,"th"),m(50,"Products"),h()()(),p(51,"tbody"),Y(52,u9,23,13,"ng-container",34),h()()()()}if(n&2){let t=G();v(4),bn("ngModel",t.searchQuery),v(),bn("ngModel",t.statusFilter),v(9),bn("ngModel",t.categoryFilter),v(38),k("ngForOf",t.filteredAuctioneers)}}function h9(n,e){if(n&1&&(p(0,"tr")(1,"td"),m(2),h(),p(3,"td"),m(4),h(),p(5,"td"),m(6),h(),p(7,"td"),J(8,"img",41),h(),p(9,"td"),m(10),h(),p(11,"td"),m(12),h(),p(13,"td"),m(14),h(),p(15,"td"),m(16),h(),p(17,"td"),m(18),h(),p(19,"td"),m(20),h(),p(21,"td"),m(22),h(),p(23,"td"),m(24),h(),p(25,"td"),m(26),h()()),n&2){let t=e.$implicit;v(2),$(t.bidId),v(2),$(t.productName),v(2),$(t.productCategory),v(2),k("src",t.productImage,et),v(2),$(t.productId),v(2),$(t.auctioneerId),v(2),$(t.auctioneerName),v(2),$(t.auctioneerEmail),v(2),$(t.auctioneerPhone),v(2),L("\u20B9",t.minimumPrice,""),v(2),L("\u20B9",t.biddedPrice,""),v(2),$(t.status),v(2),L("\u20B9",t.profit,"")}}function f9(n,e){if(n&1&&(p(0,"tr")(1,"td",38)(2,"div",39)(3,"table",40)(4,"thead")(5,"tr")(6,"th"),m(7,"Bid ID"),h(),p(8,"th"),m(9,"Product Name"),h(),p(10,"th"),m(11,"Category"),h(),p(12,"th"),m(13,"Image"),h(),p(14,"th"),m(15,"Product ID"),h(),p(16,"th"),m(17,"Auctioneer ID"),h(),p(18,"th"),m(19,"Auctioneer Name"),h(),p(20,"th"),m(21,"Email"),h(),p(22,"th"),m(23,"Phone"),h(),p(24,"th"),m(25,"Start Price"),h(),p(26,"th"),m(27,"Bidded Price"),h(),p(28,"th"),m(29,"Status"),h(),p(30,"th"),m(31,"Profit"),h()()(),p(32,"tbody"),Y(33,h9,27,13,"tr",34),h()()()()()),n&2){let t=G().$implicit;v(33),k("ngForOf",t.bids)}}function p9(n,e){if(n&1){let t=Ct();ga(0),p(1,"tr")(2,"td"),J(3,"img",35),h(),p(4,"td"),m(5),h(),p(6,"td"),m(7),h(),p(8,"td"),m(9),h(),p(10,"td"),m(11),h(),p(12,"td"),m(13),h(),p(14,"td"),m(15),h(),p(16,"td"),m(17),h(),p(18,"td"),m(19),p(20,"button",36),B("click",function(){let i=ue(t).$implicit,o=G(2);return de(o.toggleBidDetails(i.uid))}),J(21,"span",37),h()()(),Y(22,f9,34,1,"tr",7),_a()}if(n&2){let t=e.$implicit,r=G(2);v(3),k("src",t.profileImage,et),v(2),$(t.name),v(2),$(t.email),v(2),$(t.password),v(2),$(t.phoneNumber),v(2),$(t.address),v(2),$(t.uid),v(2),$(t.createdAt),v(2),L(" ",t.bids.length," "),v(),k("ngClass",ir(11,oO,r.expandedBidderUID===t.uid)),v(2),k("ngIf",r.expandedBidderUID===t.uid)}}function m9(n,e){if(n&1){let t=Ct();p(0,"section",42)(1,"h3"),m(2,"Bids Progress"),h(),p(3,"div",19)(4,"input",43),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.searchQuery,i)||(o.searchQuery=i),de(i)}),B("input",function(){ue(t);let i=G();return de(i.applyBidderFilters())}),h(),p(5,"select",21),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.statusFilter,i)||(o.statusFilter=i),de(i)}),B("change",function(){ue(t);let i=G();return de(i.applyBidderFilters())}),p(6,"option",22),m(7,"All Status"),h(),p(8,"option",44),m(9,"Pending"),h(),p(10,"option",45),m(11,"Won"),h(),p(12,"option",46),m(13,"Outbid"),h()(),p(14,"select",21),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.categoryFilter,i)||(o.categoryFilter=i),de(i)}),B("change",function(){ue(t);let i=G();return de(i.applyBidderFilters())}),p(15,"option",22),m(16,"All Categories"),h(),p(17,"option",26),m(18,"Electronics"),h(),p(19,"option",27),m(20,"Fashion"),h(),p(21,"option",28),m(22,"Books"),h(),p(23,"option",29),m(24,"Furniture"),h(),p(25,"option",30),m(26,"Vehicles"),h(),p(27,"option",31),m(28,"Others"),h()()(),p(29,"div",32)(30,"table",33)(31,"thead")(32,"tr")(33,"th"),m(34,"Profile"),h(),p(35,"th"),m(36,"Name"),h(),p(37,"th"),m(38,"Email"),h(),p(39,"th"),m(40,"Password"),h(),p(41,"th"),m(42,"Phone"),h(),p(43,"th"),m(44,"Address"),h(),p(45,"th"),m(46,"UID"),h(),p(47,"th"),m(48,"Created At"),h(),p(49,"th"),m(50,"Bids"),h()()(),p(51,"tbody"),Y(52,p9,23,13,"ng-container",34),h()()()()}if(n&2){let t=G();v(4),bn("ngModel",t.searchQuery),v(),bn("ngModel",t.statusFilter),v(9),bn("ngModel",t.categoryFilter),v(38),k("ngForOf",t.filteredBidders)}}function g9(n,e){if(n&1&&(p(0,"option"),m(1),h()),n&2){let t=e.$implicit;v(),$(t)}}function _9(n,e){if(n&1&&(p(0,"option"),m(1),h()),n&2){let t=e.$implicit;v(),$(t)}}function y9(n,e){if(n&1&&(p(0,"tr")(1,"td"),m(2),h(),p(3,"td"),J(4,"img",56),h(),p(5,"td"),m(6),h(),p(7,"td"),m(8),h(),p(9,"td"),m(10),h(),p(11,"td"),m(12),h(),p(13,"td"),m(14),h(),p(15,"td"),m(16),h(),p(17,"td"),m(18),h(),p(19,"td"),m(20),h(),p(21,"td"),m(22),h(),p(23,"td"),m(24),h(),p(25,"td"),m(26),h(),p(27,"td"),m(28),h(),p(29,"td",57),m(30),h(),p(31,"td"),m(32),h()()),n&2){let t=e.$implicit,r=G(3);v(2),$(t.id),v(2),k("src",t.image,et),v(2),$(t.name),v(2),$(t.category),v(2),$(t.condition),v(2),$(t.auctioneerId),v(2),$(t.auctioneerName),v(2),$(t.description),v(2),$(t.startDate),v(2),$(r.formatTime(t.startTime)),v(2),$(t.endDate),v(2),$(r.formatTime(t.endTime)),v(2),L("\u20B9",t.minPrice,""),v(2),L("\u20B9",t.bidPrice||"N/A",""),v(),k("ngClass","status-"+t.status),v(),$(t.status),v(2),L("\u20B9",t.bidPrice&&t.minPrice?t.bidPrice-t.minPrice:0,"")}}function v9(n,e){if(n&1&&(p(0,"div",54)(1,"table",55)(2,"thead")(3,"tr")(4,"th"),m(5,"ID"),h(),p(6,"th"),m(7,"Image"),h(),p(8,"th"),m(9,"Name"),h(),p(10,"th"),m(11,"Category"),h(),p(12,"th"),m(13,"Condition"),h(),p(14,"th"),m(15,"Auctioneer ID"),h(),p(16,"th"),m(17,"Auctioneer Name"),h(),p(18,"th"),m(19,"Description"),h(),p(20,"th"),m(21,"Start Date"),h(),p(22,"th"),m(23,"Start Time"),h(),p(24,"th"),m(25,"End Date"),h(),p(26,"th"),m(27,"End Time"),h(),p(28,"th"),m(29,"Min Price"),h(),p(30,"th"),m(31,"Bid Price"),h(),p(32,"th"),m(33,"Status"),h(),p(34,"th"),m(35,"Profit"),h()()(),p(36,"tbody"),Y(37,y9,33,17,"tr",34),h()()()),n&2){let t=G(2);v(37),k("ngForOf",t.filteredProducts)}}function w9(n,e){if(n&1&&(p(0,"tr")(1,"td"),m(2),h(),p(3,"td"),J(4,"img",56),h(),p(5,"td"),m(6),h(),p(7,"td"),m(8),h(),p(9,"td"),m(10),h(),p(11,"td"),m(12),h(),p(13,"td"),m(14),h(),p(15,"td"),m(16),h(),p(17,"td"),m(18),h(),p(19,"td"),m(20),h(),p(21,"td"),m(22),h(),p(23,"td"),m(24),h(),p(25,"td"),m(26),h(),p(27,"td"),m(28),h(),p(29,"td"),m(30),h(),p(31,"td",57),m(32),h(),p(33,"td"),m(34),h()()),n&2){let t=e.$implicit;v(2),$(t.id),v(2),k("src",t.image,et),v(2),$(t.name),v(2),$(t.category),v(2),$(t.bidderId),v(2),$(t.bidderName),v(2),$(t.bidderEmail),v(2),$(t.bidderPhone),v(2),$(t.productId),v(2),$(t.auctioneerId),v(2),$(t.auctioneerName),v(2),$(t.auctioneerEmail),v(2),$(t.auctioneerPhone),v(2),L("\u20B9",t.minPrice,""),v(2),L("\u20B9",t.bidAmount,""),v(),k("ngClass","status-"+t.status),v(),$(t.status),v(2),L("\u20B9",t.profit,"")}}function b9(n,e){if(n&1&&(p(0,"div",54)(1,"table",55)(2,"thead")(3,"tr")(4,"th"),m(5,"Bid ID"),h(),p(6,"th"),m(7,"Image"),h(),p(8,"th"),m(9,"Name"),h(),p(10,"th"),m(11,"Category"),h(),p(12,"th"),m(13,"Bidder ID"),h(),p(14,"th"),m(15,"Bidder Name"),h(),p(16,"th"),m(17,"Bidder Email"),h(),p(18,"th"),m(19,"Phone"),h(),p(20,"th"),m(21,"Product ID"),h(),p(22,"th"),m(23,"Auctioneer ID"),h(),p(24,"th"),m(25,"Auctioneer Name"),h(),p(26,"th"),m(27,"Email"),h(),p(28,"th"),m(29,"Phone"),h(),p(30,"th"),m(31,"Start Price"),h(),p(32,"th"),m(33,"Bid Price"),h(),p(34,"th"),m(35,"Status"),h(),p(36,"th"),m(37,"Profit"),h()()(),p(38,"tbody"),Y(39,w9,35,18,"tr",34),h()()()),n&2){let t=G(2);v(39),k("ngForOf",t.filteredBids)}}function E9(n,e){if(n&1){let t=Ct();p(0,"section",47)(1,"h3"),m(2,"Overall Progress"),h(),p(3,"div",48)(4,"button",49),B("click",function(){ue(t);let i=G();return de(i.selectedTab="all")}),m(5,"All Products"),h(),p(6,"button",49),B("click",function(){ue(t);let i=G();return de(i.selectedTab="bids")}),m(7,"Bidded Products"),h()(),p(8,"div",50)(9,"input",51),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.searchQuery,i)||(o.searchQuery=i),de(i)}),B("input",function(){ue(t);let i=G();return de(i.applyFilters())}),h(),p(10,"select",21),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.statusFilter,i)||(o.statusFilter=i),de(i)}),B("change",function(){ue(t);let i=G();return de(i.applyFilters())}),p(11,"option",22),m(12,"All Status"),h(),Y(13,g9,2,1,"option",34),h(),p(14,"select",21),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.categoryFilter,i)||(o.categoryFilter=i),de(i)}),B("change",function(){ue(t);let i=G();return de(i.applyFilters())}),p(15,"option",22),m(16,"All Categories"),h(),Y(17,_9,2,1,"option",34),h(),p(18,"input",52),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.startDate,i)||(o.startDate=i),de(i)}),B("change",function(){ue(t);let i=G();return de(i.applyFilters())}),h(),p(19,"input",52),En("ngModelChange",function(i){ue(t);let o=G();return Nn(o.endDate,i)||(o.endDate=i),de(i)}),B("change",function(){ue(t);let i=G();return de(i.applyFilters())}),h()(),Y(20,v9,38,1,"div",53)(21,b9,40,1,"div",53),h()}if(n&2){let t=G();v(4),cn("active",t.selectedTab==="all"),v(2),cn("active",t.selectedTab==="bids"),v(3),bn("ngModel",t.searchQuery),v(),bn("ngModel",t.statusFilter),v(3),k("ngForOf",t.selectedTab==="all"?t.productStatus:t.bidStatus),v(),bn("ngModel",t.categoryFilter),v(3),k("ngForOf",t.categories),v(),bn("ngModel",t.startDate),v(),bn("ngModel",t.endDate),v(),k("ngIf",t.selectedTab==="all"),v(),k("ngIf",t.selectedTab==="bids")}}var ym=class n{constructor(e,t){this.firestore=e;this.authService=t}currentSection="dashboard";adminData={};totalUsers=0;totalAuctioneers=0;totalBidders=0;totalProducts=0;activeProducts=0;soldProducts=0;upcomingProducts=0;pendingAuctions;resolvedDisputes;auctionProducts=[];filteredAuctionProducts=[];searchQuery="";statusFilter="";categoryFilter="";expandedAuctioneerUID=null;allAuctioneers=[];allBidders=[];filteredBidders=[];expandedBidderUID=null;filteredAuctioneers=[];allProducts=[];allBids=[];filteredProducts=[];filteredBids=[];selectedTab="all";productStatus=["Upcoming","Active","Sold"];bidStatus=["Pending","Won","Outbid"];categories=["electronics","fashion","books","furniture","vehicles","others"];startDate="";endDate="";isLoading=!1;ngOnInit(){return E(this,null,function*(){if(window.innerWidth<1024){alert("\u274C Admin page cannot be accessed on mobile or tablet devices. Please use a desktop browser."),window.location.href="/";return}yield this.loadAdminData(),yield this.loadUserStats(),yield this.loadProductStats(),yield this.loadAuctioneerDetails(),yield this.loadBidderDetails(),yield this.loadAuctionProducts(),yield this.loadAllProducts(),yield this.loadAllBids(),this.applyFilters()})}navigate(e){this.currentSection=e}logout(){this.authService.logout()}loadAdminData(){return E(this,null,function*(){this.isLoading=!0;let e=this.authService.getUserId(),t=je(this.firestore,`admins/${e}`),r=yield rt(t);r.exists()&&(this.adminData=r.data(),this.adminData.profileImage&&(this.adminData.profileImage=atob(this.adminData.profileImage))),this.isLoading=!1})}loadUserStats(){return E(this,null,function*(){this.isLoading=!0;let e=yield We(Ge(this.firestore,"auctioneers")),t=yield We(Ge(this.firestore,"bidders"));this.totalAuctioneers=e.size,this.totalBidders=t.size,this.totalUsers=this.totalAuctioneers+this.totalBidders,this.isLoading=!1})}loadProductStats(){return E(this,null,function*(){this.isLoading=!0;let e=0,t=0,r=0,i=0,o=yield We(Ge(this.firestore,"auctioneers"));for(let s of o.docs){let a=s.id;(yield We(Ge(this.firestore,`auctioneers/${a}/products`))).forEach(u=>{e++;let g=u.data().status;g==="Active"?t++:g==="Sold"?r++:g==="Upcoming"&&i++})}this.totalProducts=e,this.activeProducts=t,this.soldProducts=r,this.upcomingProducts=i,this.isLoading=!1})}loadAuctioneerDetails(){return E(this,null,function*(){this.isLoading=!0;let e=Ge(this.firestore,"auctioneers"),t=yield We(e),r=[];for(let i of t.docs){let o=i.id,s=i.data(),a=Ge(this.firestore,`auctioneers/${o}/products`),c=yield We(a),u=[];c.forEach(d=>{let g=d.data();g.productImage&&(g.productImage=atob(g.productImage)),u.push(g)}),r.push({uid:o,name:s.username||"N/A",email:s.email||"",password:s.password||"",phoneNumber:s.phoneNumber||"",address:s.address||"",role:s.role||"auctioneer",createdAt:s.createdAt||"",profileImage:s.profileImage?atob(s.profileImage):"",products:u})}this.allAuctioneers=r,this.filteredAuctioneers=[...r],this.isLoading=!1})}loadAuctionProducts(){return E(this,null,function*(){this.isLoading=!0;let e=Ge(this.firestore,"auctioneers"),t=yield We(e),r=[];for(let i of t.docs){let o=i.id,s=i.data(),a=Ge(this.firestore,`auctioneers/${o}/products`);(yield We(a)).forEach(u=>{let d=u.data();r.push(oe(H({},d),{auctioneerName:s.username||"N/A"}))})}this.auctionProducts=r,this.filteredAuctionProducts=[...r],this.isLoading=!1})}applyAuctioneerFilters(){this.isLoading=!0;let e=this.searchQuery.toLowerCase();this.filteredAuctioneers=this.allAuctioneers.map(t=>{let r=!this.searchQuery||t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)||t.uid.toLowerCase().includes(e),i=t.products.filter(o=>{let s=!this.statusFilter||this.getProductStatus(o)===this.statusFilter,a=!this.categoryFilter||o.productCategory===this.categoryFilter;return s&&a});return r&&i.length>0?oe(H({},t),{products:i}):null}).filter(Boolean),this.isLoading=!1}toggleProductDetails(e){this.isLoading=!0,this.expandedAuctioneerUID=this.expandedAuctioneerUID===e?null:e,this.isLoading=!1}loadBidderDetails(){return E(this,null,function*(){this.isLoading=!0;let e=yield We(Ge(this.firestore,"bidders")),t=[];for(let r of e.docs){let i=r.id,o=r.data(),s=yield We(Ge(this.firestore,`bidders/${i}/bids`)),a=[];for(let c of s.docs){let u=c.data(),d=u.auctioneerUID,g="N/A",y="",b="",C=0,O="",R="";try{let U=je(this.firestore,`auctioneers/${d}/products/${u.productId}`),j=yield rt(U);j.exists()&&(R=j.data().productCategory||"others")}catch{console.warn("Product not found or category missing:",u.productId)}if(d){let U=je(this.firestore,`auctioneers/${d}`),j=yield rt(U);if(j.exists()){let V=j.data();g=V.username||"N/A",y=V.email||"",b=V.phoneNumber||""}if(u.productId){let V=je(this.firestore,`auctioneers/${d}/products/${u.productId}`),X=yield rt(V);if(X.exists()){let _e=X.data();C=_e.minimumPrice||0,_e.productImage&&(O=atob(_e.productImage))}}}a.push({bidId:c.id,productName:u.productName||"",productId:u.productId||"",biddedPrice:u.bidAmount||0,status:u.status||"Pending",statusMessage:u.statusMessage||"",auctioneerId:d,auctioneerName:g,auctioneerEmail:y,auctioneerPhone:b,minimumPrice:C,productImage:O,productCategory:R,profit:(u.bidAmount||0)-C})}t.push({uid:i,name:o.username||"",email:o.email||"",password:o.password||"",phoneNumber:o.phoneNumber||"",address:o.address||"",createdAt:o.createdAt||"",profileImage:o.profileImage?atob(o.profileImage):"",bids:a})}this.allBidders=t,this.filteredBidders=[...t],this.isLoading=!1})}applyBidderFilters(){this.isLoading=!0;let e=this.searchQuery.toLowerCase();this.filteredBidders=this.allBidders.map(t=>{let r=t.bids.filter(i=>{let o=!e||i.productName?.toLowerCase().includes(e)||i.bidId?.toLowerCase().includes(e)||i.auctioneerName?.toLowerCase().includes(e)||t.name?.toLowerCase().includes(e)||t.email?.toLowerCase().includes(e)||t.uid?.toLowerCase().includes(e),s=!this.statusFilter||i.status===this.statusFilter,a=!this.categoryFilter||i.productCategory===this.categoryFilter;return o&&s&&a});return oe(H({},t),{bids:r})}).filter(t=>t.bids.length>0),this.isLoading=!1}toggleBidDetails(e){this.isLoading=!0,this.expandedBidderUID=this.expandedBidderUID===e?null:e,this.isLoading=!1}loadAllProducts(){return E(this,null,function*(){this.isLoading=!0;let e=yield We(Ge(this.firestore,"auctioneers")),t=[];for(let r of e.docs){let i=r.id,o=r.data(),s=yield We(Ge(this.firestore,`auctioneers/${i}/products`));for(let a of s.docs){let c=a.data();t.push({id:a.id,image:c.productImage?atob(c.productImage):"",name:c.productName,description:c.description,category:c.productCategory,condition:c.condition,auctioneerId:i,auctioneerName:o.username,startDate:c.sessionDate,startTime:c.sessionTime,endDate:c.endDate,endTime:c.endTime,minPrice:c.minimumPrice,bidPrice:c.currentHighestBid||null,status:this.getProductStatus(c)})}}this.allProducts=t,this.filteredProducts=[...t],this.isLoading=!1})}loadAllBids(){return E(this,null,function*(){this.isLoading=!0;let e=yield We(Ge(this.firestore,"bidders")),t=[];for(let r of e.docs){let i=r.id,o=r.data(),s=yield We(Ge(this.firestore,`bidders/${i}/bids`));for(let a of s.docs){let c=a.data(),u=c.auctioneerUID,d=c.productId;if(!u||!d)continue;let g="N/A",y="N/A",b="N/A",C="",O=0,R="N/A",U="N/A",j="N/A";try{let V=je(this.firestore,`auctioneers/${u}/products/${d}`),X=yield rt(V);if(X.exists()){let x=X.data();g=x.productName||"N/A",y=x.productCategory||"N/A",b=x.condition||"N/A",O=x.minimumPrice||0,x.productImage&&(C=atob(x.productImage))}let _e=je(this.firestore,`auctioneers/${u}`),te=yield rt(_e);if(te.exists()){let x=te.data();R=x.username||"N/A",U=x.email||"N/A",j=x.phoneNumber||"N/A"}t.push({id:a.id,image:C,name:g,category:y,condition:b,bidderId:i,bidderName:o.username||"N/A",bidderEmail:o.email||"N/A",bidderPhone:o.phoneNumber||"N/A",productId:d,auctioneerId:u,auctioneerName:R,auctioneerEmail:U,auctioneerPhone:j,minPrice:O,bidAmount:c.bidAmount||0,status:c.status||"Pending",profit:(c.bidAmount||0)-O})}catch(V){console.error(`\u274C Error loading bid ${a.id}:`,V)}}}this.allBids=t,this.filteredBids=[...t],this.isLoading=!1})}applyFilters(){this.isLoading=!0;let e=this.searchQuery.toLowerCase();this.selectedTab==="all"?this.filteredProducts=this.allProducts.filter(t=>{let r=!e||[t.id,t.name,t.condition,t.auctioneerId,t.auctioneerName,t.description].some(c=>c&&c.toString().toLowerCase().includes(e)),i=!this.statusFilter||t.status===this.statusFilter,o=!this.categoryFilter||t.category===this.categoryFilter,s=!this.startDate||new Date(t.startDate)>=new Date(this.startDate),a=!this.endDate||new Date(t.endDate)<=new Date(this.endDate);return r&&i&&o&&s&&a}):this.filteredBids=this.allBids.filter(t=>{let r=!e||[t.id,t.name,t.bidderId,t.bidderName,t.bidderEmail,t.bidderPhone,t.productId,t.auctioneerId,t.auctioneerName,t.auctioneerEmail,t.auctioneerPhone].some(c=>c&&c.toString().toLowerCase().includes(e)),i=!this.statusFilter||t.status===this.statusFilter,o=!this.categoryFilter||t.category===this.categoryFilter,s=!this.startDate||new Date(t.startDate||"")>=new Date(this.startDate),a=!this.endDate||new Date(t.endDate||"")<=new Date(this.endDate);return r&&i&&o&&s&&a}),this.isLoading=!1}getProductStatus(e){this.isLoading=!0;let t=new Date,r=new Date(`${e.sessionDate}T${e.sessionTime}`),i=new Date(`${e.endDate}T${e.endTime}`);return t<r?"Upcoming":t>i?"Sold":"Active"}formatTime(e){let[t,r]=e.split(":").map(Number),i=t>=12?"PM":"AM";return`${t%12||12}:${r.toString().padStart(2,"0")} ${i}`}static \u0275fac=function(t){return new(t||n)(z(dt),z(Qt))};static \u0275cmp=at({type:n,selectors:[["app-admin"]],decls:23,vars:18,consts:[["class","loading-bar",4,"ngIf"],[1,"admin-container"],[1,"admin-sidebar"],[1,"admin-nav"],["href","javascript:void(0)",3,"click","ngClass"],["href","javascript:void(0)",3,"click"],[1,"admin-main"],[4,"ngIf"],["class","admin-section dashboard-section",4,"ngIf"],["class","admin-section auction-progress-section",4,"ngIf"],["class","admin-section bids-progress-section",4,"ngIf"],["class","admin-section overall-progress-section",4,"ngIf"],[1,"loading-bar"],[1,"admin-section","dashboard-section"],[1,"dashboard-block","admin-profile"],["alt","Admin Profile",3,"src"],[1,"dashboard-block","user-stats"],[1,"dashboard-block","product-stats"],[1,"admin-section","auction-progress-section"],[1,"auction-filters"],["type","text","placeholder","Search auctioneer by name, email or UID...",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","change","ngModel"],["value",""],["value","Active"],["value","Sold"],["value","Upcoming"],["value","electronics"],["value","fashion"],["value","books"],["value","furniture"],["value","vehicles"],["value","others"],[1,"table-responsive"],[1,"auctioneer-table"],[4,"ngFor","ngForOf"],["alt","Profile",1,"profile-img",3,"src"],[1,"expand-btn",3,"click","ngClass"],[1,"arrow-icon"],["colspan","9"],[1,"inner-scroll-container"],[1,"inner-product-table"],["alt","Product",1,"product-thumb",3,"src"],[1,"admin-section","bids-progress-section"],["type","text","placeholder","Search by bidder name, email or UID...",3,"ngModelChange","input","ngModel"],["value","Pending"],["value","Won"],["value","Outbid"],[1,"admin-section","overall-progress-section"],[1,"tab-nav"],[3,"click"],[1,"filters"],["type","text","placeholder","Search by product or name...",3,"ngModelChange","input","ngModel"],["type","date",3,"ngModelChange","change","ngModel"],["class","table-container",4,"ngIf"],[1,"table-container"],[1,"scroll-table"],[1,"thumb",3,"src"],[3,"ngClass"]],template:function(t,r){t&1&&(p(0,"body"),Y(1,o9,1,0,"div",0),p(2,"div",1)(3,"aside",2)(4,"h2"),m(5,"Admin Panel"),h(),p(6,"nav",3)(7,"a",4),B("click",function(){return r.navigate("dashboard")}),m(8,"Dashboard"),h(),p(9,"a",4),B("click",function(){return r.navigate("progress")}),m(10,"Auction Progress"),h(),p(11,"a",4),B("click",function(){return r.navigate("bids-progress")}),m(12,"Bids Progress"),h(),p(13,"a",4),B("click",function(){return r.navigate("overall-progress")}),m(14,"Overall Progress"),h(),p(15,"a",5),B("click",function(){return r.logout()}),m(16,"Logout"),h()()(),p(17,"main",6),Y(18,s9,2,0,"h2",7)(19,a9,59,13,"section",8)(20,d9,53,4,"section",9)(21,m9,53,4,"section",10)(22,E9,22,13,"section",11),h()()()),t&2&&(v(),k("ngIf",r.isLoading),v(6),k("ngClass",ir(10,_m,r.currentSection==="dashboard")),v(2),k("ngClass",ir(12,_m,r.currentSection==="progress")),v(2),k("ngClass",ir(14,_m,r.currentSection==="bids-progress")),v(2),k("ngClass",ir(16,_m,r.currentSection==="overall-progress")),v(5),k("ngIf",!r.currentSection||r.currentSection!=="dashboard"),v(),k("ngIf",r.currentSection==="dashboard"),v(),k("ngIf",r.currentSection==="progress"),v(),k("ngIf",r.currentSection==="bids-progress"),v(),k("ngIf",r.currentSection==="overall-progress"))},dependencies:[un,Tr,xr,ln,Sr,Ln,Et,wr,br,St,Ma,Gv],styles:["body[_ngcontent-%COMP%]{background:linear-gradient(150deg,#6a11cb,#8c0b8e,#7b0eac);width:100%;min-height:100vh;padding-right:20px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-family:Arial,sans-serif;color:#fff;margin:-8px;overflow-x:hidden}.admin-container[_ngcontent-%COMP%]{display:flex;width:100%;min-height:100vh;padding:2rem;gap:2rem;flex-wrap:wrap}.admin-sidebar[_ngcontent-%COMP%]{width:250px;min-height:100vh;background:#ffffff14;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.15);border-radius:20px;box-shadow:0 8px 28px #00000059;padding:2rem 1.5rem;color:#fff;position:sticky;top:0;z-index:10}.admin-sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:1.8rem;font-weight:700;margin-bottom:2rem;background:linear-gradient(90deg,#00fff7,#ffb6f9);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.admin-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.admin-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.8rem 1rem;color:#fff;text-decoration:none;background:#ffffff12;border-radius:10px;transition:all .3s ease;border:1px solid rgba(255,255,255,.1);font-weight:500;transition:background .3s ease,transform .3s ease,color .3s ease}.admin-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#6a11cb,#8e2de2);transform:translate(5px);box-shadow:0 4px 14px #fff3}.admin-nav[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00c9ff,#92fe9d);color:#000;font-weight:700;transform:translate(8px) scale(1.05);box-shadow:0 0 12px #00ffff4d;border:1px solid rgba(0,255,255,.4)}.admin-main[_ngcontent-%COMP%]{flex-grow:1;max-width:70%;background:#ffffff14;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);padding:2rem;border-radius:20px;box-shadow:0 8px 18px #00000040;color:#fff}.admin-main[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;text-align:center;margin-bottom:1.5rem;color:#ffdefa}.admin-section[_ngcontent-%COMP%]{background:#ffffff0d;padding:1.5rem;border-radius:16px;box-shadow:0 6px 16px #00000040;border:1px solid rgba(255,255,255,.1);margin-top:2rem}.dashboard-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:space-between;padding:2rem 1rem;background:linear-gradient(135deg,#ffffff05,#ffffff0a);border-radius:20px;animation:_ngcontent-%COMP%_fadeInDashboard .6s ease-in-out;border:1px solid rgba(255,255,255,.1);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}.dashboard-block[_ngcontent-%COMP%]{flex:1 1 320px;padding:2rem 1.5rem;background:#ffffff0f;border-radius:20px;box-shadow:0 10px 30px #00000059;backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);border:1px solid rgba(255,255,255,.12);transition:transform .3s ease,box-shadow .3s ease;position:relative}.dashboard-block[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 12px 40px #00000080}.dashboard-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;color:#ffdefa;margin-bottom:1rem;letter-spacing:.5px;border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:.75rem}.dashboard-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#e8dcff;margin:.5rem 0;line-height:1.6}.dashboard-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0fc;font-weight:600}.admin-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:110px;height:110px;object-fit:cover;border-radius:50%;display:block;margin:0 auto 1rem;border:3px solid #00fff7;box-shadow:0 0 15px #00fff7;transition:transform .3s ease}.admin-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@keyframes _ngcontent-%COMP%_fadeInDashboard{0%{opacity:0;transform:translateY(25px)}to{opacity:1;transform:translateY(0)}}.auction-progress-section[_ngcontent-%COMP%]{background:#ffffff0f;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-radius:16px;border:1px solid rgba(255,255,255,.15);padding:2rem;box-shadow:0 6px 20px #0006;color:#fff}.auction-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1.5rem}.auction-filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .auction-filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.6rem 1rem;border-radius:10px;border:1px solid rgba(255,255,255,.25);background:#ffffff1a;color:#000;font-size:.95rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);flex:1 1 250px;transition:all .3s ease}.auction-filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#ffffff80}.table-responsive[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.15);box-shadow:inset 0 0 8px #ffffff0d;max-height:400px;max-width:140vh;overflow-y:auto;overflow-x:auto;background:#ffffff08}.auctioneer-table[_ngcontent-%COMP%]{width:100%;min-width:1100px;border-collapse:collapse;table-layout:auto}.auctioneer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .auctioneer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.8rem;border:1px solid rgba(255,255,255,.12);color:#fff;font-size:.9rem;text-align:center;white-space:nowrap}.auctioneer-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#ffffff14;color:#00fff7}.profile-img[_ngcontent-%COMP%]{width:42px;height:42px;object-fit:cover;border-radius:50%;border:2px solid #00fff7;box-shadow:0 0 8px #00fff7}.expand-btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:.8rem;background:linear-gradient(135deg,#6a11cb,#8c0b8e);color:#fff;border:none;border-radius:6px;cursor:pointer;transition:all .3s ease}.expand-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:linear-gradient(135deg,#7b0eac,#00c9ff)}.arrow-icon[_ngcontent-%COMP%]{display:block;width:12px;height:12px;border:solid #00fff7;border-width:0 2px 2px 0;padding:3px;transform:rotate(45deg);transition:transform .3s ease-in-out}.expand-btn.expanded[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{transform:rotate(-135deg)}.inner-scroll-container[_ngcontent-%COMP%]{max-height:260px;max-width:220vh;overflow-x:auto;overflow-y:auto;border-radius:10px;margin-top:1rem;border:1px solid rgba(255,255,255,.1);box-shadow:inset 0 0 8px #ffffff0d}.inner-product-table[_ngcontent-%COMP%]{min-width:1200px;border-collapse:collapse;width:100%;background:#ffffff08}.inner-product-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .inner-product-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.7rem;font-size:.85rem;border:1px solid rgba(255,255,255,.12);text-align:center;color:#f0f0f0;white-space:nowrap}.inner-product-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#ffffff14;color:#00ffc3}.product-thumb[_ngcontent-%COMP%]{width:60px;height:40px;object-fit:cover;border-radius:6px;border:1px solid rgba(255,255,255,.15);box-shadow:0 0 5px #00ffff4d}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar, .inner-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px;width:8px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .inner-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#6a11cb,#8c0b8e);border-radius:4px}.overall-progress-section[_ngcontent-%COMP%]{background:#ffffff0f;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-radius:16px;border:1px solid rgba(255,255,255,.15);padding:2rem;box-shadow:0 6px 20px #0006;color:#fff}.tab-nav[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem}.tab-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:8px;background:#ffffff1a;color:#fff;font-weight:600;cursor:pointer;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);transition:all .3s ease}.tab-nav[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6a11cb,#8c0b8e);color:#00fff7}.tab-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1.5rem}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.6rem 1rem;border-radius:10px;border:1px solid rgba(255,255,255,.25);background:#ffffff1a;color:#000;font-size:.95rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);flex:1 1 200px}.filters[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{min-width:160px}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#ffffffa9}.table-container[_ngcontent-%COMP%]{max-height:400px;max-width:220vh;overflow-x:auto;overflow-y:auto;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:#ffffff08;box-shadow:inset 0 0 8px #ffffff0d}.scroll-table[_ngcontent-%COMP%]{width:100%;min-width:1300px;border-collapse:collapse;background:#ffffff08}.scroll-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .scroll-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;border:1px solid rgba(255,255,255,.12);text-align:center;font-size:.9rem;color:#f2f2f2;white-space:nowrap}.scroll-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#ffffff14;color:#00ffc3}.thumb[_ngcontent-%COMP%]{width:60px;height:40px;object-fit:cover;border-radius:6px;border:1px solid rgba(255,255,255,.15);box-shadow:0 0 5px #00ffff4d}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px;width:8px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#6a11cb,#8c0b8e);border-radius:4px}.scroll-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#ffffff14}.scroll-table[_ngcontent-%COMP%]   td.status-Won[_ngcontent-%COMP%]{color:#0f0;font-weight:700}.scroll-table[_ngcontent-%COMP%]   td.status-Outbid[_ngcontent-%COMP%]{color:#f55;font-weight:700}.scroll-table[_ngcontent-%COMP%]   td.status-Pending[_ngcontent-%COMP%]{color:#fa0;font-weight:700}.scroll-table[_ngcontent-%COMP%]   td.status-Active[_ngcontent-%COMP%]{color:#0f0;font-weight:700}.scroll-table[_ngcontent-%COMP%]   td.status-Sold[_ngcontent-%COMP%]{color:#f55;font-weight:700}.scroll-table[_ngcontent-%COMP%]   td.status-Upcoming[_ngcontent-%COMP%]{color:#fa0;font-weight:700}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.loading-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:4px;width:100%;background:linear-gradient(to right,#2196f3,#42a5f5,#64b5f6);z-index:10000;animation:_ngcontent-%COMP%_loadingSlide 1.5s infinite ease-in-out;box-shadow:0 2px 5px #00000026}@keyframes _ngcontent-%COMP%_loadingSlide{0%{transform:scaleX(0);transform-origin:left}50%{transform:scaleX(.5);transform-origin:center}to{transform:scaleX(1);transform-origin:right}}"]})};function I9(n,e){n&1&&(p(0,"div",5),m(1," Passwords do not match. "),h())}var vm=class n{constructor(e,t,r){this.fb=e;this.route=t;this.router=r;this.resetForm=this.fb.group({password:["",[be.required,be.minLength(6)]],confirmPassword:["",be.required]},{validators:this.passwordsMatchValidator()})}resetForm;auth=K(Nt);oobCode="";ngOnInit(){this.oobCode=this.route.snapshot.queryParamMap.get("oobCode")||""}onReset(){return E(this,null,function*(){if(this.resetForm.invalid)return;let e=this.resetForm.get("password")?.value;try{yield Z1(this.auth,this.oobCode,e),alert("Password reset successful. You can now log in."),this.router.navigate(["/login"])}catch(t){alert(`Error: ${t.message}`)}})}passwordsMatchValidator(){return e=>{let t=e.get("password")?.value,r=e.get("confirmPassword")?.value;return t&&r&&t!==r?{passwordMismatch:!0}:null}}static \u0275fac=function(t){return new(t||n)(z(Vn),z(oo),z(Tt))};static \u0275cmp=at({type:n,selectors:[["app-reset-password"]],decls:14,vars:2,consts:[[3,"ngSubmit","formGroup"],["type","password","formControlName","password"],["type","password","formControlName","confirmPassword"],["class","error",4,"ngIf"],["type","submit"],[1,"error"]],template:function(t,r){t&1&&(p(0,"h2"),m(1,"Reset Your Password"),h(),p(2,"form",0),B("ngSubmit",function(){return r.onReset()}),p(3,"label"),m(4,"New Password"),h(),J(5,"input",1)(6,"br"),p(7,"label"),m(8,"Confirm Password"),h(),J(9,"input",2)(10,"br"),Y(11,I9,2,0,"div",3),p(12,"button",4),m(13,"Reset Password"),h()()),t&2&&(v(2),k("formGroup",r.resetForm),v(9),k("ngIf",(r.resetForm.errors==null?null:r.resetForm.errors.passwordMismatch)&&r.resetForm.dirty))},dependencies:[Et,St,un,Cr,ln,Ln,Ir,sr,ar],encapsulation:2})};var wm=[{path:"login",component:um},{path:"registration",component:dm},{path:"password-recovery",component:hm},{path:"auctioner",component:fm},{path:"dashboard",component:pm},{path:"bidder",component:mm},{path:"bidder-dashboard",component:gm},{path:"admin",component:ym},{path:"reset-password",component:vm},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"login"}];var sO="@firebase/database",aO="1.0.8";var bI="";function C9(n){bI=n}var ME=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Dt(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ra(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var RE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ar(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var UO=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ME(e)}}catch{}return new RE},Ts=UO("localStorage"),OE=UO("sessionStorage");var gc=new Pr("@firebase/database"),S9=function(){let n=1;return function(){return n++}}(),BO=function(n){let e=UP(n),t=new jf;t.update(e);let r=t.digest();return $f.encodeByteArray(r)},Ju=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ju.apply(null,r):typeof r=="object"?e+=Dt(r):e+=r,e+=" "}return e},xs=null,cO=!0,T9=function(n,e){Q(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(gc.logLevel=Ee.VERBOSE,xs=gc.log.bind(gc),e&&OE.set("logging_enabled",!0)):typeof n=="function"?xs=n:(xs=null,OE.remove("logging_enabled"))},Yt=function(...n){if(cO===!0&&(cO=!1,xs===null&&OE.get("logging_enabled")===!0&&T9(!0)),xs){let e=Ju.apply(null,n);xs(e)}},Xu=function(n){return function(...e){Yt(n,...e)}},NE=function(...n){let e="FIREBASE INTERNAL ERROR: "+Ju(...n);gc.error(e)},Pi=function(...n){let e=`FIREBASE FATAL ERROR: ${Ju(...n)}`;throw gc.error(e),new Error(e)},An=function(...n){let e="FIREBASE WARNING: "+Ju(...n);gc.warn(e)},x9=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&An("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},jO=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},D9=function(n){if(Dr()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},yc="[MIN_NAME]",Ds="[MAX_NAME]",Sc=function(n,e){if(n===e)return 0;if(n===yc||e===Ds)return-1;if(e===yc||n===Ds)return 1;{let t=lO(n),r=lO(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},A9=function(n,e){return n===e?0:n<e?-1:1},Bu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Dt(e))},EI=function(n){if(typeof n!="object"||n===null)return Dt(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Dt(e[r]),t+=":",t+=EI(n[e[r]]);return t+="}",t},$O=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Gn(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var HO=function(n){Q(!jO(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,c;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(c=t;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();let d=u.join(""),g="";for(c=0;c<64;c+=8){let y=parseInt(d.substr(c,8),2).toString(16);y.length===1&&(y="0"+y),g=g+y}return g.toLowerCase()},P9=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},M9=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var R9=new RegExp("^-?(0*)\\d{1,10}$"),O9=-2147483648,N9=2147483647,lO=function(n){if(R9.test(n)){let e=Number(n);if(e>=O9&&e<=N9)return e}return null},ed=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw An("Exception was thrown by user callback.",t),e},Math.floor(0))}},k9=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qu=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var kE=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){An(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var FE=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Yt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',An(e)}},Gu=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Em="5",zO="v",qO="s",GO="r",WO="f",KO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QO="ls",YO="p",LE="ac",ZO="websocket",JO="long_polling";var Im=class{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ts.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ts.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function F9(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function XO(n,e,t){Q(typeof e=="string","typeof type must == string"),Q(typeof t=="object","typeof params must == object");let r;if(e===ZO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===JO)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);F9(n)&&(t.ns=n.namespace);let i=[];return Gn(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var VE=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Ar(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return xP(this.counters_)}};var CE={},SE={};function II(n){let e=n.toString();return CE[e]||(CE[e]=new VE),CE[e]}function L9(n,e){let t=n.toString();return SE[t]||(SE[t]=e()),SE[t]}var UE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ed(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var uO="start",V9="close",U9="pLPCommand",B9="pRTLPCB",eN="id",tN="pw",nN="ser",j9="cb",$9="seg",H9="ts",z9="d",q9="dframe",rN=1870,iN=30,G9=rN-iN,W9=25e3,K9=3e4,BE=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xu(e),this.stats_=II(t),this.urlFn=c=>(this.appCheckToken&&(c[LE]=this.appCheckToken),XO(t,JO,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new UE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(K9)),D9(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jE((...o)=>{let[s,a,c,u,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===uO)this.id=a,this.password=c;else if(s===V9)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[uO]="t",r[nN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[j9]=this.scriptTagHolder.uniqueCallbackIdentifier),r[zO]=Em,this.transportSessionId&&(r[qO]=this.transportSessionId),this.lastSessionId&&(r[QO]=this.lastSessionId),this.applicationId&&(r[YO]=this.applicationId),this.appCheckToken&&(r[LE]=this.appCheckToken),typeof location<"u"&&location.hostname&&KO.test(location.hostname)&&(r[GO]=WO);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Dr()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!P9()&&!M9()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Dt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=Jv(t),i=$O(r,G9);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Dr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[q9]="t",r[eN]=e,r[tN]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Dt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},jE=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Dr())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=S9(),window[U9+this.uniqueCallbackIdentifier]=e,window[B9+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Yt("frame writing exception"),a.stack&&Yt(a.stack),Yt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Yt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[eN]=this.myID,e[tN]=this.myPW,e[nN]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+iN+r.length<=rN;){let s=this.pendingSegs.shift();r=r+"&"+$9+i+"="+s.seg+"&"+H9+i+"="+s.ts+"&"+z9+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(W9)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){Dr()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Yt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Q9=16384,Y9=45e3,Cm=null;typeof MozWebSocket<"u"?Cm=MozWebSocket:typeof WebSocket<"u"&&(Cm=WebSocket);var ju=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xu(this.connId),this.stats_=II(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[zO]=Em,!Dr()&&typeof location<"u"&&location.hostname&&KO.test(location.hostname)&&(a[GO]=WO),r&&(a[qO]=r),i&&(a[QO]=i),o&&(a[LE]=o),s&&(a[YO]=s),XO(t,ZO,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ts.set("previous_websocket_failure",!0);try{let i;if(Dr()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Em}/${bI}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Cm(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Cm!==null&&!n.forceDisallow_}static previouslyFailed(){return Ts.isInMemoryStorage||Ts.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ts.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Ra(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Q(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Dt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=$O(r,Q9);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Y9))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),Z9=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[BE,ju]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=ju&&ju.isAvailable(),i=r&&!ju.previouslyFailed();if(t.webSocketOnly&&(r||An("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ju];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),J9=6e4,X9=5e3,eG=10*1024,tG=100*1024,TE="t",dO="d",nG="s",hO="r",rG="e",fO="o",pO="a",mO="n",gO="p",iG="h",$E=class{constructor(e,t,r,i,o,s,a,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xu("c:"+this.id+":"),this.transportManager_=new Z9(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>tG?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>eG?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(TE in e){let t=e[TE];t===pO?this.upgradeIfSecondaryHealthy_():t===hO?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===fO&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Bu("t",e),r=Bu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:gO,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:pO,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:mO,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Bu("t",e),r=Bu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Bu(TE,e);if(dO in e){let r=e[dO];if(t===iG){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===mO){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===nG?this.onConnectionShutdown_(r):t===hO?this.onReset_(r):t===rG?NE("Server Error: "+r):t===fO?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):NE("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Em!==r&&An("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),qu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(J9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(X9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:gO,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ts.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Sm=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Tm=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){Q(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var xm=class n extends Tm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Yl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return Q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var _O=32,yO=768,Ke=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function $e(){return new Ke("")}function Re(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function So(n){return n.pieces_.length-n.pieceNum_}function Xe(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ke(n.pieces_,e)}function oN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function oG(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function sN(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function aN(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ke(e,0)}function Pt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ke)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ke(t,0)}function De(n){return n.pieceNum_>=n.pieces_.length}function zn(n,e){let t=Re(n),r=Re(e);if(t===null)return e;if(t===r)return zn(Xe(n),Xe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function cN(n,e){if(So(n)!==So(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function fr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(So(n)>So(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var HE=class{constructor(e,t){this.errorPrefix_=t,this.parts_=sN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Xl(this.parts_[r]);lN(this)}};function sG(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Xl(e),lN(n)}function aG(n){let e=n.parts_.pop();n.byteLength_-=Xl(e),n.parts_.length>0&&(n.byteLength_-=1)}function lN(n){if(n.byteLength_>yO)throw new Error(n.errorPrefix_+"has a key path longer than "+yO+" bytes ("+n.byteLength_+").");if(n.parts_.length>_O)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_O+") or object contains a cycle "+Ss(n))}function Ss(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var zE=class n extends Tm{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return Q(e==="visible","Unknown event type: "+e),[this.visible_]}};var $u=1e3,cG=60*5*1e3,vO=30*1e3,lG=1.3,uG=3e4,dG="server_kill",wO=3,CI=(()=>{class n extends Sm{constructor(t,r,i,o,s,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=Xu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$u,this.maxReconnectDelay_=cG,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Dr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zE.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&xm.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(Dt(s)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new ns,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,c=>{let u=c.d,d=c.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Ar(t,"w")){let i=is(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();An(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||FP(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vO)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=kP(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),Q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Dt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):NE("Unrecognized action received from server: "+Dt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$u,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=$u,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uG&&(this.reconnectDelay_=$u),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lG)}this.onConnectStatus_(!1)}establishConnection_(){return E(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},d=function(y){Q(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)};this.realtime_={close:u,sendRequest:d};let g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[y,b]=yield Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);a?Yt("getToken() completed but was canceled"):(Yt("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=b&&b.token,c=new $E(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,C=>{An(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(dG)},s))}catch(y){this.log_("Failed to get token: "+y),a||(this.repoInfo_.nodeAdmin&&An(y),u())}}})}interrupt(t){Yt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Yt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Zl(this.interruptReasons_)&&(this.reconnectDelay_=$u,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>EI(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new Ke(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Yt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wO&&(this.reconnectDelay_=vO,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Yt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wO&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Dr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+bI.replace(/\./g,"-")]=1,Yl()?t["framework.cordova"]=1:zf()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=xm.getInstance().currentlyOnline();return Zl(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Oe=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var vc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Oe(yc,e),i=new Oe(yc,t);return this.compare(r,i)!==0}minPost(){return Oe.MIN}};var bm,Dm=class extends vc{static get __EMPTY_NODE(){return bm}static set __EMPTY_NODE(e){bm=e}compare(e,t){return Sc(e.name,t.name)}isDefinedOn(e){throw rs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Oe.MIN}maxPost(){return new Oe(Ds,bm)}makePost(e,t){return Q(typeof e=="string","KeyIndex indexValue must always be a string."),new Oe(e,bm)}toString(){return".key"}},_c=new Dm;var pc=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},hr=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??qn.EMPTY_NODE,this.right=s??qn.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return qn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return qn.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),qE=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new hr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},qn=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,hr.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,hr.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new pc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new pc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new pc(this.root_,null,this.comparator_,!0,e)}};qn.EMPTY_NODE=new qE;function hG(n,e){return Sc(n.name,e.name)}function SI(n,e){return Sc(n,e)}var GE;function fG(n){GE=n}var uN=function(n){return typeof n=="number"?"number:"+HO(n):"string:"+n},dN=function(n){if(n.isLeafNode()){let e=n.val();Q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ar(e,".sv"),"Priority must be a string or number.")}else Q(n===GE||n.isEmpty(),"priority of unexpected type.");Q(n===GE||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var bO,wc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),dN(this.priorityNode_)}static set __childrenNodeConstructor(t){bO=t}static get __childrenNodeConstructor(){return bO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return De(t)?this:Re(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Re(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Q(i!==".priority"||So(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xe(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+uN(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=HO(this.value_):t+=this.value_,this.lazyHash_=BO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(Q(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return Q(o>=0,"Unknown leaf type: "+r),Q(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),hN,fN;function pG(n){hN=n}function mG(n){fN=n}var WE=class extends vc{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?Sc(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Oe.MIN}maxPost(){return new Oe(Ds,new wc("[PRIORITY-POST]",fN))}makePost(e,t){let r=hN(e);return new Oe(t,new wc("[PRIORITY-POST]",r))}toString(){return".priority"}},Jt=new WE;var gG=Math.log(2),KE=class{constructor(e){let t=o=>parseInt(Math.log(o)/gG,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Am=function(n,e,t,r){n.sort(e);let i=function(c,u){let d=u-c,g,y;if(d===0)return null;if(d===1)return g=n[c],y=t?t(g):g,new hr(y,g.node,hr.BLACK,null,null);{let b=parseInt(d/2,10)+c,C=i(c,b),O=i(b+1,u);return g=n[b],y=t?t(g):g,new hr(y,g.node,hr.BLACK,C,O)}},o=function(c){let u=null,d=null,g=n.length,y=function(C,O){let R=g-C,U=g;g-=C;let j=i(R+1,U),V=n[R],X=t?t(V):V;b(new hr(X,V.node,O,null,j))},b=function(C){u?(u.left=C,u=C):(d=C,u=C)};for(let C=0;C<c.count;++C){let O=c.nextBitIsOne(),R=Math.pow(2,c.count-(C+1));O?y(R,hr.BLACK):(y(R,hr.BLACK),y(R,hr.RED))}return d},s=new KE(n.length),a=o(s);return new qn(r||e,a)};var xE,fc={},bc=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Q(fc&&Jt,"ChildrenNode.ts has not been loaded"),xE=xE||new n({".priority":fc},{".priority":Jt}),xE}get(e){let t=is(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qn?t:null}hasIndex(e){return Ar(this.indexSet_,e.toString())}addIndex(e,t){Q(e!==_c,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Oe.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Am(r,e.getCompare()):a=fc;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,u)}addToIndexes(e,t){let r=Jl(this.indexes_,(i,o)=>{let s=is(this.indexSet_,o);if(Q(s,"Missing index implementation for "+o),i===fc)if(s.isDefinedOn(e.node)){let a=[],c=t.getIterator(Oe.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Am(a,s.getCompare())}else return fc;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Oe(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Jl(this.indexes_,i=>{if(i===fc)return i;{let o=t.get(e.name);return o?i.remove(new Oe(e.name,o)):i}});return new n(r,this.indexSet_)}};var Hu,it=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&dN(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Hu||(Hu=new n(new qn(SI),null,bc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Hu}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Hu:r}}getChild(t){let r=Re(t);return r===null?this:this.getImmediateChild(r).getChild(Xe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(Q(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Oe(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Hu:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=Re(t);if(i===null)return r;{Q(Re(t)!==".priority"||So(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(Xe(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(Jt,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+uN(this.getPriority().val())+":"),this.forEachChild(Jt,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":BO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Oe(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Oe(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Oe(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Oe.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Oe.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===td?-1:0}withIndex(t){if(t===_c||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===_c||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Jt),o=r.getIterator(Jt),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===_c?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),QE=class extends it{constructor(){super(new qn(SI),it.EMPTY_NODE,bc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return it.EMPTY_NODE}isEmpty(){return!1}},td=new QE;Object.defineProperties(Oe,{MIN:{value:new Oe(yc,it.EMPTY_NODE)},MAX:{value:new Oe(Ds,td)}});Dm.__EMPTY_NODE=it.EMPTY_NODE;wc.__childrenNodeConstructor=it;fG(td);mG(td);var _G=!0;function Zt(n,e=null){if(n===null)return it.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),Q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new wc(t,Zt(e))}if(!(n instanceof Array)&&_G){let t=[],r=!1;if(Gn(n,(s,a)=>{if(s.substring(0,1)!=="."){let c=Zt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Oe(s,c)))}}),t.length===0)return it.EMPTY_NODE;let o=Am(t,hG,s=>s.name,SI);if(r){let s=Am(t,Jt.getCompare());return new it(o,Zt(e),new bc({".priority":s},{".priority":Jt}))}else return new it(o,Zt(e),bc.Default)}else{let t=it.EMPTY_NODE;return Gn(n,(r,i)=>{if(Ar(n,r)&&r.substring(0,1)!=="."){let o=Zt(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Zt(e))}}pG(Zt);var YE=class extends vc{constructor(e){super(),this.indexPath_=e,Q(!De(e)&&Re(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?Sc(e.name,t.name):o}makePost(e,t){let r=Zt(e),i=it.EMPTY_NODE.updateChild(this.indexPath_,r);return new Oe(t,i)}maxPost(){let e=it.EMPTY_NODE.updateChild(this.indexPath_,td);return new Oe(Ds,e)}toString(){return sN(this.indexPath_,0).join("/")}};var ZE=class extends vc{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Sc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Oe.MIN}maxPost(){return Oe.MAX}makePost(e,t){let r=Zt(e);return new Oe(t,r)}toString(){return".value"}},yG=new ZE;function vG(n){return{type:"value",snapshotNode:n}}function wG(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bG(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function EO(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function EG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var JE=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yc}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ds}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jt}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function IO(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Jt?t="$priority":n.index_===yG?t="$value":n.index_===_c?t="$key":(Q(n.index_ instanceof YE,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Dt(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Dt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Dt(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Dt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Dt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function CO(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Jt&&(e.i=n.index_.toString()),e}var XE=class n extends Sm{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Xu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let c=IO(e._queryParams);this.restRequest_(o+".json",c,(u,d)=>{let g=d;if(u===404&&(g=null,u=null),u===null&&this.onDataUpdate_(o,g,!1,r),is(this.listens_,s)===a){let y;u?u===401?y="permission_denied":y="rest_error:"+u:y="ok",i(y,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=IO(e._queryParams),r=e._path.toString(),i=new ns;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ss(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ra(a.responseText)}catch{An("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&An("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var eI=class{constructor(){this.rootNode_=it.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Pm(){return{value:null,children:new Map}}function pN(n,e,t){if(De(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Re(e);n.children.has(r)||n.children.set(r,Pm());let i=n.children.get(r);e=Xe(e),pN(i,e,t)}}function tI(n,e,t){n.value!==null?t(e,n.value):IG(n,(r,i)=>{let o=new Ke(e.toString()+"/"+r);tI(i,o,t)})}function IG(n,e){n.children.forEach((t,r)=>{e(r,t)})}var nI=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Gn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var SO=10*1e3,CG=30*1e3,SG=5*60*1e3,rI=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new nI(e);let r=SO+(CG-SO)*Math.random();qu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Gn(e,(i,o)=>{o>0&&Ar(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),qu(this.reportStats_.bind(this),Math.floor(Math.random()*2*SG))}};var Ai=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ai||{});function mN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _N(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var iI=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ai.ACK_USER_WRITE,this.source=mN()}operationForChild(e){if(De(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Ke(e));return new n($e(),t,this.revert)}}else return Q(Re(this.path)===e,"operationForChild called for unrelated child."),new n(Xe(this.path),this.affectedTree,this.revert)}};var Ec=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ai.OVERWRITE}operationForChild(e){return De(this.path)?new n(this.source,$e(),this.snap.getImmediateChild(e)):new n(this.source,Xe(this.path),this.snap)}};var Mm=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ai.MERGE}operationForChild(e){if(De(this.path)){let t=this.children.subtree(new Ke(e));return t.isEmpty()?null:t.value?new Ec(this.source,$e(),t.value):new n(this.source,$e(),t)}else return Q(Re(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Qu=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(De(e))return this.isFullyInitialized()&&!this.filtered_;let t=Re(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function TG(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(EG(s.childName,s.snapshotNode))}),zu(n,i,"child_removed",e,r,t),zu(n,i,"child_added",e,r,t),zu(n,i,"child_moved",o,r,t),zu(n,i,"child_changed",e,r,t),zu(n,i,"value",e,r,t),i}function zu(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,c)=>DG(n,a,c)),s.forEach(a=>{let c=xG(n,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function xG(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function DG(n,e,t){if(e.childName==null||t.childName==null)throw rs("Should only compare child_ events.");let r=new Oe(e.childName,e.snapshotNode),i=new Oe(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function yN(n,e){return{eventCache:n,serverCache:e}}function Wu(n,e,t,r){return yN(new Qu(e,t,r),n.serverCache)}function vN(n,e,t,r){return yN(n.eventCache,new Qu(e,t,r))}function oI(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function As(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var DE,AG=()=>(DE||(DE=new qn(A9)),DE),hn=class n{constructor(e,t=AG()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return Gn(e,(r,i)=>{t=t.set(new Ke(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:$e(),value:this.value};if(De(e))return null;{let r=Re(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(Xe(e),t);return o!=null?{path:Pt(new Ke(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(De(e))return this;{let t=Re(e),r=this.children.get(t);return r!==null?r.subtree(Xe(e)):new n(null)}}set(e,t){if(De(e))return new n(t,this.children);{let r=Re(e),o=(this.children.get(r)||new n(null)).set(Xe(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(De(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Re(e),r=this.children.get(t);if(r){let i=r.remove(Xe(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(De(e))return this.value;{let t=Re(e),r=this.children.get(t);return r?r.get(Xe(e)):null}}setTree(e,t){if(De(e))return t;{let r=Re(e),o=(this.children.get(r)||new n(null)).setTree(Xe(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_($e(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Pt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,$e(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(De(e))return null;{let o=Re(e),s=this.children.get(o);return s?s.findOnPath_(Xe(e),Pt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,$e(),t)}foreachOnPath_(e,t,r){if(De(e))return this;{this.value&&r(t,this.value);let i=Re(e),o=this.children.get(i);return o?o.foreachOnPath_(Xe(e),Pt(t,i),r):new n(null)}}foreach(e){this.foreach_($e(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Pt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var pr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new hn(null))}};function Ku(n,e,t){if(De(e))return new pr(new hn(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=zn(i,e);return o=o.updateChild(s,t),new pr(n.writeTree_.set(i,o))}else{let i=new hn(t),o=n.writeTree_.setTree(e,i);return new pr(o)}}}function TO(n,e,t){let r=n;return Gn(t,(i,o)=>{r=Ku(r,Pt(e,i),o)}),r}function xO(n,e){if(De(e))return pr.empty();{let t=n.writeTree_.setTree(e,new hn(null));return new pr(t)}}function sI(n,e){return Ps(n,e)!=null}function Ps(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(zn(t.path,e)):null}function DO(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Jt,(r,i)=>{e.push(new Oe(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Oe(r,i.value))}),e}function Co(n,e){if(De(e))return n;{let t=Ps(n,e);return t!=null?new pr(new hn(t)):new pr(n.writeTree_.subtree(e))}}function aI(n){return n.writeTree_.isEmpty()}function Ic(n,e){return wN($e(),n.writeTree_,e)}function wN(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(Q(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=wN(Pt(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Pt(n,".priority"),r)),t}}function bN(n,e){return TN(e,n)}function PG(n,e,t,r,i){Q(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ku(n.visibleWrites,e,t)),n.lastWriteId=r}function MG(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function RG(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);Q(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&OG(a,r.path)?i=!1:fr(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return NG(n),!0;if(r.snap)n.visibleWrites=xO(n.visibleWrites,r.path);else{let a=r.children;Gn(a,c=>{n.visibleWrites=xO(n.visibleWrites,Pt(r.path,c))})}return!0}else return!1}function OG(n,e){if(n.snap)return fr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&fr(Pt(n.path,t),e))return!0;return!1}function NG(n){n.visibleWrites=EN(n.allWrites,kG,$e()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function kG(n){return n.visible}function EN(n,e,t){let r=pr.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)fr(t,s)?(a=zn(t,s),r=Ku(r,a,o.snap)):fr(s,t)&&(a=zn(s,t),r=Ku(r,$e(),o.snap.getChild(a)));else if(o.children){if(fr(t,s))a=zn(t,s),r=TO(r,a,o.children);else if(fr(s,t))if(a=zn(s,t),De(a))r=TO(r,$e(),o.children);else{let c=is(o.children,Re(a));if(c){let u=c.getChild(Xe(a));r=Ku(r,$e(),u)}}}else throw rs("WriteRecord should have .snap or .children")}}return r}function IN(n,e,t,r,i){if(!r&&!i){let o=Ps(n.visibleWrites,e);if(o!=null)return o;{let s=Co(n.visibleWrites,e);if(aI(s))return t;if(t==null&&!sI(s,$e()))return null;{let a=t||it.EMPTY_NODE;return Ic(s,a)}}}else{let o=Co(n.visibleWrites,e);if(!i&&aI(o))return t;if(!i&&t==null&&!sI(o,$e()))return null;{let s=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(fr(u.path,e)||fr(e,u.path))},a=EN(n.allWrites,s,e),c=t||it.EMPTY_NODE;return Ic(a,c)}}}function FG(n,e,t){let r=it.EMPTY_NODE,i=Ps(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=Co(n.visibleWrites,e);return t.forEachChild(Jt,(s,a)=>{let c=Ic(Co(o,new Ke(s)),a);r=r.updateImmediateChild(s,c)}),DO(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Co(n.visibleWrites,e);return DO(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function LG(n,e,t,r,i){Q(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Pt(e,t);if(sI(n.visibleWrites,o))return null;{let s=Co(n.visibleWrites,o);return aI(s)?i.getChild(t):Ic(s,i.getChild(t))}}function VG(n,e,t,r){let i=Pt(e,t),o=Ps(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=Co(n.visibleWrites,i);return Ic(s,r.getNode().getImmediateChild(t))}else return null}function UG(n,e){return Ps(n.visibleWrites,e)}function BG(n,e,t,r,i,o,s){let a,c=Co(n.visibleWrites,e),u=Ps(c,$e());if(u!=null)a=u;else if(t!=null)a=Ic(c,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],g=s.getCompare(),y=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),b=y.getNext();for(;b&&d.length<i;)g(b,r)!==0&&d.push(b),b=y.getNext();return d}else return[]}function jG(){return{visibleWrites:pr.empty(),allWrites:[],lastWriteId:-1}}function cI(n,e,t,r){return IN(n.writeTree,n.treePath,e,t,r)}function CN(n,e){return FG(n.writeTree,n.treePath,e)}function AO(n,e,t,r){return LG(n.writeTree,n.treePath,e,t,r)}function Rm(n,e){return UG(n.writeTree,Pt(n.treePath,e))}function $G(n,e,t,r,i,o){return BG(n.writeTree,n.treePath,e,t,r,i,o)}function TI(n,e,t){return VG(n.writeTree,n.treePath,e,t)}function SN(n,e){return TN(Pt(n.treePath,e),n.writeTree)}function TN(n,e){return{treePath:n,writeTree:e}}var lI=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;Q(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Q(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,EO(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,bG(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,wG(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,EO(r,e.snapshotNode,i.oldSnap));else throw rs("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var uI=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},xN=new uI,Yu=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Qu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TI(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:As(this.viewCache_),o=$G(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function HG(n,e){Q(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Q(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function zG(n,e,t,r,i){let o=new lI,s,a;if(t.type===Ai.OVERWRITE){let u=t;u.source.fromUser?s=dI(n,e,u.path,u.snap,r,i,o):(Q(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!De(u.path),s=Om(n,e,u.path,u.snap,r,i,a,o))}else if(t.type===Ai.MERGE){let u=t;u.source.fromUser?s=GG(n,e,u.path,u.children,r,i,o):(Q(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=hI(n,e,u.path,u.children,r,i,a,o))}else if(t.type===Ai.ACK_USER_WRITE){let u=t;u.revert?s=QG(n,e,u.path,r,i,o):s=WG(n,e,u.path,u.affectedTree,r,i,o)}else if(t.type===Ai.LISTEN_COMPLETE)s=KG(n,e,t.path,r,o);else throw rs("Unknown operation type: "+t.type);let c=o.getChanges();return qG(e,s,c),{viewCache:s,changes:c}}function qG(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=oI(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(vG(oI(e)))}}function DN(n,e,t,r,i,o){let s=e.eventCache;if(Rm(r,t)!=null)return e;{let a,c;if(De(t))if(Q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=As(e),d=u instanceof it?u:it.EMPTY_NODE,g=CN(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),g,o)}else{let u=cI(r,As(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{let u=Re(t);if(u===".priority"){Q(So(t)===1,"Can't have a priority with additional path components");let d=s.getNode();c=e.serverCache.getNode();let g=AO(r,t,d,c);g!=null?a=n.filter.updatePriority(d,g):a=s.getNode()}else{let d=Xe(t),g;if(s.isCompleteForChild(u)){c=e.serverCache.getNode();let y=AO(r,t,s.getNode(),c);y!=null?g=s.getNode().getImmediateChild(u).updateChild(d,y):g=s.getNode().getImmediateChild(u)}else g=TI(r,u,e.serverCache);g!=null?a=n.filter.updateChild(s.getNode(),u,g,d,i,o):a=s.getNode()}}return Wu(e,a,s.isFullyInitialized()||De(t),n.filter.filtersNodes())}}function Om(n,e,t,r,i,o,s,a){let c=e.serverCache,u,d=s?n.filter:n.filter.getIndexedFilter();if(De(t))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let b=c.getNode().updateChild(t,r);u=d.updateFullNode(c.getNode(),b,null)}else{let b=Re(t);if(!c.isCompleteForPath(t)&&So(t)>1)return e;let C=Xe(t),R=c.getNode().getImmediateChild(b).updateChild(C,r);b===".priority"?u=d.updatePriority(c.getNode(),R):u=d.updateChild(c.getNode(),b,R,C,xN,null)}let g=vN(e,u,c.isFullyInitialized()||De(t),d.filtersNodes()),y=new Yu(i,g,o);return DN(n,g,t,i,y,a)}function dI(n,e,t,r,i,o,s){let a=e.eventCache,c,u,d=new Yu(i,e,o);if(De(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Wu(e,u,!0,n.filter.filtersNodes());else{let g=Re(t);if(g===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),c=Wu(e,u,a.isFullyInitialized(),a.isFiltered());else{let y=Xe(t),b=a.getNode().getImmediateChild(g),C;if(De(y))C=r;else{let O=d.getCompleteChild(g);O!=null?oN(y)===".priority"&&O.getChild(aN(y)).isEmpty()?C=O:C=O.updateChild(y,r):C=it.EMPTY_NODE}if(b.equals(C))c=e;else{let O=n.filter.updateChild(a.getNode(),g,C,y,d,s);c=Wu(e,O,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function PO(n,e){return n.eventCache.isCompleteForChild(e)}function GG(n,e,t,r,i,o,s){let a=e;return r.foreach((c,u)=>{let d=Pt(t,c);PO(e,Re(d))&&(a=dI(n,a,d,u,i,o,s))}),r.foreach((c,u)=>{let d=Pt(t,c);PO(e,Re(d))||(a=dI(n,a,d,u,i,o,s))}),a}function MO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function hI(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;De(t)?u=r:u=new hn(null).setTree(t,r);let d=e.serverCache.getNode();return u.children.inorderTraversal((g,y)=>{if(d.hasChild(g)){let b=e.serverCache.getNode().getImmediateChild(g),C=MO(n,b,y);c=Om(n,c,new Ke(g),C,i,o,s,a)}}),u.children.inorderTraversal((g,y)=>{let b=!e.serverCache.isCompleteForChild(g)&&y.value===null;if(!d.hasChild(g)&&!b){let C=e.serverCache.getNode().getImmediateChild(g),O=MO(n,C,y);c=Om(n,c,new Ke(g),O,i,o,s,a)}}),c}function WG(n,e,t,r,i,o,s){if(Rm(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(De(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Om(n,e,t,c.getNode().getChild(t),i,o,a,s);if(De(t)){let u=new hn(null);return c.getNode().forEachChild(_c,(d,g)=>{u=u.set(new Ke(d),g)}),hI(n,e,t,u,i,o,a,s)}else return e}else{let u=new hn(null);return r.foreach((d,g)=>{let y=Pt(t,d);c.isCompleteForPath(y)&&(u=u.set(d,c.getNode().getChild(y)))}),hI(n,e,t,u,i,o,a,s)}}function KG(n,e,t,r,i){let o=e.serverCache,s=vN(e,o.getNode(),o.isFullyInitialized()||De(t),o.isFiltered());return DN(n,s,t,r,xN,i)}function QG(n,e,t,r,i,o){let s;if(Rm(r,t)!=null)return e;{let a=new Yu(r,e,i),c=e.eventCache.getNode(),u;if(De(t)||Re(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=cI(r,As(e));else{let g=e.serverCache.getNode();Q(g instanceof it,"serverChildren would be complete if leaf node"),d=CN(r,g)}d=d,u=n.filter.updateFullNode(c,d,o)}else{let d=Re(t),g=TI(r,d,e.serverCache);g==null&&e.serverCache.isCompleteForChild(d)&&(g=c.getImmediateChild(d)),g!=null?u=n.filter.updateChild(c,d,g,Xe(t),a,o):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(c,d,it.EMPTY_NODE,Xe(t),a,o):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=cI(r,As(e)),s.isLeafNode()&&(u=n.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||Rm(r,$e())!=null,Wu(e,u,s,n.filter.filtersNodes())}}function YG(n,e){let t=As(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!De(e)&&!t.getImmediateChild(Re(e)).isEmpty())?t.getChild(e):null}function RO(n,e,t,r){e.type===Ai.MERGE&&e.source.queryId!==null&&(Q(As(n.viewCache_),"We should always have a full cache before handling merges"),Q(oI(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=zG(n.processor_,i,e,t,r);return HG(n.processor_,o.viewCache),Q(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,ZG(n,o.changes,o.viewCache.eventCache.getNode(),null)}function ZG(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return TG(n.eventGenerator_,e,t,i)}var OO;function JG(n){Q(!OO,"__referenceConstructor has already been defined"),OO=n}function xI(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return Q(o!=null,"SyncTree gave us an op for an invalid query."),RO(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(RO(s,e,t,r));return o}}function DI(n,e){let t=null;for(let r of n.views.values())t=t||YG(r,e);return t}var NO;function XG(n){Q(!NO,"__referenceConstructor has already been defined"),NO=n}var Nm=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new hn(null),this.pendingWriteTree_=jG(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function eW(n,e,t,r,i){return PG(n.pendingWriteTree_,e,t,r,i),i?Fm(n,new Ec(mN(),e,t)):[]}function mc(n,e,t=!1){let r=MG(n.pendingWriteTree_,e);if(RG(n.pendingWriteTree_,e)){let o=new hn(null);return r.snap!=null?o=o.set($e(),!0):Gn(r.children,s=>{o=o.set(new Ke(s),!0)}),Fm(n,new iI(r.path,o,t))}else return[]}function km(n,e,t){return Fm(n,new Ec(gN(),e,t))}function tW(n,e,t){let r=hn.fromObject(t);return Fm(n,new Mm(gN(),e,r))}function nW(n,e,t,r){let i=RN(n,r);if(i!=null){let o=ON(i),s=o.path,a=o.queryId,c=zn(s,e),u=new Ec(_N(a),c,t);return NN(n,s,u)}else return[]}function rW(n,e,t,r){let i=RN(n,r);if(i){let o=ON(i),s=o.path,a=o.queryId,c=zn(s,e),u=hn.fromObject(t),d=new Mm(_N(a),c,u);return NN(n,s,d)}else return[]}function AN(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let c=zn(s,e),u=DI(a,c);if(u)return u});return IN(i,e,o,t,!0)}function Fm(n,e){return PN(e,n.syncPointTree_,null,bN(n.pendingWriteTree_,$e()))}function PN(n,e,t,r){if(De(n.path))return MN(n,e,t,r);{let i=e.get($e());t==null&&i!=null&&(t=DI(i,$e()));let o=[],s=Re(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){let u=t?t.getImmediateChild(s):null,d=SN(r,s);o=o.concat(PN(a,c,u,d))}return i&&(o=o.concat(xI(i,n,r,t))),o}}function MN(n,e,t,r){let i=e.get($e());t==null&&i!=null&&(t=DI(i,$e()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=t?t.getImmediateChild(s):null,u=SN(r,s),d=n.operationForChild(s);d&&(o=o.concat(MN(d,a,c,u)))}),i&&(o=o.concat(xI(i,n,r,t))),o}function RN(n,e){return n.tagToQueryMap.get(e)}function ON(n){let e=n.indexOf("$");return Q(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ke(n.substr(0,e))}}function NN(n,e,t){let r=n.syncPointTree_.get(e);Q(r,"Missing sync point for query tag that we're tracking");let i=bN(n.pendingWriteTree_,e);return xI(r,t,i,null)}var fI=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},pI=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Pt(this.path_,e);return new n(this.syncTree_,t)}node(){return AN(this.syncTree_,this.path_)}},iW=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},kO=function(n,e,t){if(!n||typeof n!="object")return n;if(Q(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return oW(n[".sv"],e,t);if(typeof n[".sv"]=="object")return sW(n[".sv"],e);Q(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},oW=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:Q(!1,"Unexpected server value: "+n)}},sW=function(n,e,t){n.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&Q(!1,"Unexpected increment value: "+r);let i=e.node();if(Q(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},aW=function(n,e,t,r){return AI(e,new pI(t,n),r)},cW=function(n,e,t){return AI(n,new fI(e),t)};function AI(n,e,t){let r=n.getPriority().val(),i=kO(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=kO(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new wc(a,Zt(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new wc(i))),s.forEachChild(Jt,(a,c)=>{let u=AI(c,e.getImmediateChild(a),t);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}var Zu=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function PI(n,e){let t=e instanceof Ke?e:new Ke(e),r=n,i=Re(t);for(;i!==null;){let o=is(r.node.children,i)||{children:{},childCount:0};r=new Zu(i,r,o),t=Xe(t),i=Re(t)}return r}function Tc(n){return n.node.value}function kN(n,e){n.node.value=e,mI(n)}function FN(n){return n.node.childCount>0}function lW(n){return Tc(n)===void 0&&!FN(n)}function Lm(n,e){Gn(n.node.children,(t,r)=>{e(new Zu(t,n,r))})}function LN(n,e,t,r){t&&!r&&e(n),Lm(n,i=>{LN(i,e,!0,r)}),t&&r&&e(n)}function uW(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function nd(n){return new Ke(n.parent===null?n.name:nd(n.parent)+"/"+n.name)}function mI(n){n.parent!==null&&dW(n.parent,n.name,n)}function dW(n,e,t){let r=lW(t),i=Ar(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,mI(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,mI(n))}var hW=/[\[\].#$\/\u0000-\u001F\u007F]/,fW=/[\[\].#$\u0000-\u001F\u007F]/,AE=10*1024*1024,VN=function(n){return typeof n=="string"&&n.length!==0&&!hW.test(n)},pW=function(n){return typeof n=="string"&&n.length!==0&&!fW.test(n)},mW=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pW(n)};var UN=function(n,e,t){let r=t instanceof Ke?new HE(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ss(r));if(typeof e=="function")throw new Error(n+"contains a function "+Ss(r)+" with contents = "+e.toString());if(jO(e))throw new Error(n+"contains "+e.toString()+" "+Ss(r));if(typeof e=="string"&&e.length>AE/3&&Xl(e)>AE)throw new Error(n+"contains a string greater than "+AE+" utf8 bytes "+Ss(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Gn(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!VN(s)))throw new Error(n+" contains an invalid key ("+s+") "+Ss(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sG(r,s),UN(n,a,r),aG(r)}),i&&o)throw new Error(n+' contains ".value" child '+Ss(r)+" in addition to actual children.")}};var gW=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!VN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!mW(t))throw new Error(VP(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var gI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function _W(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!cN(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function Ms(n,e,t){_W(n,t),yW(n,r=>fr(r,e)||fr(e,r))}function yW(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(vW(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function vW(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();xs&&Yt("event: "+t.toString()),ed(r)}}}var wW="repo_interrupt",bW=25,_I=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pm(),this.transactionQueueTree_=new Zu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function EW(n,e,t){if(n.stats_=II(n.repoInfo_),n.forceRestClient_||k9())n.server_=new XE(n.repoInfo_,(r,i,o,s)=>{FO(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>LO(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new CI(n.repoInfo_,e,(r,i,o,s)=>{FO(n,r,i,o,s)},r=>{LO(n,r)},r=>{CW(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=L9(n.repoInfo_,()=>new rI(n.stats_,n.server_)),n.infoData_=new eI,n.infoSyncTree_=new Nm({startListening:(r,i,o,s)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=km(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),MI(n,"connected",!1),n.serverSyncTree_=new Nm({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{let u=s(a,c);Ms(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function IW(n){let t=n.infoData_.getNode(new Ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function BN(n){return iW({timestamp:IW(n)})}function FO(n,e,t,r,i){n.dataUpdateCount++;let o=new Ke(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let c=Jl(t,u=>Zt(u));s=rW(n.serverSyncTree_,o,c,i)}else{let c=Zt(t);s=nW(n.serverSyncTree_,o,c,i)}else if(r){let c=Jl(t,u=>Zt(u));s=tW(n.serverSyncTree_,o,c)}else{let c=Zt(t);s=km(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=OI(n,o)),Ms(n.eventQueue_,a,s)}function LO(n,e){MI(n,"connected",e),e===!1&&TW(n)}function CW(n,e){Gn(e,(t,r)=>{MI(n,t,r)})}function MI(n,e,t){let r=new Ke("/.info/"+e),i=Zt(t);n.infoData_.updateSnapshot(r,i);let o=km(n.infoSyncTree_,r,i);Ms(n.eventQueue_,r,o)}function SW(n){return n.nextWriteId_++}function TW(n){jN(n,"onDisconnectEvents");let e=BN(n),t=Pm();tI(n.onDisconnect_,$e(),(i,o)=>{let s=aW(i,o,n.serverSyncTree_,e);pN(t,i,s)});let r=[];tI(t,$e(),(i,o)=>{r=r.concat(km(n.serverSyncTree_,i,o));let s=PW(n,i);OI(n,s)}),n.onDisconnect_=Pm(),Ms(n.eventQueue_,$e(),r)}function xW(n){n.persistentConnection_&&n.persistentConnection_.interrupt(wW)}function jN(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Yt(t,...e)}function $N(n,e,t){return AN(n.serverSyncTree_,e,t)||it.EMPTY_NODE}function RI(n,e=n.transactionQueueTree_){if(e||Vm(n,e),Tc(e)){let t=zN(n,e);Q(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&DW(n,nd(e),t)}else FN(e)&&Lm(e,t=>{RI(n,t)})}function DW(n,e,t){let r=t.map(u=>u.currentWriteId),i=$N(n,e,r),o=i,s=i.hash();for(let u=0;u<t.length;u++){let d=t[u];Q(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let g=zn(e,d.path);o=o.updateChild(g,d.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;n.server_.put(c.toString(),a,u=>{jN(n,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){let g=[];for(let y=0;y<t.length;y++)t[y].status=2,d=d.concat(mc(n.serverSyncTree_,t[y].currentWriteId)),t[y].onComplete&&g.push(()=>t[y].onComplete(null,!0,t[y].currentOutputSnapshotResolved)),t[y].unwatcher();Vm(n,PI(n.transactionQueueTree_,e)),RI(n,n.transactionQueueTree_),Ms(n.eventQueue_,e,d);for(let y=0;y<g.length;y++)ed(g[y])}else{if(u==="datastale")for(let g=0;g<t.length;g++)t[g].status===3?t[g].status=4:t[g].status=0;else{An("transaction at "+c.toString()+" failed: "+u);for(let g=0;g<t.length;g++)t[g].status=4,t[g].abortReason=u}OI(n,e)}},s)}function OI(n,e){let t=HN(n,e),r=nd(t),i=zN(n,t);return AW(n,i,r),r}function AW(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=zn(t,c.path),d=!1,g;if(Q(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,g=c.abortReason,i=i.concat(mc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=bW)d=!0,g="maxretry",i=i.concat(mc(n.serverSyncTree_,c.currentWriteId,!0));else{let y=$N(n,c.path,s);c.currentInputSnapshot=y;let b=e[a].update(y.val());if(b!==void 0){UN("transaction failed: Data returned ",b,c.path);let C=Zt(b);typeof b=="object"&&b!=null&&Ar(b,".priority")||(C=C.updatePriority(y.getPriority()));let R=c.currentWriteId,U=BN(n),j=cW(C,y,U);c.currentOutputSnapshotRaw=C,c.currentOutputSnapshotResolved=j,c.currentWriteId=SW(n),s.splice(s.indexOf(R),1),i=i.concat(eW(n.serverSyncTree_,c.path,j,c.currentWriteId,c.applyLocally)),i=i.concat(mc(n.serverSyncTree_,R,!0))}else d=!0,g="nodata",i=i.concat(mc(n.serverSyncTree_,c.currentWriteId,!0))}Ms(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(y){setTimeout(y,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(g==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(g),!1,null))))}Vm(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)ed(r[a]);RI(n,n.transactionQueueTree_)}function HN(n,e){let t,r=n.transactionQueueTree_;for(t=Re(e);t!==null&&Tc(r)===void 0;)r=PI(r,t),e=Xe(e),t=Re(e);return r}function zN(n,e){let t=[];return qN(n,e,t),t.sort((r,i)=>r.order-i.order),t}function qN(n,e,t){let r=Tc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Lm(e,i=>{qN(n,i,t)})}function Vm(n,e){let t=Tc(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,kN(e,t.length>0?t:void 0)}Lm(e,r=>{Vm(n,r)})}function PW(n,e){let t=nd(HN(n,e)),r=PI(n.transactionQueueTree_,e);return uW(r,i=>{PE(n,i)}),PE(n,r),LN(r,i=>{PE(n,i)}),t}function PE(n,e){let t=Tc(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?(Q(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(Q(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(mc(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?kN(e,void 0):t.length=o+1,Ms(n.eventQueue_,nd(e),i);for(let s=0;s<r.length;s++)ed(r[s])}}function MW(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function RW(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):An(`Invalid query segment '${t}' in query '${n}'`)}return e}var VO=function(n,e){let t=OW(n),r=t.namespace;t.domain==="firebase.com"&&Pi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||x9();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Im(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Ke(t.pathString)}},OW=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let g=n.indexOf("?");g===-1&&(g=n.length),e=n.substring(0,Math.min(d,g)),d<g&&(i=MW(n.substring(d,g)));let y=RW(n.substring(Math.min(n.length,g)));u=e.indexOf(":"),u>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let b=e.slice(0,u);if(b.toLowerCase()==="localhost")t="localhost";else if(b.split(".").length<=2)t=b;else{let C=e.indexOf(".");r=e.substring(0,C).toLowerCase(),t=e.substring(C+1),o=r}"ns"in y&&(o=y.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var yI=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return De(this._path)?null:oN(this._path)}get ref(){return new Cc(this._repo,this._path)}get _queryIdentifier(){let e=CO(this._queryParams),t=EI(e);return t==="{}"?"default":t}get _queryObject(){return CO(this._queryParams)}isEqual(e){if(e=qe(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=cN(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+oG(this._path)}};var Cc=class n extends yI{constructor(e,t){super(e,t,new JE,!1)}get parent(){let e=aN(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};JG(Cc);XG(Cc);var NW="FIREBASE_DATABASE_EMULATOR_HOST",vI={},kW=!1;function FW(n,e,t,r){n.repoInfo_=new Im(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function LW(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Yt("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=VO(o,i),a=s.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[NW]),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=VO(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let d=i&&c?new Gu(Gu.OWNER):new FE(n.name,n.options,e);gW("Invalid Firebase Database URL",s),De(s.path)||Pi("Database URL must point to the root of a Firebase Database (not including a child path).");let g=UW(a,n,d,new kE(n.name,t));return new wI(g,n)}function VW(n,e){let t=vI[e];(!t||t[n.key]!==n)&&Pi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),xW(n),delete t[n.key]}function UW(n,e,t,r){let i=vI[e.name];i||(i={},vI[e.name]=i);let o=i[n.toURLString()];return o&&Pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new _I(n,kW,t,r),i[n.toURLString()]=o,o}var wI=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(EW(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Cc(this._repo,$e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(VW(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Pi("Cannot call "+e+" on a deleted database.")}};function GN(n=Rr(),e){let t=vi(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Oa("database");r&&WN(t,...r)}return t}function WN(n,e,t,r={}){n=qe(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Pi("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Pi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Gu(Gu.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:Na(r.mockUserToken,n.app.options.projectId);o=new Gu(s)}FW(i,e,t,o)}function BW(n){C9(Bn),Un(new zt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return LW(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),Be(sO,aO,n),Be(sO,aO,"esm2017")}CI.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};CI.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};BW();var rd=class{constructor(e){return e}},KN="database",NI=class{constructor(){return wi(KN)}};var kI=new ne("angularfire2.database-instances");function jW(n,e){let t=ho(KN,n,e);return t&&new rd(t)}function $W(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new rd(r)}}var HW={provide:NI,deps:[[new Ye,kI]]},zW={provide:rd,useFactory:jW,deps:[[new Ye,kI],Sn]};function QN(n,...e){return Be("angularfire",lr.full,"rtdb"),an([zW,HW,{provide:kI,useFactory:$W(n),multi:!0,deps:[Ve,bt,Nr,ur,[new Ye,Ci],[new Ye,Or],...e]}])}var YN=tt(GN,!0);var nk="firebasestorage.googleapis.com",qW="storageBucket",GW=2*60*1e3,WW=10*60*1e3;var qr=class n extends on{constructor(e,t,r=0){super(FI(e),`Firebase Storage: ${t} (${FI(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return FI(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ri=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ri||{});function FI(n){return"storage/"+n}function KW(){let n="An unknown error occurred, please check the error payload for server response.";return new qr(Ri.UNKNOWN,n)}function QW(){return new qr(Ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YW(){return new qr(Ri.CANCELED,"User canceled the upload/download.")}function ZW(n){return new qr(Ri.INVALID_URL,"Invalid URL '"+n+"'.")}function JW(n){return new qr(Ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ZN(n){return new qr(Ri.INVALID_ARGUMENT,n)}function rk(){return new qr(Ri.APP_DELETED,"The Firebase app was deleted.")}function XW(n){return new qr(Ri.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Mi=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw JW(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(X){X.path_=decodeURIComponent(X.path)}let d="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${d}/b/${i}/o${y}`,"i"),C={bucket:1,path:3},O=t===nk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",U=new RegExp(`^https?://${O}/${i}/${R}`,"i"),V=[{regex:a,indices:c,postModify:o},{regex:b,indices:C,postModify:u},{regex:U,indices:{bucket:1,path:2},postModify:u}];for(let X=0;X<V.length;X++){let _e=V[X],te=_e.regex.exec(e);if(te){let x=te[_e.indices.bucket],I=te[_e.indices.path];I||(I=""),r=new n(x,I),_e.postModify(r);break}}if(r==null)throw ZW(e);return r}},LI=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function e7(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function d(...R){u||(u=!0,e.apply(null,R))}function g(R){i=setTimeout(()=>{i=null,n(b,c())},R)}function y(){o&&clearTimeout(o)}function b(R,...U){if(u){y();return}if(R){y(),d.call(null,R,...U);return}if(c()||s){y(),d.call(null,R,...U);return}r<64&&(r*=2);let V;a===1?(a=2,V=0):V=(r+Math.random())*1e3,g(V)}let C=!1;function O(R){C||(C=!0,y(),!u&&(i!==null?(R||(a=2),clearTimeout(i),g(0)):R||(a=1)))}return g(0),o=setTimeout(()=>{s=!0,O(!0)},t),O}function t7(n){n(!1)}function n7(n){return n!==void 0}function JN(n,e,t,r){if(r<e)throw ZN(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ZN(`Invalid value for '${n}'. Expected ${t} or less.`)}function r7(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var VI=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(VI||{});function i7(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var UI=class{constructor(e,t,r,i,o,s,a,c,u,d,g,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,C)=>{this.resolve_=b,this.reject_=C,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new xc(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===VI.NO_ERROR,c=o.getStatus();if(!a||i7(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===VI.ABORT;r(!1,new xc(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new xc(u,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());n7(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=KW();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?rk():YW();s(c)}else{let c=QW();s(c)}};this.canceled_?t(!1,new xc(!1,null,!0)):this.backoffId_=e7(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},xc=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function o7(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function s7(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function a7(n,e){e&&(n["X-Firebase-GMPID"]=e)}function c7(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function l7(n,e,t,r,i,o,s=!0){let a=r7(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return a7(u,e),o7(u,t),s7(u,o),c7(u,r),new UI(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function u7(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function d7(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var Vae=256*1024;var BI=class n{constructor(e,t){this._service=e,t instanceof Mi?this._location=t:this._location=Mi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return d7(this._location.path)}get storage(){return this._service}get parent(){let e=u7(this._location.path);if(e===null)return null;let t=new Mi(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw XW(e)}};function XN(n,e){let t=e?.[qW];return t==null?null:Mi.makeFromBucketSpec(t,n)}function h7(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Na(i,n.app.options.projectId))}var jI=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=nk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=GW,this._maxUploadRetryTime=WW,this._requests=new Set,i!=null?this._bucket=Mi.makeFromBucketSpec(i,this._host):this._bucket=XN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mi.makeFromBucketSpec(this._url,e):this._bucket=XN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return E(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return E(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new BI(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new LI(rk());{let s=l7(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return E(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},ek="@firebase/storage",tk="0.13.2";var ik="storage";function ok(n=Rr(),e){n=qe(n);let r=vi(n,ik).getImmediate({identifier:e}),i=Oa("storage");return i&&sk(r,...i),r}function sk(n,e,t,r={}){h7(n,e,t,r)}function f7(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new jI(t,r,i,e,Bn)}function p7(){Un(new zt(ik,f7,"PUBLIC").setMultipleInstances(!0)),Be(ek,tk,""),Be(ek,tk,"esm2017")}p7();var id=class{constructor(e){return e}},ak="storage",$I=class{constructor(){return wi(ak)}};var HI=new ne("angularfire2.storage-instances");function m7(n,e){let t=ho(ak,n,e);return t&&new id(t)}function g7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new id(r)}}var _7={provide:$I,deps:[[new Ye,HI]]},y7={provide:id,useFactory:m7,deps:[[new Ye,HI],Sn]};function ck(n,...e){return Be("angularfire",lr.full,"gcs"),an([y7,_7,{provide:HI,useFactory:g7(n),multi:!0,deps:[Ve,bt,Nr,ur,[new Ye,Ci],[new Ye,Or],...e]}])}var lk=tt(ok,!0);var zI={providers:[VD({eventCoalescing:!0}),Sf(wm),e1(()=>t1({projectId:"auction-bazar-db",appId:"1:570787756626:web:0bd461a22aa2b4a1243d8b",storageBucket:"auction-bazar-db.appspot.com",apiKey:"AIzaSyAZh8itdyLPbmDangQ2c8yIKuGrxaYrxVI",authDomain:"auction-bazar-db.firebaseapp.com",messagingSenderId:"570787756626"})),Y1(()=>X1()),XR(()=>tO()),QN(()=>YN()),ck(()=>lk())]};lA(Tf,oe(H({},zI),{providers:[...zI.providers,Sf(wm)]})).catch(n=>console.error(n));
